const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapView-CQggdJmt.js","assets/react-vendor-3Ywg6HeR.js","assets/combobox-8VYuuaMS.js","assets/useHover-CHyh5gg8.js","assets/MarkdownContent-DLpEGSYA.js","assets/PDFViewer-CJxpvW3B.js","assets/map-vendor-Bbrwb_BN.js","assets/utilities-BiTQLgRB.js","assets/LocationsView-CHK55JMK.js","assets/CharactersView-DEMeP-JL.js","assets/Select-DWiMgGh3.js","assets/AssetViewerDialog-CU17L3GW.js","assets/CombatsView-C6yITjBR.js","assets/CombatSessionView-Be6c6fnW.js","assets/AssetsView-GBH9dwDr.js"])))=>i.map(i=>d[i]);
import{r as L,a as Ur,c as mt,g as Ln,u as An,L as Er,R as ie,b as Pn,B as In,d as Dn,e as Fe}from"./react-vendor-3Ywg6HeR.js";import{_ as Le}from"./map-vendor-Bbrwb_BN.js";import{v as Ht,h as jr,c as Rn}from"./utilities-BiTQLgRB.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var Vr={exports:{}},At={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=L,On=Symbol.for("react.element"),Mn=Symbol.for("react.fragment"),Fn=Object.prototype.hasOwnProperty,Bn=zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wn={key:!0,ref:!0,__self:!0,__source:!0};function Hr(t,r,e){var s,n={},i=null,a=null;e!==void 0&&(i=""+e),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(a=r.ref);for(s in r)Fn.call(r,s)&&!Wn.hasOwnProperty(s)&&(n[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:On,type:t,key:i,ref:a,props:n,_owner:Bn.current}}At.Fragment=Mn;At.jsx=Hr;At.jsxs=Hr;Vr.exports=At;var c=Vr.exports,Kt={},Cr=Ur;Kt.createRoot=Cr.createRoot,Kt.hydrateRoot=Cr.hydrateRoot;function pt(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,r){(function(e){t.exports=e()})(function(){return function e(s,n,i){function a(d,u){if(!n[d]){if(!s[d]){var f=typeof pt=="function"&&pt;if(!u&&f)return f(d,!0);if(o)return o(d,!0);var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v}var m=n[d]={exports:{}};s[d][0].call(m.exports,function(g){var b=s[d][1][g];return a(b||g)},m,m.exports,e,s,n,i)}return n[d].exports}for(var o=typeof pt=="function"&&pt,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(e,s,n){var i=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var d,u,f,v,m,g,b,x=[],y=0,w=l.length,E=w,S=i.getTypeOf(l)!=="string";y<l.length;)E=w-y,f=S?(d=l[y++],u=y<w?l[y++]:0,y<w?l[y++]:0):(d=l.charCodeAt(y++),u=y<w?l.charCodeAt(y++):0,y<w?l.charCodeAt(y++):0),v=d>>2,m=(3&d)<<4|u>>4,g=1<E?(15&u)<<2|f>>6:64,b=2<E?63&f:64,x.push(o.charAt(v)+o.charAt(m)+o.charAt(g)+o.charAt(b));return x.join("")},n.decode=function(l){var d,u,f,v,m,g,b=0,x=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var w,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)d=o.indexOf(l.charAt(b++))<<2|(v=o.indexOf(l.charAt(b++)))>>4,u=(15&v)<<4|(m=o.indexOf(l.charAt(b++)))>>2,f=(3&m)<<6|(g=o.indexOf(l.charAt(b++))),w[x++]=d,m!==64&&(w[x++]=u),g!==64&&(w[x++]=f);return w}},{"./support":30,"./utils":32}],2:[function(e,s,n){var i=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function d(u,f,v,m,g){this.compressedSize=u,this.uncompressedSize=f,this.crc32=v,this.compression=m,this.compressedContent=g}d.prototype={getContentWorker:function(){var u=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,f,v){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(f.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},s.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,n){var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,n){var i=e("./utils"),a=function(){for(var o,l=[],d=0;d<256;d++){o=d;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[d]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(d,u,f,v){var m=a,g=v+f;d^=-1;for(var b=v;b<g;b++)d=d>>>8^m[255&(d^u[b])];return-1^d}(0|l,o,o.length,0):function(d,u,f,v){var m=a,g=v+f;d^=-1;for(var b=v;b<g;b++)d=d>>>8^m[255&(d^u.charCodeAt(b))];return-1^d}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,s,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,s,n){var i=null;i=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:i}},{lie:37}],7:[function(e,s,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),d=i?"uint8array":"array";function u(f,v){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=v,this.meta={}}n.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(d,f.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(v){f.push({data:v,meta:f.meta})}},n.compressWorker=function(f){return new u("Deflate",f)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,n){function i(m,g){var b,x="";for(b=0;b<g;b++)x+=String.fromCharCode(255&m),m>>>=8;return x}function a(m,g,b,x,y,w){var E,S,T=m.file,F=m.compression,M=w!==d.utf8encode,j=o.transformTo("string",w(T.name)),N=o.transformTo("string",d.utf8encode(T.name)),I=T.comment,z=o.transformTo("string",w(I)),k=o.transformTo("string",d.utf8encode(I)),$=N.length!==T.name.length,h=k.length!==I.length,D="",Q="",K="",re=T.dir,W=T.date,U={crc32:0,compressedSize:0,uncompressedSize:0};g&&!b||(U.crc32=m.crc32,U.compressedSize=m.compressedSize,U.uncompressedSize=m.uncompressedSize);var O=0;g&&(O|=8),M||!$&&!h||(O|=2048);var R=0,te=0;re&&(R|=16),y==="UNIX"?(te=798,R|=function(Y,me){var ye=Y;return Y||(ye=me?16893:33204),(65535&ye)<<16}(T.unixPermissions,re)):(te=20,R|=function(Y){return 63&(Y||0)}(T.dosPermissions)),E=W.getUTCHours(),E<<=6,E|=W.getUTCMinutes(),E<<=5,E|=W.getUTCSeconds()/2,S=W.getUTCFullYear()-1980,S<<=4,S|=W.getUTCMonth()+1,S<<=5,S|=W.getUTCDate(),$&&(Q=i(1,1)+i(u(j),4)+N,D+="up"+i(Q.length,2)+Q),h&&(K=i(1,1)+i(u(z),4)+k,D+="uc"+i(K.length,2)+K);var X="";return X+=`
\0`,X+=i(O,2),X+=F.magic,X+=i(E,2),X+=i(S,2),X+=i(U.crc32,4),X+=i(U.compressedSize,4),X+=i(U.uncompressedSize,4),X+=i(j.length,2),X+=i(D.length,2),{fileRecord:f.LOCAL_FILE_HEADER+X+j+D,dirRecord:f.CENTRAL_FILE_HEADER+i(te,2)+X+i(z.length,2)+"\0\0\0\0"+i(R,4)+i(x,4)+j+D+z}}var o=e("../utils"),l=e("../stream/GenericWorker"),d=e("../utf8"),u=e("../crc32"),f=e("../signature");function v(m,g,b,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=b,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(v,l),v.prototype.push=function(m){var g=m.meta.percent||0,b=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:b?(g+100*(b-x-1))/b:100}}))},v.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var g=this.streamFiles&&!m.file.dir;if(g){var b=a(m,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(m){this.accumulate=!1;var g=this.streamFiles&&!m.file.dir,b=a(m,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),g)this.push({data:function(x){return f.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var m=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var b=this.bytesWritten-m,x=function(y,w,E,S,T){var F=o.transformTo("string",T(S));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(w,4)+i(E,4)+i(F.length,2)+F}(this.dirRecords.length,b,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(m){this._sources.push(m);var g=this;return m.on("data",function(b){g.processChunk(b)}),m.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),m.on("error",function(b){g.error(b)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(m){var g=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var b=0;b<g.length;b++)try{g[b].error(m)}catch{}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,g=0;g<m.length;g++)m[g].lock()},s.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,n){var i=e("../compressions"),a=e("./ZipFileWorker");n.generateWorker=function(o,l,d){var u=new a(l.streamFiles,d,l.platform,l.encodeFileName),f=0;try{o.forEach(function(v,m){f++;var g=function(w,E){var S=w||E,T=i[S];if(!T)throw new Error(S+" is not a valid compression method !");return T}(m.options.compression,l.compression),b=m.options.compressionOptions||l.compressionOptions||{},x=m.dir,y=m.date;m._compressWorker(g,b).withStreamInfo("file",{name:v,dir:x,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(v){u.error(v)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(a,o){return new i().loadAsync(a,o)},i.external=e("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,n){var i=e("./utils"),a=e("./external"),o=e("./utf8"),l=e("./zipEntries"),d=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function f(v){return new a.Promise(function(m,g){var b=v.decompressed.getContentWorker().pipe(new d);b.on("error",function(x){g(x)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}s.exports=function(v,m){var g=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(v)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,m.optimizedBinaryString,m.base64).then(function(b){var x=new l(m);return x.load(b),x}).then(function(b){var x=[a.Promise.resolve(b)],y=b.files;if(m.checkCRC32)for(var w=0;w<y.length;w++)x.push(f(y[w]));return a.Promise.all(x)}).then(function(b){for(var x=b.shift(),y=x.files,w=0;w<y.length;w++){var E=y[w],S=E.fileNameStr,T=i.resolve(E.fileNameStr);g.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:m.createFolders}),E.dir||(g.file(T).unsafeOriginalName=S)}return x.zipComment.length&&(g.comment=x.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,n){var i=e("../utils"),a=e("../stream/GenericWorker");function o(l,d){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(o,a),o.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,n){var i=e("readable-stream").Readable;function a(o,l,d){i.call(this,l),this._helper=o;var u=this;o.on("data",function(f,v){u.push(f)||u._helper.pause(),d&&d(v)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}e("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,s,n){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(e,s,n){function i(T,F,M){var j,N=o.getTypeOf(F),I=o.extend(M||{},u);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(T=y(T)),I.createFolders&&(j=x(T))&&w.call(this,j,!0);var z=N==="string"&&I.binary===!1&&I.base64===!1;M&&M.binary!==void 0||(I.binary=!z),(F instanceof f&&F.uncompressedSize===0||I.dir||!F||F.length===0)&&(I.base64=!1,I.binary=!0,F="",I.compression="STORE",N="string");var k=null;k=F instanceof f||F instanceof l?F:g.isNode&&g.isStream(F)?new b(T,F):o.prepareContent(T,F,I.binary,I.optimizedBinaryString,I.base64);var $=new v(T,k,I);this.files[T]=$}var a=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),u=e("./defaults"),f=e("./compressedObject"),v=e("./zipObject"),m=e("./generate"),g=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),x=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var F=T.lastIndexOf("/");return 0<F?T.substring(0,F):""},y=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},w=function(T,F){return F=F!==void 0?F:u.createFolders,T=y(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:F}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var F,M,j;for(F in this.files)j=this.files[F],(M=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&T(M,j)},filter:function(T){var F=[];return this.forEach(function(M,j){T(M,j)&&F.push(j)}),F},file:function(T,F,M){if(arguments.length!==1)return T=this.root+T,i.call(this,T,F,M),this;if(E(T)){var j=T;return this.filter(function(I,z){return!z.dir&&j.test(I)})}var N=this.files[this.root+T];return N&&!N.dir?N:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(N,I){return I.dir&&T.test(N)});var F=this.root+T,M=w.call(this,F),j=this.clone();return j.root=M.name,j},remove:function(T){T=this.root+T;var F=this.files[T];if(F||(T.slice(-1)!=="/"&&(T+="/"),F=this.files[T]),F&&!F.dir)delete this.files[T];else for(var M=this.filter(function(N,I){return I.name.slice(0,T.length)===T}),j=0;j<M.length;j++)delete this.files[M[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var F,M={};try{if((M=o.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");o.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var j=M.comment||this.comment||"";F=m.generateWorker(this,M,j)}catch(N){(F=new l("error")).error(N)}return new d(F,M.type||"string",M.mimeType)},generateAsync:function(T,F){return this.generateInternalStream(T).accumulate(F)},generateNodeStream:function(T,F){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(F)}};s.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,n){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,n){var i=e("./DataReader");function a(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),d=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===d&&this.data[v+2]===u&&this.data[v+3]===f)return v-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),d=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),v=this.readData(4);return l===v[0]&&d===v[1]&&u===v[2]&&f===v[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,s,n){var i=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,d=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=o,d},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(e,s,n){var i=e("./Uint8ArrayReader");function a(o){i.call(this,o)}e("../utils").inherits(a,i),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,n){var i=e("./DataReader");function a(o){i.call(this,o)}e("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,s,n){var i=e("./ArrayReader");function a(o){i.call(this,o)}e("../utils").inherits(a,i),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,n){var i=e("../utils"),a=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),d=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");s.exports=function(f){var v=i.getTypeOf(f);return i.checkSupport(v),v!=="string"||a.uint8array?v==="nodebuffer"?new d(f):a.uint8array?new u(i.transformTo("uint8array",f)):new o(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,n){var i=e("./GenericWorker"),a=e("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,n){var i=e("./GenericWorker"),a=e("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,n){var i=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,a),o.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}a.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,n){var i=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,n){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=i},{}],29:[function(e,s,n){var i=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),d=e("../support"),u=e("../external"),f=null;if(d.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(g,b){return new u.Promise(function(x,y){var w=[],E=g._internalType,S=g._outputType,T=g._mimeType;g.on("data",function(F,M){w.push(F),b&&b(M)}).on("error",function(F){w=[],y(F)}).on("end",function(){try{var F=function(M,j,N){switch(M){case"blob":return i.newBlob(i.transformTo("arraybuffer",j),N);case"base64":return l.encode(j);default:return i.transformTo(M,j)}}(S,function(M,j){var N,I=0,z=null,k=0;for(N=0;N<j.length;N++)k+=j[N].length;switch(M){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(z=new Uint8Array(k),N=0;N<j.length;N++)z.set(j[N],I),I+=j[N].length;return z;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+M+"'")}}(E,w),T);x(F)}catch(M){y(M)}w=[]}).resume()})}function m(g,b,x){var y=b;switch(b){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=b,this._mimeType=x,i.checkSupport(y),this._worker=g.pipe(new a(y)),g.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}m.prototype={accumulate:function(g){return v(this,g)},on:function(g,b){var x=this;return g==="data"?this._worker.on(g,function(y){b.call(x,y.data,y.meta)}):this._worker.on(g,function(){i.delay(b,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},g)}},s.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),n.blob=a.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,n){for(var i=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}n.utf8encode=function(m){return a.nodebuffer?o.newBufferFrom(m,"utf-8"):function(g){var b,x,y,w,E,S=g.length,T=0;for(w=0;w<S;w++)(64512&(x=g.charCodeAt(w)))==55296&&w+1<S&&(64512&(y=g.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),w++),T+=x<128?1:x<2048?2:x<65536?3:4;for(b=a.uint8array?new Uint8Array(T):new Array(T),w=E=0;E<T;w++)(64512&(x=g.charCodeAt(w)))==55296&&w+1<S&&(64512&(y=g.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),w++),x<128?b[E++]=x:(x<2048?b[E++]=192|x>>>6:(x<65536?b[E++]=224|x>>>12:(b[E++]=240|x>>>18,b[E++]=128|x>>>12&63),b[E++]=128|x>>>6&63),b[E++]=128|63&x);return b}(m)},n.utf8decode=function(m){return a.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(g){var b,x,y,w,E=g.length,S=new Array(2*E);for(b=x=0;b<E;)if((y=g[b++])<128)S[x++]=y;else if(4<(w=d[y]))S[x++]=65533,b+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&b<E;)y=y<<6|63&g[b++],w--;1<w?S[x++]=65533:y<65536?S[x++]=y:(y-=65536,S[x++]=55296|y>>10&1023,S[x++]=56320|1023&y)}return S.length!==x&&(S.subarray?S=S.subarray(0,x):S.length=x),i.applyFromCharCode(S)}(m=i.transformTo(a.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var g=i.transformTo(a.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var b=g;(g=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),g.set(b,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var x=function(w,E){var S;for((E=E||w.length)>w.length&&(E=w.length),S=E-1;0<=S&&(192&w[S])==128;)S--;return S<0||S===0?E:S+d[w[S]]>E?S:E}(g),y=g;x!==g.length&&(a.uint8array?(y=g.subarray(0,x),this.leftOver=g.subarray(x,g.length)):(y=g.slice(0,x),this.leftOver=g.slice(x,g.length))),this.push({data:n.utf8decode(y),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=f,i.inherits(v,l),v.prototype.processChunk=function(m){this.push({data:n.utf8encode(m.data),meta:m.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,n){var i=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function d(b){return b}function u(b,x){for(var y=0;y<b.length;++y)x[y]=255&b.charCodeAt(y);return x}e("setimmediate"),n.newBlob=function(b,x){n.checkSupport("blob");try{return new Blob([b],{type:x})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(b),y.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(b,x,y){var w=[],E=0,S=b.length;if(S<=y)return String.fromCharCode.apply(null,b);for(;E<S;)x==="array"||x==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+y,S)))):w.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+y,S)))),E+=y;return w.join("")},stringifyByChar:function(b){for(var x="",y=0;y<b.length;y++)x+=String.fromCharCode(b[y]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function v(b){var x=65536,y=n.getTypeOf(b),w=!0;if(y==="uint8array"?w=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<x;)try{return f.stringifyByChunk(b,y,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(b)}function m(b,x){for(var y=0;y<b.length;y++)x[y]=b[y];return x}n.applyFromCharCode=v;var g={};g.string={string:d,array:function(b){return u(b,new Array(b.length))},arraybuffer:function(b){return g.string.uint8array(b).buffer},uint8array:function(b){return u(b,new Uint8Array(b.length))},nodebuffer:function(b){return u(b,o.allocBuffer(b.length))}},g.array={string:v,array:d,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},g.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:d,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},g.uint8array={string:v,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:d,nodebuffer:function(b){return o.newBufferFrom(b)}},g.nodebuffer={string:v,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return g.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:d},n.transformTo=function(b,x){if(x=x||"",!b)return x;n.checkSupport(b);var y=n.getTypeOf(x);return g[y][b](x)},n.resolve=function(b){for(var x=b.split("/"),y=[],w=0;w<x.length;w++){var E=x[w];E==="."||E===""&&w!==0&&w!==x.length-1||(E===".."?y.pop():y.push(E))}return y.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var x,y,w="";for(y=0;y<(b||"").length;y++)w+="\\x"+((x=b.charCodeAt(y))<16?"0":"")+x.toString(16).toUpperCase();return w},n.delay=function(b,x,y){setImmediate(function(){b.apply(y||null,x||[])})},n.inherits=function(b,x){function y(){}y.prototype=x.prototype,b.prototype=new y},n.extend=function(){var b,x,y={};for(b=0;b<arguments.length;b++)for(x in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],x)&&y[x]===void 0&&(y[x]=arguments[b][x]);return y},n.prepareContent=function(b,x,y,w,E){return l.Promise.resolve(x).then(function(S){return i.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,F){var M=new FileReader;M.onload=function(j){T(j.target.result)},M.onerror=function(j){F(j.target.error)},M.readAsArrayBuffer(S)}):S}).then(function(S){var T=n.getTypeOf(S);return T?(T==="arraybuffer"?S=n.transformTo("uint8array",S):T==="string"&&(E?S=a.decode(S):y&&w!==!0&&(S=function(F){return u(F,i.uint8array?new Uint8Array(F.length):new Array(F.length))}(S))),S):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,n){var i=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),l=e("./zipEntry"),d=e("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(v)+", expected "+a.pretty(f)+")")}},isSignature:function(f,v){var m=this.reader.index;this.reader.setIndex(f);var g=this.reader.readString(4)===v;return this.reader.setIndex(m),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),v=d.uint8array?"uint8array":"array",m=a.transformTo(v,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,v,m,g=this.zip64EndOfCentralSize-44;0<g;)f=this.reader.readInt(2),v=this.reader.readInt(4),m=this.reader.readData(v),this.zip64ExtensibleData[f]={id:f,length:v,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,v;for(f=0;f<this.files.length;f++)v=this.files[f],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var v=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var g=v-m;if(0<g)this.isSignature(v,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,n){var i=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),d=e("./utf8"),u=e("./compressions"),f=e("./support");function v(m,g){this.options=m,this.loadOptions=g}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var g,b;if(m.skip(22),this.fileNameLength=m.readInt(2),b=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(x){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===x)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var g=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(g),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var g,b,x,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)g=m.readInt(2),b=m.readInt(2),x=m.readData(b),this.extraFields[g]={id:g,length:b,value:x};m.setIndex(y)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var b=a.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var y=a.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var g=i(m.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:d.utf8decode(g.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var g=i(m.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:d.utf8decode(g.readData(m.length-5))}return null}},s.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,n){function i(g,b,x){this.name=g,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=b,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),d=e("./compressedObject"),u=e("./stream/GenericWorker");i.prototype={internalStream:function(g){var b=null,x="string";try{if(!g)throw new Error("No output type specified.");var y=(x=g.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!y&&(b=b.pipe(new l.Utf8EncodeWorker)),!w&&y&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new u("error")).error(E)}return new a(b,x,"")},async:function(g,b){return this.internalStream(g).accumulate(b)},nodeStream:function(g,b){return this.internalStream(g||"nodebuffer").toNodejsStream(b)},_compressWorker:function(g,b){if(this._data instanceof d&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(x,g,b)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=v;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,n){(function(i){var a,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var d=0,u=new l(g),f=i.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){g(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(g,0)};else{var v=new i.MessageChannel;v.port1.onmessage=g,a=function(){v.port2.postMessage(0)}}var m=[];function g(){var b,x;o=!0;for(var y=m.length;y;){for(x=m,m=[],b=-1;++b<y;)x[b]();y=m.length}o=!1}s.exports=function(b){m.push(b)!==1||o||a()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,n){var i=e("immediate");function a(){}var o={},l=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&b(this,y)}function v(y,w,E){this.promise=y,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function m(y,w,E){i(function(){var S;try{S=w(E)}catch(T){return o.reject(y,T)}S===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,S)})}function g(y){var w=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof w=="function")return function(){w.apply(y,arguments)}}function b(y,w){var E=!1;function S(M){E||(E=!0,o.reject(y,M))}function T(M){E||(E=!0,o.resolve(y,M))}var F=x(function(){w(T,S)});F.status==="error"&&S(F.value)}function x(y,w){var E={};try{E.value=y(w),E.status="success"}catch(S){E.status="error",E.value=S}return E}(s.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var w=this.constructor;return this.then(function(E){return w.resolve(y()).then(function(){return E})},function(E){return w.resolve(y()).then(function(){throw E})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,w){if(typeof y!="function"&&this.state===d||typeof w!="function"&&this.state===l)return this;var E=new this.constructor(a);return this.state!==u?m(E,this.state===d?y:w,this.outcome):this.queue.push(new v(E,y,w)),E},v.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},v.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},v.prototype.callRejected=function(y){o.reject(this.promise,y)},v.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},o.resolve=function(y,w){var E=x(g,w);if(E.status==="error")return o.reject(y,E.value);var S=E.value;if(S)b(y,S);else{y.state=d,y.outcome=w;for(var T=-1,F=y.queue.length;++T<F;)y.queue[T].callFulfilled(w)}return y},o.reject=function(y,w){y.state=l,y.outcome=w;for(var E=-1,S=y.queue.length;++E<S;)y.queue[E].callRejected(w);return y},f.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},f.reject=function(y){var w=new this(a);return o.reject(w,y)},f.all=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=y.length,S=!1;if(!E)return this.resolve([]);for(var T=new Array(E),F=0,M=-1,j=new this(a);++M<E;)N(y[M],M);return j;function N(I,z){w.resolve(I).then(function(k){T[z]=k,++F!==E||S||(S=!0,o.resolve(j,T))},function(k){S||(S=!0,o.reject(j,k))})}},f.race=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=y.length,S=!1;if(!E)return this.resolve([]);for(var T=-1,F=new this(a);++T<E;)M=y[T],w.resolve(M).then(function(j){S||(S=!0,o.resolve(F,j))},function(j){S||(S=!0,o.reject(F,j))});var M;return F}},{immediate:36}],38:[function(e,s,n){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,n){var i=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),d=e("./zlib/zstream"),u=Object.prototype.toString,f=0,v=-1,m=0,g=8;function b(y){if(!(this instanceof b))return new b(y);this.options=a.assign({level:v,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(E!==f)throw new Error(l[E]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var S;if(S=typeof w.dictionary=="string"?o.string2buf(w.dictionary):u.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(E=i.deflateSetDictionary(this.strm,S))!==f)throw new Error(l[E]);this._dict_set=!0}}function x(y,w){var E=new b(w);if(E.push(y,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(y,w){var E,S,T=this.strm,F=this.options.chunkSize;if(this.ended)return!1;S=w===~~w?w:w===!0?4:0,typeof y=="string"?T.input=o.string2buf(y):u.call(y)==="[object ArrayBuffer]"?T.input=new Uint8Array(y):T.input=y,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new a.Buf8(F),T.next_out=0,T.avail_out=F),(E=i.deflate(T,S))!==1&&E!==f)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(T.output,T.next_out))):this.onData(a.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return S===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f):S!==2||(this.onEnd(f),!(T.avail_out=0))},b.prototype.onData=function(y){this.chunks.push(y)},b.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},n.Deflate=b,n.deflate=x,n.deflateRaw=function(y,w){return(w=w||{}).raw=!0,x(y,w)},n.gzip=function(y,w){return(w=w||{}).gzip=!0,x(y,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,n){var i=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),u=e("./zlib/zstream"),f=e("./zlib/gzheader"),v=Object.prototype.toString;function m(b){if(!(this instanceof m))return new m(b);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||b&&b.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,x.windowBits);if(y!==l.Z_OK)throw new Error(d[y]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function g(b,x){var y=new m(x);if(y.push(b,!0),y.err)throw y.msg||d[y.err];return y.result}m.prototype.push=function(b,x){var y,w,E,S,T,F,M=this.strm,j=this.options.chunkSize,N=this.options.dictionary,I=!1;if(this.ended)return!1;w=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?M.input=o.binstring2buf(b):v.call(b)==="[object ArrayBuffer]"?M.input=new Uint8Array(b):M.input=b,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new a.Buf8(j),M.next_out=0,M.avail_out=j),(y=i.inflate(M,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(F=typeof N=="string"?o.string2buf(N):v.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,y=i.inflateSetDictionary(this.strm,F)),y===l.Z_BUF_ERROR&&I===!0&&(y=l.Z_OK,I=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&y!==l.Z_STREAM_END&&(M.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(M.output,M.next_out),S=M.next_out-E,T=o.buf2string(M.output,E),M.next_out=S,M.avail_out=j-S,S&&a.arraySet(M.output,M.output,E,S,0),this.onData(T)):this.onData(a.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(I=!0)}while((0<M.avail_in||M.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(M.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=m,n.inflate=g,n.inflateRaw=function(b,x){return(x=x||{}).raw=!0,g(b,x)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])}}return l},n.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var a={arraySet:function(l,d,u,f,v){if(d.subarray&&l.subarray)l.set(d.subarray(u,u+f),v);else for(var m=0;m<f;m++)l[v+m]=d[u+m]},flattenChunks:function(l){var d,u,f,v,m,g;for(d=f=0,u=l.length;d<u;d++)f+=l[d].length;for(g=new Uint8Array(f),d=v=0,u=l.length;d<u;d++)m=l[d],g.set(m,v),v+=m.length;return g}},o={arraySet:function(l,d,u,f,v){for(var m=0;m<f;m++)l[v+m]=d[u+m]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(e,s,n){var i=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(f,v){if(v<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(f,v));for(var m="",g=0;g<v;g++)m+=String.fromCharCode(f[g]);return m}l[254]=l[254]=1,n.string2buf=function(f){var v,m,g,b,x,y=f.length,w=0;for(b=0;b<y;b++)(64512&(m=f.charCodeAt(b)))==55296&&b+1<y&&(64512&(g=f.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),b++),w+=m<128?1:m<2048?2:m<65536?3:4;for(v=new i.Buf8(w),b=x=0;x<w;b++)(64512&(m=f.charCodeAt(b)))==55296&&b+1<y&&(64512&(g=f.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),b++),m<128?v[x++]=m:(m<2048?v[x++]=192|m>>>6:(m<65536?v[x++]=224|m>>>12:(v[x++]=240|m>>>18,v[x++]=128|m>>>12&63),v[x++]=128|m>>>6&63),v[x++]=128|63&m);return v},n.buf2binstring=function(f){return u(f,f.length)},n.binstring2buf=function(f){for(var v=new i.Buf8(f.length),m=0,g=v.length;m<g;m++)v[m]=f.charCodeAt(m);return v},n.buf2string=function(f,v){var m,g,b,x,y=v||f.length,w=new Array(2*y);for(m=g=0;m<y;)if((b=f[m++])<128)w[g++]=b;else if(4<(x=l[b]))w[g++]=65533,m+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&m<y;)b=b<<6|63&f[m++],x--;1<x?w[g++]=65533:b<65536?w[g++]=b:(b-=65536,w[g++]=55296|b>>10&1023,w[g++]=56320|1023&b)}return u(w,g)},n.utf8border=function(f,v){var m;for((v=v||f.length)>f.length&&(v=f.length),m=v-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?v:m+l[f[m]]>v?m:v}},{"./common":41}],43:[function(e,s,n){s.exports=function(i,a,o,l){for(var d=65535&i|0,u=i>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;u=u+(d=d+a[l++]|0)|0,--f;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(e,s,n){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,n){var i=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();s.exports=function(a,o,l,d){var u=i,f=d+l;a^=-1;for(var v=d;v<f;v++)a=a>>>8^u[255&(a^o[v])];return-1^a}},{}],46:[function(e,s,n){var i,a=e("../utils/common"),o=e("./trees"),l=e("./adler32"),d=e("./crc32"),u=e("./messages"),f=0,v=4,m=0,g=-2,b=-1,x=4,y=2,w=8,E=9,S=286,T=30,F=19,M=2*S+1,j=15,N=3,I=258,z=I+N+1,k=42,$=113,h=1,D=2,Q=3,K=4;function re(p,V){return p.msg=u[V],V}function W(p){return(p<<1)-(4<p?9:0)}function U(p){for(var V=p.length;0<=--V;)p[V]=0}function O(p){var V=p.state,B=V.pending;B>p.avail_out&&(B=p.avail_out),B!==0&&(a.arraySet(p.output,V.pending_buf,V.pending_out,B,p.next_out),p.next_out+=B,V.pending_out+=B,p.total_out+=B,p.avail_out-=B,V.pending-=B,V.pending===0&&(V.pending_out=0))}function R(p,V){o._tr_flush_block(p,0<=p.block_start?p.block_start:-1,p.strstart-p.block_start,V),p.block_start=p.strstart,O(p.strm)}function te(p,V){p.pending_buf[p.pending++]=V}function X(p,V){p.pending_buf[p.pending++]=V>>>8&255,p.pending_buf[p.pending++]=255&V}function Y(p,V){var B,C,_=p.max_chain_length,A=p.strstart,H=p.prev_length,Z=p.nice_match,P=p.strstart>p.w_size-z?p.strstart-(p.w_size-z):0,J=p.window,q=p.w_mask,G=p.prev,ee=p.strstart+I,ce=J[A+H-1],ae=J[A+H];p.prev_length>=p.good_match&&(_>>=2),Z>p.lookahead&&(Z=p.lookahead);do if(J[(B=V)+H]===ae&&J[B+H-1]===ce&&J[B]===J[A]&&J[++B]===J[A+1]){A+=2,B++;do;while(J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&J[++A]===J[++B]&&A<ee);if(C=I-(ee-A),A=ee-I,H<C){if(p.match_start=V,Z<=(H=C))break;ce=J[A+H-1],ae=J[A+H]}}while((V=G[V&q])>P&&--_!=0);return H<=p.lookahead?H:p.lookahead}function me(p){var V,B,C,_,A,H,Z,P,J,q,G=p.w_size;do{if(_=p.window_size-p.lookahead-p.strstart,p.strstart>=G+(G-z)){for(a.arraySet(p.window,p.window,G,G,0),p.match_start-=G,p.strstart-=G,p.block_start-=G,V=B=p.hash_size;C=p.head[--V],p.head[V]=G<=C?C-G:0,--B;);for(V=B=G;C=p.prev[--V],p.prev[V]=G<=C?C-G:0,--B;);_+=G}if(p.strm.avail_in===0)break;if(H=p.strm,Z=p.window,P=p.strstart+p.lookahead,J=_,q=void 0,q=H.avail_in,J<q&&(q=J),B=q===0?0:(H.avail_in-=q,a.arraySet(Z,H.input,H.next_in,q,P),H.state.wrap===1?H.adler=l(H.adler,Z,q,P):H.state.wrap===2&&(H.adler=d(H.adler,Z,q,P)),H.next_in+=q,H.total_in+=q,q),p.lookahead+=B,p.lookahead+p.insert>=N)for(A=p.strstart-p.insert,p.ins_h=p.window[A],p.ins_h=(p.ins_h<<p.hash_shift^p.window[A+1])&p.hash_mask;p.insert&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[A+N-1])&p.hash_mask,p.prev[A&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=A,A++,p.insert--,!(p.lookahead+p.insert<N)););}while(p.lookahead<z&&p.strm.avail_in!==0)}function ye(p,V){for(var B,C;;){if(p.lookahead<z){if(me(p),p.lookahead<z&&V===f)return h;if(p.lookahead===0)break}if(B=0,p.lookahead>=N&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+N-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),B!==0&&p.strstart-B<=p.w_size-z&&(p.match_length=Y(p,B)),p.match_length>=N)if(C=o._tr_tally(p,p.strstart-p.match_start,p.match_length-N),p.lookahead-=p.match_length,p.match_length<=p.max_lazy_match&&p.lookahead>=N){for(p.match_length--;p.strstart++,p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+N-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart,--p.match_length!=0;);p.strstart++}else p.strstart+=p.match_length,p.match_length=0,p.ins_h=p.window[p.strstart],p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+1])&p.hash_mask;else C=o._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++;if(C&&(R(p,!1),p.strm.avail_out===0))return h}return p.insert=p.strstart<N-1?p.strstart:N-1,V===v?(R(p,!0),p.strm.avail_out===0?Q:K):p.last_lit&&(R(p,!1),p.strm.avail_out===0)?h:D}function ne(p,V){for(var B,C,_;;){if(p.lookahead<z){if(me(p),p.lookahead<z&&V===f)return h;if(p.lookahead===0)break}if(B=0,p.lookahead>=N&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+N-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),p.prev_length=p.match_length,p.prev_match=p.match_start,p.match_length=N-1,B!==0&&p.prev_length<p.max_lazy_match&&p.strstart-B<=p.w_size-z&&(p.match_length=Y(p,B),p.match_length<=5&&(p.strategy===1||p.match_length===N&&4096<p.strstart-p.match_start)&&(p.match_length=N-1)),p.prev_length>=N&&p.match_length<=p.prev_length){for(_=p.strstart+p.lookahead-N,C=o._tr_tally(p,p.strstart-1-p.prev_match,p.prev_length-N),p.lookahead-=p.prev_length-1,p.prev_length-=2;++p.strstart<=_&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+N-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),--p.prev_length!=0;);if(p.match_available=0,p.match_length=N-1,p.strstart++,C&&(R(p,!1),p.strm.avail_out===0))return h}else if(p.match_available){if((C=o._tr_tally(p,0,p.window[p.strstart-1]))&&R(p,!1),p.strstart++,p.lookahead--,p.strm.avail_out===0)return h}else p.match_available=1,p.strstart++,p.lookahead--}return p.match_available&&(C=o._tr_tally(p,0,p.window[p.strstart-1]),p.match_available=0),p.insert=p.strstart<N-1?p.strstart:N-1,V===v?(R(p,!0),p.strm.avail_out===0?Q:K):p.last_lit&&(R(p,!1),p.strm.avail_out===0)?h:D}function oe(p,V,B,C,_){this.good_length=p,this.max_lazy=V,this.nice_length=B,this.max_chain=C,this.func=_}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*M),this.dyn_dtree=new a.Buf16(2*(2*T+1)),this.bl_tree=new a.Buf16(2*(2*F+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(j+1),this.heap=new a.Buf16(2*S+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*S+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pe(p){var V;return p&&p.state?(p.total_in=p.total_out=0,p.data_type=y,(V=p.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?k:$,p.adler=V.wrap===2?0:1,V.last_flush=f,o._tr_init(V),m):re(p,g)}function Ae(p){var V=pe(p);return V===m&&function(B){B.window_size=2*B.w_size,U(B.head),B.max_lazy_match=i[B.level].max_lazy,B.good_match=i[B.level].good_length,B.nice_match=i[B.level].nice_length,B.max_chain_length=i[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=N-1,B.match_available=0,B.ins_h=0}(p.state),V}function Te(p,V,B,C,_,A){if(!p)return g;var H=1;if(V===b&&(V=6),C<0?(H=0,C=-C):15<C&&(H=2,C-=16),_<1||E<_||B!==w||C<8||15<C||V<0||9<V||A<0||x<A)return re(p,g);C===8&&(C=9);var Z=new ve;return(p.state=Z).strm=p,Z.wrap=H,Z.gzhead=null,Z.w_bits=C,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=_+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+N-1)/N),Z.window=new a.Buf8(2*Z.w_size),Z.head=new a.Buf16(Z.hash_size),Z.prev=new a.Buf16(Z.w_size),Z.lit_bufsize=1<<_+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new a.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=V,Z.strategy=A,Z.method=B,Ae(p)}i=[new oe(0,0,0,0,function(p,V){var B=65535;for(B>p.pending_buf_size-5&&(B=p.pending_buf_size-5);;){if(p.lookahead<=1){if(me(p),p.lookahead===0&&V===f)return h;if(p.lookahead===0)break}p.strstart+=p.lookahead,p.lookahead=0;var C=p.block_start+B;if((p.strstart===0||p.strstart>=C)&&(p.lookahead=p.strstart-C,p.strstart=C,R(p,!1),p.strm.avail_out===0)||p.strstart-p.block_start>=p.w_size-z&&(R(p,!1),p.strm.avail_out===0))return h}return p.insert=0,V===v?(R(p,!0),p.strm.avail_out===0?Q:K):(p.strstart>p.block_start&&(R(p,!1),p.strm.avail_out),h)}),new oe(4,4,8,4,ye),new oe(4,5,16,8,ye),new oe(4,6,32,32,ye),new oe(4,4,16,16,ne),new oe(8,16,32,32,ne),new oe(8,16,128,128,ne),new oe(8,32,128,256,ne),new oe(32,128,258,1024,ne),new oe(32,258,258,4096,ne)],n.deflateInit=function(p,V){return Te(p,V,w,15,8,0)},n.deflateInit2=Te,n.deflateReset=Ae,n.deflateResetKeep=pe,n.deflateSetHeader=function(p,V){return p&&p.state?p.state.wrap!==2?g:(p.state.gzhead=V,m):g},n.deflate=function(p,V){var B,C,_,A;if(!p||!p.state||5<V||V<0)return p?re(p,g):g;if(C=p.state,!p.output||!p.input&&p.avail_in!==0||C.status===666&&V!==v)return re(p,p.avail_out===0?-5:g);if(C.strm=p,B=C.last_flush,C.last_flush=V,C.status===k)if(C.wrap===2)p.adler=0,te(C,31),te(C,139),te(C,8),C.gzhead?(te(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),te(C,255&C.gzhead.time),te(C,C.gzhead.time>>8&255),te(C,C.gzhead.time>>16&255),te(C,C.gzhead.time>>24&255),te(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),te(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(te(C,255&C.gzhead.extra.length),te(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(p.adler=d(p.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(te(C,0),te(C,0),te(C,0),te(C,0),te(C,0),te(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),te(C,3),C.status=$);else{var H=w+(C.w_bits-8<<4)<<8;H|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(H|=32),H+=31-H%31,C.status=$,X(C,H),C.strstart!==0&&(X(C,p.adler>>>16),X(C,65535&p.adler)),p.adler=1}if(C.status===69)if(C.gzhead.extra){for(_=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),O(p),_=C.pending,C.pending!==C.pending_buf_size));)te(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){_=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),O(p),_=C.pending,C.pending===C.pending_buf_size)){A=1;break}A=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,te(C,A)}while(A!==0);C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),A===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){_=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),O(p),_=C.pending,C.pending===C.pending_buf_size)){A=1;break}A=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,te(C,A)}while(A!==0);C.gzhead.hcrc&&C.pending>_&&(p.adler=d(p.adler,C.pending_buf,C.pending-_,_)),A===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&O(p),C.pending+2<=C.pending_buf_size&&(te(C,255&p.adler),te(C,p.adler>>8&255),p.adler=0,C.status=$)):C.status=$),C.pending!==0){if(O(p),p.avail_out===0)return C.last_flush=-1,m}else if(p.avail_in===0&&W(V)<=W(B)&&V!==v)return re(p,-5);if(C.status===666&&p.avail_in!==0)return re(p,-5);if(p.avail_in!==0||C.lookahead!==0||V!==f&&C.status!==666){var Z=C.strategy===2?function(P,J){for(var q;;){if(P.lookahead===0&&(me(P),P.lookahead===0)){if(J===f)return h;break}if(P.match_length=0,q=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,q&&(R(P,!1),P.strm.avail_out===0))return h}return P.insert=0,J===v?(R(P,!0),P.strm.avail_out===0?Q:K):P.last_lit&&(R(P,!1),P.strm.avail_out===0)?h:D}(C,V):C.strategy===3?function(P,J){for(var q,G,ee,ce,ae=P.window;;){if(P.lookahead<=I){if(me(P),P.lookahead<=I&&J===f)return h;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=N&&0<P.strstart&&(G=ae[ee=P.strstart-1])===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]){ce=P.strstart+I;do;while(G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&G===ae[++ee]&&ee<ce);P.match_length=I-(ce-ee),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=N?(q=o._tr_tally(P,1,P.match_length-N),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(q=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),q&&(R(P,!1),P.strm.avail_out===0))return h}return P.insert=0,J===v?(R(P,!0),P.strm.avail_out===0?Q:K):P.last_lit&&(R(P,!1),P.strm.avail_out===0)?h:D}(C,V):i[C.level].func(C,V);if(Z!==Q&&Z!==K||(C.status=666),Z===h||Z===Q)return p.avail_out===0&&(C.last_flush=-1),m;if(Z===D&&(V===1?o._tr_align(C):V!==5&&(o._tr_stored_block(C,0,0,!1),V===3&&(U(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),O(p),p.avail_out===0))return C.last_flush=-1,m}return V!==v?m:C.wrap<=0?1:(C.wrap===2?(te(C,255&p.adler),te(C,p.adler>>8&255),te(C,p.adler>>16&255),te(C,p.adler>>24&255),te(C,255&p.total_in),te(C,p.total_in>>8&255),te(C,p.total_in>>16&255),te(C,p.total_in>>24&255)):(X(C,p.adler>>>16),X(C,65535&p.adler)),O(p),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?m:1)},n.deflateEnd=function(p){var V;return p&&p.state?(V=p.state.status)!==k&&V!==69&&V!==73&&V!==91&&V!==103&&V!==$&&V!==666?re(p,g):(p.state=null,V===$?re(p,-3):m):g},n.deflateSetDictionary=function(p,V){var B,C,_,A,H,Z,P,J,q=V.length;if(!p||!p.state||(A=(B=p.state).wrap)===2||A===1&&B.status!==k||B.lookahead)return g;for(A===1&&(p.adler=l(p.adler,V,q,0)),B.wrap=0,q>=B.w_size&&(A===0&&(U(B.head),B.strstart=0,B.block_start=0,B.insert=0),J=new a.Buf8(B.w_size),a.arraySet(J,V,q-B.w_size,B.w_size,0),V=J,q=B.w_size),H=p.avail_in,Z=p.next_in,P=p.input,p.avail_in=q,p.next_in=0,p.input=V,me(B);B.lookahead>=N;){for(C=B.strstart,_=B.lookahead-(N-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[C+N-1])&B.hash_mask,B.prev[C&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=C,C++,--_;);B.strstart=C,B.lookahead=N-1,me(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=N-1,B.match_available=0,p.next_in=Z,p.input=P,p.avail_in=H,B.wrap=A,m},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,n){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,n){s.exports=function(i,a){var o,l,d,u,f,v,m,g,b,x,y,w,E,S,T,F,M,j,N,I,z,k,$,h,D;o=i.state,l=i.next_in,h=i.input,d=l+(i.avail_in-5),u=i.next_out,D=i.output,f=u-(a-i.avail_out),v=u+(i.avail_out-257),m=o.dmax,g=o.wsize,b=o.whave,x=o.wnext,y=o.window,w=o.hold,E=o.bits,S=o.lencode,T=o.distcode,F=(1<<o.lenbits)-1,M=(1<<o.distbits)-1;e:do{E<15&&(w+=h[l++]<<E,E+=8,w+=h[l++]<<E,E+=8),j=S[w&F];t:for(;;){if(w>>>=N=j>>>24,E-=N,(N=j>>>16&255)===0)D[u++]=65535&j;else{if(!(16&N)){if(!(64&N)){j=S[(65535&j)+(w&(1<<N)-1)];continue t}if(32&N){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}I=65535&j,(N&=15)&&(E<N&&(w+=h[l++]<<E,E+=8),I+=w&(1<<N)-1,w>>>=N,E-=N),E<15&&(w+=h[l++]<<E,E+=8,w+=h[l++]<<E,E+=8),j=T[w&M];r:for(;;){if(w>>>=N=j>>>24,E-=N,!(16&(N=j>>>16&255))){if(!(64&N)){j=T[(65535&j)+(w&(1<<N)-1)];continue r}i.msg="invalid distance code",o.mode=30;break e}if(z=65535&j,E<(N&=15)&&(w+=h[l++]<<E,(E+=8)<N&&(w+=h[l++]<<E,E+=8)),m<(z+=w&(1<<N)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=N,E-=N,(N=u-f)<z){if(b<(N=z-N)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if($=y,(k=0)===x){if(k+=g-N,N<I){for(I-=N;D[u++]=y[k++],--N;);k=u-z,$=D}}else if(x<N){if(k+=g+x-N,(N-=x)<I){for(I-=N;D[u++]=y[k++],--N;);if(k=0,x<I){for(I-=N=x;D[u++]=y[k++],--N;);k=u-z,$=D}}}else if(k+=x-N,N<I){for(I-=N;D[u++]=y[k++],--N;);k=u-z,$=D}for(;2<I;)D[u++]=$[k++],D[u++]=$[k++],D[u++]=$[k++],I-=3;I&&(D[u++]=$[k++],1<I&&(D[u++]=$[k++]))}else{for(k=u-z;D[u++]=D[k++],D[u++]=D[k++],D[u++]=D[k++],2<(I-=3););I&&(D[u++]=D[k++],1<I&&(D[u++]=D[k++]))}break}}break}}while(l<d&&u<v);l-=I=E>>3,w&=(1<<(E-=I<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<d?d-l+5:5-(l-d),i.avail_out=u<v?v-u+257:257-(u-v),o.hold=w,o.bits=E}},{}],49:[function(e,s,n){var i=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),l=e("./inffast"),d=e("./inftrees"),u=1,f=2,v=0,m=-2,g=1,b=852,x=592;function y(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(k){var $;return k&&k.state?($=k.state,k.total_in=k.total_out=$.total=0,k.msg="",$.wrap&&(k.adler=1&$.wrap),$.mode=g,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new i.Buf32(b),$.distcode=$.distdyn=new i.Buf32(x),$.sane=1,$.back=-1,v):m}function S(k){var $;return k&&k.state?(($=k.state).wsize=0,$.whave=0,$.wnext=0,E(k)):m}function T(k,$){var h,D;return k&&k.state?(D=k.state,$<0?(h=0,$=-$):(h=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?m:(D.window!==null&&D.wbits!==$&&(D.window=null),D.wrap=h,D.wbits=$,S(k))):m}function F(k,$){var h,D;return k?(D=new w,(k.state=D).window=null,(h=T(k,$))!==v&&(k.state=null),h):m}var M,j,N=!0;function I(k){if(N){var $;for(M=new i.Buf32(512),j=new i.Buf32(32),$=0;$<144;)k.lens[$++]=8;for(;$<256;)k.lens[$++]=9;for(;$<280;)k.lens[$++]=7;for(;$<288;)k.lens[$++]=8;for(d(u,k.lens,0,288,M,0,k.work,{bits:9}),$=0;$<32;)k.lens[$++]=5;d(f,k.lens,0,32,j,0,k.work,{bits:5}),N=!1}k.lencode=M,k.lenbits=9,k.distcode=j,k.distbits=5}function z(k,$,h,D){var Q,K=k.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new i.Buf8(K.wsize)),D>=K.wsize?(i.arraySet(K.window,$,h-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(D<(Q=K.wsize-K.wnext)&&(Q=D),i.arraySet(K.window,$,h-D,Q,K.wnext),(D-=Q)?(i.arraySet(K.window,$,h-D,D,0),K.wnext=D,K.whave=K.wsize):(K.wnext+=Q,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=Q))),0}n.inflateReset=S,n.inflateReset2=T,n.inflateResetKeep=E,n.inflateInit=function(k){return F(k,15)},n.inflateInit2=F,n.inflate=function(k,$){var h,D,Q,K,re,W,U,O,R,te,X,Y,me,ye,ne,oe,ve,pe,Ae,Te,p,V,B,C,_=0,A=new i.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return m;(h=k.state).mode===12&&(h.mode=13),re=k.next_out,Q=k.output,U=k.avail_out,K=k.next_in,D=k.input,W=k.avail_in,O=h.hold,R=h.bits,te=W,X=U,V=v;e:for(;;)switch(h.mode){case g:if(h.wrap===0){h.mode=13;break}for(;R<16;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(2&h.wrap&&O===35615){A[h.check=0]=255&O,A[1]=O>>>8&255,h.check=o(h.check,A,2,0),R=O=0,h.mode=2;break}if(h.flags=0,h.head&&(h.head.done=!1),!(1&h.wrap)||(((255&O)<<8)+(O>>8))%31){k.msg="incorrect header check",h.mode=30;break}if((15&O)!=8){k.msg="unknown compression method",h.mode=30;break}if(R-=4,p=8+(15&(O>>>=4)),h.wbits===0)h.wbits=p;else if(p>h.wbits){k.msg="invalid window size",h.mode=30;break}h.dmax=1<<p,k.adler=h.check=1,h.mode=512&O?10:12,R=O=0;break;case 2:for(;R<16;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(h.flags=O,(255&h.flags)!=8){k.msg="unknown compression method",h.mode=30;break}if(57344&h.flags){k.msg="unknown header flags set",h.mode=30;break}h.head&&(h.head.text=O>>8&1),512&h.flags&&(A[0]=255&O,A[1]=O>>>8&255,h.check=o(h.check,A,2,0)),R=O=0,h.mode=3;case 3:for(;R<32;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.head&&(h.head.time=O),512&h.flags&&(A[0]=255&O,A[1]=O>>>8&255,A[2]=O>>>16&255,A[3]=O>>>24&255,h.check=o(h.check,A,4,0)),R=O=0,h.mode=4;case 4:for(;R<16;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.head&&(h.head.xflags=255&O,h.head.os=O>>8),512&h.flags&&(A[0]=255&O,A[1]=O>>>8&255,h.check=o(h.check,A,2,0)),R=O=0,h.mode=5;case 5:if(1024&h.flags){for(;R<16;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.length=O,h.head&&(h.head.extra_len=O),512&h.flags&&(A[0]=255&O,A[1]=O>>>8&255,h.check=o(h.check,A,2,0)),R=O=0}else h.head&&(h.head.extra=null);h.mode=6;case 6:if(1024&h.flags&&(W<(Y=h.length)&&(Y=W),Y&&(h.head&&(p=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),i.arraySet(h.head.extra,D,K,Y,p)),512&h.flags&&(h.check=o(h.check,D,Y,K)),W-=Y,K+=Y,h.length-=Y),h.length))break e;h.length=0,h.mode=7;case 7:if(2048&h.flags){if(W===0)break e;for(Y=0;p=D[K+Y++],h.head&&p&&h.length<65536&&(h.head.name+=String.fromCharCode(p)),p&&Y<W;);if(512&h.flags&&(h.check=o(h.check,D,Y,K)),W-=Y,K+=Y,p)break e}else h.head&&(h.head.name=null);h.length=0,h.mode=8;case 8:if(4096&h.flags){if(W===0)break e;for(Y=0;p=D[K+Y++],h.head&&p&&h.length<65536&&(h.head.comment+=String.fromCharCode(p)),p&&Y<W;);if(512&h.flags&&(h.check=o(h.check,D,Y,K)),W-=Y,K+=Y,p)break e}else h.head&&(h.head.comment=null);h.mode=9;case 9:if(512&h.flags){for(;R<16;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(O!==(65535&h.check)){k.msg="header crc mismatch",h.mode=30;break}R=O=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),k.adler=h.check=0,h.mode=12;break;case 10:for(;R<32;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}k.adler=h.check=y(O),R=O=0,h.mode=11;case 11:if(h.havedict===0)return k.next_out=re,k.avail_out=U,k.next_in=K,k.avail_in=W,h.hold=O,h.bits=R,2;k.adler=h.check=1,h.mode=12;case 12:if($===5||$===6)break e;case 13:if(h.last){O>>>=7&R,R-=7&R,h.mode=27;break}for(;R<3;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}switch(h.last=1&O,R-=1,3&(O>>>=1)){case 0:h.mode=14;break;case 1:if(I(h),h.mode=20,$!==6)break;O>>>=2,R-=2;break e;case 2:h.mode=17;break;case 3:k.msg="invalid block type",h.mode=30}O>>>=2,R-=2;break;case 14:for(O>>>=7&R,R-=7&R;R<32;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if((65535&O)!=(O>>>16^65535)){k.msg="invalid stored block lengths",h.mode=30;break}if(h.length=65535&O,R=O=0,h.mode=15,$===6)break e;case 15:h.mode=16;case 16:if(Y=h.length){if(W<Y&&(Y=W),U<Y&&(Y=U),Y===0)break e;i.arraySet(Q,D,K,Y,re),W-=Y,K+=Y,U-=Y,re+=Y,h.length-=Y;break}h.mode=12;break;case 17:for(;R<14;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(h.nlen=257+(31&O),O>>>=5,R-=5,h.ndist=1+(31&O),O>>>=5,R-=5,h.ncode=4+(15&O),O>>>=4,R-=4,286<h.nlen||30<h.ndist){k.msg="too many length or distance symbols",h.mode=30;break}h.have=0,h.mode=18;case 18:for(;h.have<h.ncode;){for(;R<3;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.lens[H[h.have++]]=7&O,O>>>=3,R-=3}for(;h.have<19;)h.lens[H[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,B={bits:h.lenbits},V=d(0,h.lens,0,19,h.lencode,0,h.work,B),h.lenbits=B.bits,V){k.msg="invalid code lengths set",h.mode=30;break}h.have=0,h.mode=19;case 19:for(;h.have<h.nlen+h.ndist;){for(;oe=(_=h.lencode[O&(1<<h.lenbits)-1])>>>16&255,ve=65535&_,!((ne=_>>>24)<=R);){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(ve<16)O>>>=ne,R-=ne,h.lens[h.have++]=ve;else{if(ve===16){for(C=ne+2;R<C;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(O>>>=ne,R-=ne,h.have===0){k.msg="invalid bit length repeat",h.mode=30;break}p=h.lens[h.have-1],Y=3+(3&O),O>>>=2,R-=2}else if(ve===17){for(C=ne+3;R<C;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}R-=ne,p=0,Y=3+(7&(O>>>=ne)),O>>>=3,R-=3}else{for(C=ne+7;R<C;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}R-=ne,p=0,Y=11+(127&(O>>>=ne)),O>>>=7,R-=7}if(h.have+Y>h.nlen+h.ndist){k.msg="invalid bit length repeat",h.mode=30;break}for(;Y--;)h.lens[h.have++]=p}}if(h.mode===30)break;if(h.lens[256]===0){k.msg="invalid code -- missing end-of-block",h.mode=30;break}if(h.lenbits=9,B={bits:h.lenbits},V=d(u,h.lens,0,h.nlen,h.lencode,0,h.work,B),h.lenbits=B.bits,V){k.msg="invalid literal/lengths set",h.mode=30;break}if(h.distbits=6,h.distcode=h.distdyn,B={bits:h.distbits},V=d(f,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,B),h.distbits=B.bits,V){k.msg="invalid distances set",h.mode=30;break}if(h.mode=20,$===6)break e;case 20:h.mode=21;case 21:if(6<=W&&258<=U){k.next_out=re,k.avail_out=U,k.next_in=K,k.avail_in=W,h.hold=O,h.bits=R,l(k,X),re=k.next_out,Q=k.output,U=k.avail_out,K=k.next_in,D=k.input,W=k.avail_in,O=h.hold,R=h.bits,h.mode===12&&(h.back=-1);break}for(h.back=0;oe=(_=h.lencode[O&(1<<h.lenbits)-1])>>>16&255,ve=65535&_,!((ne=_>>>24)<=R);){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(oe&&!(240&oe)){for(pe=ne,Ae=oe,Te=ve;oe=(_=h.lencode[Te+((O&(1<<pe+Ae)-1)>>pe)])>>>16&255,ve=65535&_,!(pe+(ne=_>>>24)<=R);){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}O>>>=pe,R-=pe,h.back+=pe}if(O>>>=ne,R-=ne,h.back+=ne,h.length=ve,oe===0){h.mode=26;break}if(32&oe){h.back=-1,h.mode=12;break}if(64&oe){k.msg="invalid literal/length code",h.mode=30;break}h.extra=15&oe,h.mode=22;case 22:if(h.extra){for(C=h.extra;R<C;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.length+=O&(1<<h.extra)-1,O>>>=h.extra,R-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=23;case 23:for(;oe=(_=h.distcode[O&(1<<h.distbits)-1])>>>16&255,ve=65535&_,!((ne=_>>>24)<=R);){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(!(240&oe)){for(pe=ne,Ae=oe,Te=ve;oe=(_=h.distcode[Te+((O&(1<<pe+Ae)-1)>>pe)])>>>16&255,ve=65535&_,!(pe+(ne=_>>>24)<=R);){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}O>>>=pe,R-=pe,h.back+=pe}if(O>>>=ne,R-=ne,h.back+=ne,64&oe){k.msg="invalid distance code",h.mode=30;break}h.offset=ve,h.extra=15&oe,h.mode=24;case 24:if(h.extra){for(C=h.extra;R<C;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}h.offset+=O&(1<<h.extra)-1,O>>>=h.extra,R-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){k.msg="invalid distance too far back",h.mode=30;break}h.mode=25;case 25:if(U===0)break e;if(Y=X-U,h.offset>Y){if((Y=h.offset-Y)>h.whave&&h.sane){k.msg="invalid distance too far back",h.mode=30;break}me=Y>h.wnext?(Y-=h.wnext,h.wsize-Y):h.wnext-Y,Y>h.length&&(Y=h.length),ye=h.window}else ye=Q,me=re-h.offset,Y=h.length;for(U<Y&&(Y=U),U-=Y,h.length-=Y;Q[re++]=ye[me++],--Y;);h.length===0&&(h.mode=21);break;case 26:if(U===0)break e;Q[re++]=h.length,U--,h.mode=21;break;case 27:if(h.wrap){for(;R<32;){if(W===0)break e;W--,O|=D[K++]<<R,R+=8}if(X-=U,k.total_out+=X,h.total+=X,X&&(k.adler=h.check=h.flags?o(h.check,Q,X,re-X):a(h.check,Q,X,re-X)),X=U,(h.flags?O:y(O))!==h.check){k.msg="incorrect data check",h.mode=30;break}R=O=0}h.mode=28;case 28:if(h.wrap&&h.flags){for(;R<32;){if(W===0)break e;W--,O+=D[K++]<<R,R+=8}if(O!==(4294967295&h.total)){k.msg="incorrect length check",h.mode=30;break}R=O=0}h.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return m}return k.next_out=re,k.avail_out=U,k.next_in=K,k.avail_in=W,h.hold=O,h.bits=R,(h.wsize||X!==k.avail_out&&h.mode<30&&(h.mode<27||$!==4))&&z(k,k.output,k.next_out,X-k.avail_out)?(h.mode=31,-4):(te-=k.avail_in,X-=k.avail_out,k.total_in+=te,k.total_out+=X,h.total+=X,h.wrap&&X&&(k.adler=h.check=h.flags?o(h.check,Q,X,k.next_out-X):a(h.check,Q,X,k.next_out-X)),k.data_type=h.bits+(h.last?64:0)+(h.mode===12?128:0)+(h.mode===20||h.mode===15?256:0),(te==0&&X===0||$===4)&&V===v&&(V=-5),V)},n.inflateEnd=function(k){if(!k||!k.state)return m;var $=k.state;return $.window&&($.window=null),k.state=null,v},n.inflateGetHeader=function(k,$){var h;return k&&k.state&&2&(h=k.state).wrap?((h.head=$).done=!1,v):m},n.inflateSetDictionary=function(k,$){var h,D=$.length;return k&&k.state?(h=k.state).wrap!==0&&h.mode!==11?m:h.mode===11&&a(1,$,D,0)!==h.check?-3:z(k,$,D,D)?(h.mode=31,-4):(h.havedict=1,v):m},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,n){var i=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(u,f,v,m,g,b,x,y){var w,E,S,T,F,M,j,N,I,z=y.bits,k=0,$=0,h=0,D=0,Q=0,K=0,re=0,W=0,U=0,O=0,R=null,te=0,X=new i.Buf16(16),Y=new i.Buf16(16),me=null,ye=0;for(k=0;k<=15;k++)X[k]=0;for($=0;$<m;$++)X[f[v+$]]++;for(Q=z,D=15;1<=D&&X[D]===0;D--);if(D<Q&&(Q=D),D===0)return g[b++]=20971520,g[b++]=20971520,y.bits=1,0;for(h=1;h<D&&X[h]===0;h++);for(Q<h&&(Q=h),k=W=1;k<=15;k++)if(W<<=1,(W-=X[k])<0)return-1;if(0<W&&(u===0||D!==1))return-1;for(Y[1]=0,k=1;k<15;k++)Y[k+1]=Y[k]+X[k];for($=0;$<m;$++)f[v+$]!==0&&(x[Y[f[v+$]]++]=$);if(M=u===0?(R=me=x,19):u===1?(R=a,te-=257,me=o,ye-=257,256):(R=l,me=d,-1),k=h,F=b,re=$=O=0,S=-1,T=(U=1<<(K=Q))-1,u===1&&852<U||u===2&&592<U)return 1;for(;;){for(j=k-re,I=x[$]<M?(N=0,x[$]):x[$]>M?(N=me[ye+x[$]],R[te+x[$]]):(N=96,0),w=1<<k-re,h=E=1<<K;g[F+(O>>re)+(E-=w)]=j<<24|N<<16|I|0,E!==0;);for(w=1<<k-1;O&w;)w>>=1;if(w!==0?(O&=w-1,O+=w):O=0,$++,--X[k]==0){if(k===D)break;k=f[v+x[$]]}if(Q<k&&(O&T)!==S){for(re===0&&(re=Q),F+=h,W=1<<(K=k-re);K+re<D&&!((W-=X[K+re])<=0);)K++,W<<=1;if(U+=1<<K,u===1&&852<U||u===2&&592<U)return 1;g[S=O&T]=Q<<24|K<<16|F-b|0}}return O!==0&&(g[F+O]=k-re<<24|64<<16|0),y.bits=Q,0}},{"../utils/common":41}],51:[function(e,s,n){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,n){var i=e("../utils/common"),a=0,o=1;function l(_){for(var A=_.length;0<=--A;)_[A]=0}var d=0,u=29,f=256,v=f+1+u,m=30,g=19,b=2*v+1,x=15,y=16,w=7,E=256,S=16,T=17,F=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(v+2));l(z);var k=new Array(2*m);l(k);var $=new Array(512);l($);var h=new Array(256);l(h);var D=new Array(u);l(D);var Q,K,re,W=new Array(m);function U(_,A,H,Z,P){this.static_tree=_,this.extra_bits=A,this.extra_base=H,this.elems=Z,this.max_length=P,this.has_stree=_&&_.length}function O(_,A){this.dyn_tree=_,this.max_code=0,this.stat_desc=A}function R(_){return _<256?$[_]:$[256+(_>>>7)]}function te(_,A){_.pending_buf[_.pending++]=255&A,_.pending_buf[_.pending++]=A>>>8&255}function X(_,A,H){_.bi_valid>y-H?(_.bi_buf|=A<<_.bi_valid&65535,te(_,_.bi_buf),_.bi_buf=A>>y-_.bi_valid,_.bi_valid+=H-y):(_.bi_buf|=A<<_.bi_valid&65535,_.bi_valid+=H)}function Y(_,A,H){X(_,H[2*A],H[2*A+1])}function me(_,A){for(var H=0;H|=1&_,_>>>=1,H<<=1,0<--A;);return H>>>1}function ye(_,A,H){var Z,P,J=new Array(x+1),q=0;for(Z=1;Z<=x;Z++)J[Z]=q=q+H[Z-1]<<1;for(P=0;P<=A;P++){var G=_[2*P+1];G!==0&&(_[2*P]=me(J[G]++,G))}}function ne(_){var A;for(A=0;A<v;A++)_.dyn_ltree[2*A]=0;for(A=0;A<m;A++)_.dyn_dtree[2*A]=0;for(A=0;A<g;A++)_.bl_tree[2*A]=0;_.dyn_ltree[2*E]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function oe(_){8<_.bi_valid?te(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function ve(_,A,H,Z){var P=2*A,J=2*H;return _[P]<_[J]||_[P]===_[J]&&Z[A]<=Z[H]}function pe(_,A,H){for(var Z=_.heap[H],P=H<<1;P<=_.heap_len&&(P<_.heap_len&&ve(A,_.heap[P+1],_.heap[P],_.depth)&&P++,!ve(A,Z,_.heap[P],_.depth));)_.heap[H]=_.heap[P],H=P,P<<=1;_.heap[H]=Z}function Ae(_,A,H){var Z,P,J,q,G=0;if(_.last_lit!==0)for(;Z=_.pending_buf[_.d_buf+2*G]<<8|_.pending_buf[_.d_buf+2*G+1],P=_.pending_buf[_.l_buf+G],G++,Z===0?Y(_,P,A):(Y(_,(J=h[P])+f+1,A),(q=M[J])!==0&&X(_,P-=D[J],q),Y(_,J=R(--Z),H),(q=j[J])!==0&&X(_,Z-=W[J],q)),G<_.last_lit;);Y(_,E,A)}function Te(_,A){var H,Z,P,J=A.dyn_tree,q=A.stat_desc.static_tree,G=A.stat_desc.has_stree,ee=A.stat_desc.elems,ce=-1;for(_.heap_len=0,_.heap_max=b,H=0;H<ee;H++)J[2*H]!==0?(_.heap[++_.heap_len]=ce=H,_.depth[H]=0):J[2*H+1]=0;for(;_.heap_len<2;)J[2*(P=_.heap[++_.heap_len]=ce<2?++ce:0)]=1,_.depth[P]=0,_.opt_len--,G&&(_.static_len-=q[2*P+1]);for(A.max_code=ce,H=_.heap_len>>1;1<=H;H--)pe(_,J,H);for(P=ee;H=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pe(_,J,1),Z=_.heap[1],_.heap[--_.heap_max]=H,_.heap[--_.heap_max]=Z,J[2*P]=J[2*H]+J[2*Z],_.depth[P]=(_.depth[H]>=_.depth[Z]?_.depth[H]:_.depth[Z])+1,J[2*H+1]=J[2*Z+1]=P,_.heap[1]=P++,pe(_,J,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(ae,je){var rt,Pe,nt,ge,ft,Ft,Re=je.dyn_tree,$r=je.max_code,Sn=je.stat_desc.static_tree,Nn=je.stat_desc.has_stree,Tn=je.stat_desc.extra_bits,_r=je.stat_desc.extra_base,at=je.stat_desc.max_length,ht=0;for(ge=0;ge<=x;ge++)ae.bl_count[ge]=0;for(Re[2*ae.heap[ae.heap_max]+1]=0,rt=ae.heap_max+1;rt<b;rt++)at<(ge=Re[2*Re[2*(Pe=ae.heap[rt])+1]+1]+1)&&(ge=at,ht++),Re[2*Pe+1]=ge,$r<Pe||(ae.bl_count[ge]++,ft=0,_r<=Pe&&(ft=Tn[Pe-_r]),Ft=Re[2*Pe],ae.opt_len+=Ft*(ge+ft),Nn&&(ae.static_len+=Ft*(Sn[2*Pe+1]+ft)));if(ht!==0){do{for(ge=at-1;ae.bl_count[ge]===0;)ge--;ae.bl_count[ge]--,ae.bl_count[ge+1]+=2,ae.bl_count[at]--,ht-=2}while(0<ht);for(ge=at;ge!==0;ge--)for(Pe=ae.bl_count[ge];Pe!==0;)$r<(nt=ae.heap[--rt])||(Re[2*nt+1]!==ge&&(ae.opt_len+=(ge-Re[2*nt+1])*Re[2*nt],Re[2*nt+1]=ge),Pe--)}}(_,A),ye(J,ce,_.bl_count)}function p(_,A,H){var Z,P,J=-1,q=A[1],G=0,ee=7,ce=4;for(q===0&&(ee=138,ce=3),A[2*(H+1)+1]=65535,Z=0;Z<=H;Z++)P=q,q=A[2*(Z+1)+1],++G<ee&&P===q||(G<ce?_.bl_tree[2*P]+=G:P!==0?(P!==J&&_.bl_tree[2*P]++,_.bl_tree[2*S]++):G<=10?_.bl_tree[2*T]++:_.bl_tree[2*F]++,J=P,ce=(G=0)===q?(ee=138,3):P===q?(ee=6,3):(ee=7,4))}function V(_,A,H){var Z,P,J=-1,q=A[1],G=0,ee=7,ce=4;for(q===0&&(ee=138,ce=3),Z=0;Z<=H;Z++)if(P=q,q=A[2*(Z+1)+1],!(++G<ee&&P===q)){if(G<ce)for(;Y(_,P,_.bl_tree),--G!=0;);else P!==0?(P!==J&&(Y(_,P,_.bl_tree),G--),Y(_,S,_.bl_tree),X(_,G-3,2)):G<=10?(Y(_,T,_.bl_tree),X(_,G-3,3)):(Y(_,F,_.bl_tree),X(_,G-11,7));J=P,ce=(G=0)===q?(ee=138,3):P===q?(ee=6,3):(ee=7,4)}}l(W);var B=!1;function C(_,A,H,Z){X(_,(d<<1)+(Z?1:0),3),function(P,J,q,G){oe(P),te(P,q),te(P,~q),i.arraySet(P.pending_buf,P.window,J,q,P.pending),P.pending+=q}(_,A,H)}n._tr_init=function(_){B||(function(){var A,H,Z,P,J,q=new Array(x+1);for(P=Z=0;P<u-1;P++)for(D[P]=Z,A=0;A<1<<M[P];A++)h[Z++]=P;for(h[Z-1]=P,P=J=0;P<16;P++)for(W[P]=J,A=0;A<1<<j[P];A++)$[J++]=P;for(J>>=7;P<m;P++)for(W[P]=J<<7,A=0;A<1<<j[P]-7;A++)$[256+J++]=P;for(H=0;H<=x;H++)q[H]=0;for(A=0;A<=143;)z[2*A+1]=8,A++,q[8]++;for(;A<=255;)z[2*A+1]=9,A++,q[9]++;for(;A<=279;)z[2*A+1]=7,A++,q[7]++;for(;A<=287;)z[2*A+1]=8,A++,q[8]++;for(ye(z,v+1,q),A=0;A<m;A++)k[2*A+1]=5,k[2*A]=me(A,5);Q=new U(z,M,f+1,v,x),K=new U(k,j,0,m,x),re=new U(new Array(0),N,0,g,w)}(),B=!0),_.l_desc=new O(_.dyn_ltree,Q),_.d_desc=new O(_.dyn_dtree,K),_.bl_desc=new O(_.bl_tree,re),_.bi_buf=0,_.bi_valid=0,ne(_)},n._tr_stored_block=C,n._tr_flush_block=function(_,A,H,Z){var P,J,q=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(G){var ee,ce=4093624447;for(ee=0;ee<=31;ee++,ce>>>=1)if(1&ce&&G.dyn_ltree[2*ee]!==0)return a;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return o;for(ee=32;ee<f;ee++)if(G.dyn_ltree[2*ee]!==0)return o;return a}(_)),Te(_,_.l_desc),Te(_,_.d_desc),q=function(G){var ee;for(p(G,G.dyn_ltree,G.l_desc.max_code),p(G,G.dyn_dtree,G.d_desc.max_code),Te(G,G.bl_desc),ee=g-1;3<=ee&&G.bl_tree[2*I[ee]+1]===0;ee--);return G.opt_len+=3*(ee+1)+5+5+4,ee}(_),P=_.opt_len+3+7>>>3,(J=_.static_len+3+7>>>3)<=P&&(P=J)):P=J=H+5,H+4<=P&&A!==-1?C(_,A,H,Z):_.strategy===4||J===P?(X(_,2+(Z?1:0),3),Ae(_,z,k)):(X(_,4+(Z?1:0),3),function(G,ee,ce,ae){var je;for(X(G,ee-257,5),X(G,ce-1,5),X(G,ae-4,4),je=0;je<ae;je++)X(G,G.bl_tree[2*I[je]+1],3);V(G,G.dyn_ltree,ee-1),V(G,G.dyn_dtree,ce-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,q+1),Ae(_,_.dyn_ltree,_.dyn_dtree)),ne(_),Z&&oe(_)},n._tr_tally=function(_,A,H){return _.pending_buf[_.d_buf+2*_.last_lit]=A>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&A,_.pending_buf[_.l_buf+_.last_lit]=255&H,_.last_lit++,A===0?_.dyn_ltree[2*H]++:(_.matches++,A--,_.dyn_ltree[2*(h[H]+f+1)]++,_.dyn_dtree[2*R(A)]++),_.last_lit===_.lit_bufsize-1},n._tr_align=function(_){X(_,2,3),Y(_,E,z),function(A){A.bi_valid===16?(te(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(e,s,n){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,n){(function(i){(function(a,o){if(!a.setImmediate){var l,d,u,f,v=1,m={},g=!1,b=a.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(a);x=x&&x.setTimeout?x:a,l={}.toString.call(a.process)==="[object process]"?function(S){process.nextTick(function(){w(S)})}:function(){if(a.postMessage&&!a.importScripts){var S=!0,T=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=T,S}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function(S){a.postMessage(f+S,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(S){w(S.data)},function(S){u.port2.postMessage(S)}):b&&"onreadystatechange"in b.createElement("script")?(d=b.documentElement,function(S){var T=b.createElement("script");T.onreadystatechange=function(){w(S),T.onreadystatechange=null,d.removeChild(T),T=null},d.appendChild(T)}):function(S){setTimeout(w,0,S)},x.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var T=new Array(arguments.length-1),F=0;F<T.length;F++)T[F]=arguments[F+1];var M={callback:S,args:T};return m[v]=M,l(v),v++},x.clearImmediate=y}function y(S){delete m[S]}function w(S){if(g)setTimeout(w,0,S);else{var T=m[S];if(T){g=!0;try{(function(F){var M=F.callback,j=F.args;switch(j.length){case 0:M();break;case 1:M(j[0]);break;case 2:M(j[0],j[1]);break;case 3:M(j[0],j[1],j[2]);break;default:M.apply(o,j)}})(T)}finally{y(S),g=!1}}}}function E(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(f)===0&&w(+S.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kr);var Un=Kr.exports;const Sr=Ln(Un),Vn="PenAndPaperDB",Hn=1,it="audio",st="images",ze="data";class fe{static async openDB(){return new Promise((r,e)=>{const s=indexedDB.open(Vn,Hn);s.onerror=n=>{e(new Error("Failed to open IndexedDB"))},s.onsuccess=n=>{r(s.result)},s.onupgradeneeded=n=>{const i=s.result;i.objectStoreNames.contains(it)||i.createObjectStore(it,{keyPath:"name"}),i.objectStoreNames.contains(st)||i.createObjectStore(st,{keyPath:"name"}),i.objectStoreNames.contains(ze)||i.createObjectStore(ze,{keyPath:"name"})}})}static async processZipFile(r){try{const s=await new Sr().loadAsync(r,{createFolders:!0,checkCRC32:!1}),n=[],i=[],a=[],o=async(d,u,f)=>{const v=s.folder(d);if(!v){console.warn(`Folder '${d}' not found in the zip file.`);return}const m=Object.keys(v.files).filter(b=>!v.files[b].dir&&b.startsWith(`${d}/`)),g=5;for(let b=0;b<m.length;b+=g){const x=m.slice(b,b+g);await Promise.all(x.map(async y=>{const w=y.split("/").pop()||"";if(w)try{const E=await v.files[y].async("base64"),S=this.getMimeType(w);f.push({name:w,data:E,type:S,lastModified:Date.now()})}catch(E){console.error(`Error processing file ${w}:`,E)}})),await new Promise(y=>setTimeout(y,10))}};if(await o("audio","audio",n),await o("images","images",i),await o("data","data",a),n.length===0&&i.length===0&&a.length===0)return{success:!1,message:"The zip file does not contain any recognized files in the required folders (audio, images, data)."};const l=await this.openDB();return n.length>0&&await this.storeAssetsInBatches(l,it,n),i.length>0&&await this.storeAssetsInBatches(l,st,i),a.length>0&&await this.storeAssetsInBatches(l,ze,a),l.close(),{success:!0,message:`Successfully imported ${n.length} audio files, ${i.length} image files, and ${a.length} data files.`}}catch(e){return console.error("Error processing zip file:",e),{success:!1,message:`Error processing zip file: ${e instanceof Error?e.message:String(e)}`}}}static async storeAssetsInBatches(r,e,s){await this.clearStore(r,e);const n=10;for(let i=0;i<s.length;i+=n){const a=s.slice(i,i+n);await new Promise((o,l)=>{const d=r.transaction(e,"readwrite"),u=d.objectStore(e);d.oncomplete=()=>o(),d.onerror=f=>l(new Error("Transaction failed")),a.forEach(f=>{u.add(f)})}),await new Promise(o=>setTimeout(o,10))}}static async storeAssets(r,e,s){return new Promise((n,i)=>{const a=r.transaction(e,"readwrite"),o=a.objectStore(e);a.oncomplete=()=>n(),a.onerror=d=>i(new Error("Transaction failed"));const l=o.clear();l.onsuccess=()=>{s.forEach(d=>{o.add(d)})}})}static async getAssets(r){try{const e=await this.openDB(),s=this.getStoreName(r);return new Promise((n,i)=>{const l=e.transaction(s,"readonly").objectStore(s).getAll();l.onsuccess=()=>{e.close(),n(l.result||[])},l.onerror=()=>{e.close(),i(new Error(`Failed to get assets from ${s}`))}})}catch(e){return console.error("Error getting assets:",e),[]}}static async hasAssets(r){try{return(await this.getAssets(r)).length>0}catch(e){return console.error("Error checking for assets:",e),!1}}static async getAssetByName(r,e){if(!e)return null;try{const s=await this.openDB(),n=this.getStoreName(r);return new Promise((i,a)=>{const d=s.transaction(n,"readonly").objectStore(n).get(e);d.onsuccess=()=>{s.close(),i(d.result||null)},d.onerror=u=>{console.error(`[AssetManager DEBUG] IndexedDB GET request failed for type=${r}, name=${e}`,u),s.close(),i(null)}})}catch(s){return console.error(`[AssetManager DEBUG] Error opening DB in getAssetByName for ${e}:`,s),null}}static async clearAllAssets(){try{const r=await this.openDB();await Promise.all([this.clearStore(r,it),this.clearStore(r,st),this.clearStore(r,ze)]),r.close()}catch(r){console.error("Error clearing assets:",r)}}static clearStore(r,e){return new Promise((s,n)=>{const o=r.transaction(e,"readwrite").objectStore(e).clear();o.onsuccess=()=>s(),o.onerror=()=>n(new Error(`Failed to clear ${e}`))})}static getStoreName(r){switch(r){case"audio":return it;case"images":return st;case"data":return ze}}static getMimeType(r){var s;switch(((s=r.split(".").pop())==null?void 0:s.toLowerCase())||""){case"mp3":return"audio/mpeg";case"wav":return"audio/wav";case"ogg":return"audio/ogg";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"svg":return"image/svg+xml";case"json":return"application/json";case"txt":return"text/plain";case"pdf":return"application/pdf";default:return"application/octet-stream"}}static async getAssetUrl(r,e){if(!e)return"";try{const s=e.toLowerCase().endsWith(".pdf"),n=await this.getAssetByName(r,e);if(n){if(s)try{const i=n.data.split(";base64,");let a=n.type,o=n.data;i.length===2?(a=i[0].split(":")[1],o=i[1]):o=n.data;const l=atob(o),d=new Uint8Array(l.length);for(let f=0;f<l.length;f++)d[f]=l.charCodeAt(f);const u=new Blob([d],{type:a});return URL.createObjectURL(u)}catch(i){console.error("Error creating blob URL for PDF:",i)}return`data:${n.type};base64,${n.data}`}if(s){const i=e.startsWith("/")?e:`/${e}`;return window.location.origin+i}return""}catch(s){return console.error(`Error getting asset URL for ${e}:`,s),""}}static encodeUnicode(r){return window.btoa(unescape(encodeURIComponent(r)))}static decodeUnicode(r){try{return decodeURIComponent(escape(window.atob(r)))}catch{console.warn("Failed to decode with Unicode method, trying direct decode");try{return window.atob(r)}catch{return console.warn("Direct decode failed too, returning as-is"),r}}}static async saveDataObject(r,e){try{const s=JSON.stringify(e,null,2),n={name:r,data:s,type:"application/json",lastModified:Date.now()},i=await this.openDB(),a=ze;return new Promise((o,l)=>{const d=i.transaction(a,"readwrite"),u=d.objectStore(a);d.oncomplete=()=>{i.close(),o({success:!0,message:`Successfully saved ${r} data.`})},d.onerror=f=>{i.close(),l(new Error(`Failed to save data ${r}`))},u.put(n)})}catch(s){return console.error(`Error saving data object ${r}:`,s),{success:!1,message:`Error saving data: ${s instanceof Error?s.message:String(s)}`}}}static async getDataObject(r){if(!r)return null;try{const e=await this.getAssetByName("data",r);if(!e)return null;try{if(typeof e.data=="string"&&(e.data.startsWith("{")||e.data.startsWith("[")))return JSON.parse(e.data);const s=this.decodeUnicode(e.data);return JSON.parse(s)}catch(s){console.warn(`JSON parse failed for ${r}:`,s);try{const n=window.atob(e.data);return JSON.parse(n)}catch{return console.error(`All parsing methods failed for ${r}`),null}}}catch(e){return console.error(`Error getting data object ${r}:`,e),null}}static async exportToZip(){try{const r=new Sr,e=r.folder("audio"),s=r.folder("images"),n=r.folder("data");if(!e||!s||!n)throw new Error("Failed to create folders in the zip file");const i=await this.getAssets("audio"),a=await this.getAssets("images"),o=await this.getAssets("data");for(const u of i)e.file(u.name,u.data,{base64:!0});for(const u of a)s.file(u.name,u.data,{base64:!0});for(const u of o)u.type==="application/json"&&typeof u.data=="string"&&(u.data.startsWith("{")||u.data.startsWith("["))?n.file(u.name,u.data):n.file(u.name,u.data,{base64:!0});const l=await r.generateAsync({type:"blob"}),d=URL.createObjectURL(l);return{success:!0,message:`Successfully exported ${i.length} audio files, ${a.length} image files, and ${o.length} data files.`,zipBlob:l,url:d}}catch(r){return console.error("Error exporting assets to zip:",r),{success:!1,message:`Error exporting assets: ${r instanceof Error?r.message:String(r)}`}}}static async addAsset(r,e){try{if(r==="data"&&e.name.endsWith(".json"))return this.addJsonAsset(e);const s=new FileReader,i=await new Promise((u,f)=>{s.onload=()=>{const v=s.result.split(",")[1];u(v)},s.onerror=()=>f(new Error("Failed to read file")),s.readAsDataURL(e)}),a=this.getMimeType(e.name),o={name:e.name,data:i,type:a,lastModified:Date.now()},l=await this.openDB(),d=this.getStoreName(r);return new Promise((u,f)=>{const v=l.transaction(d,"readwrite"),m=v.objectStore(d);v.oncomplete=()=>{l.close(),u({success:!0,message:`Successfully added ${e.name} to ${r} assets.`})},v.onerror=g=>{l.close(),f(new Error(`Failed to add asset ${e.name} to ${d}`))},m.put(o)})}catch(s){return console.error(`Error adding asset ${e.name}:`,s),{success:!1,message:`Error adding asset: ${s instanceof Error?s.message:String(s)}`}}}static async addJsonAsset(r){try{const e=new FileReader,n=await new Promise((l,d)=>{e.onload=()=>{l(e.result)},e.onerror=()=>d(new Error("Failed to read JSON file")),e.readAsText(r)});try{JSON.parse(n)}catch{return{success:!1,message:`The file ${r.name} contains invalid JSON.`}}const i={name:r.name,data:n,type:"application/json",lastModified:Date.now()},a=await this.openDB(),o=ze;return new Promise((l,d)=>{const u=a.transaction(o,"readwrite"),f=u.objectStore(o);u.oncomplete=()=>{a.close(),l({success:!0,message:`Successfully added ${r.name} to data assets.`})},u.onerror=v=>{a.close(),d(new Error(`Failed to add JSON asset ${r.name}`))},f.put(i)})}catch(e){return console.error(`Error adding JSON asset ${r.name}:`,e),{success:!1,message:`Error adding JSON asset: ${e instanceof Error?e.message:String(e)}`}}}static async deleteAsset(r,e){try{const s=await this.openDB(),n=this.getStoreName(r);return new Promise((i,a)=>{const o=s.transaction(n,"readwrite"),l=o.objectStore(n);o.oncomplete=()=>{s.close(),i({success:!0,message:`Successfully deleted ${e} from ${r} assets.`})},o.onerror=d=>{s.close(),a(new Error(`Failed to delete asset ${e} from ${n}`))},l.delete(e)})}catch(s){return console.error(`Error deleting asset ${e}:`,s),{success:!1,message:`Error deleting asset: ${s instanceof Error?s.message:String(s)}`}}}static async loadExampleData(){try{const r=[],e=await this.openDB(),s=e.transaction(ze,"readwrite").objectStore(ze),n=JSON.stringify(r,null,2);return s.add({name:"locations.json",data:n,type:"application/json",lastModified:Date.now()}),e.close(),{success:!0,message:"Created empty locations data. You can now start adding your own locations."}}catch(r){return console.error("Error creating example data:",r),{success:!1,message:`Error creating example data: ${r instanceof Error?r.message:String(r)}`}}}static base64ToBlob(r,e){const s=atob(r),n=new Array(s.length);for(let a=0;a<s.length;a++)n[a]=s.charCodeAt(a);const i=new Uint8Array(n);return new Blob([i],{type:e})}}const Kn=(t,r)=>({locations:[],isLoading:!1,error:null,addLocation:e=>{const s={id:Ht(),...e};t(n=>({locations:[...n.locations,s]}))},updateLocation:(e,s)=>{t(n=>({locations:n.locations.map(i=>i.id===e?{...i,...s}:i)}))},deleteLocation:e=>{const s=a=>{const o=r().locations.filter(u=>u.parentLocationId===a),l=o.map(u=>u.id),d=o.flatMap(u=>s(u.id));return[...l,...d]},n=s(e),i=[e,...n];t(a=>({locations:a.locations.filter(o=>!i.includes(o.id))}))},getAllTopLevelLocations:()=>r().locations.filter(e=>!e.parentLocationId),getSublocationsByParentId:e=>r().locations.filter(s=>s.parentLocationId===e),fetchLocations:async()=>{try{t({isLoading:!0,error:null});const e=await fe.getDataObject("locations.json");t({locations:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch locations: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}}}),Zn=(t,r)=>({characters:[],isLoading:!1,error:null,addCharacter:e=>{const s={id:Ht(),...e};t(n=>({characters:[...n.characters,s]}))},updateCharacter:(e,s)=>{t(n=>({characters:n.characters.map(i=>i.id===e?{...i,...s}:i)}))},deleteCharacter:e=>{t(s=>({characters:s.characters.filter(n=>n.id!==e)}))},addItemToCharacter:(e,s)=>{const n={id:Ht(),...s};t(i=>({characters:i.characters.map(a=>a.id!==e?a:{...a,inventory:[...a.inventory||[],n]})}))},updateCharacterItem:(e,s,n)=>{t(i=>({characters:i.characters.map(a=>a.id!==e||!a.inventory?a:{...a,inventory:a.inventory.map(o=>o.id===s?{...o,...n}:o)})}))},deleteCharacterItem:(e,s)=>{t(n=>({characters:n.characters.map(i=>i.id!==e||!i.inventory?i:{...i,inventory:i.inventory.filter(a=>a.id!==s)})}))},fetchCharacters:async()=>{try{t({isLoading:!0,error:null});const e=await fe.getDataObject("characters.json");t({characters:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch characters: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}}}),Jn=(t,r)=>({audioAssets:[],imageAssets:[],dataAssets:[],hasAssets:!1,isLoading:!1,refreshAssets:async()=>{try{t({isLoading:!0});const e=await fe.hasAssets("audio"),s=await fe.hasAssets("images"),n=await fe.hasAssets("data"),i=e||s||n,a=await fe.getAssets("audio"),o=await fe.getAssets("images"),l=await fe.getAssets("data");t({hasAssets:i,audioAssets:a.map(d=>d.name),imageAssets:o.map(d=>d.name),dataAssets:l.map(d=>d.name),isLoading:!1})}catch(e){console.error("Error refreshing assets:",e),t({isLoading:!1})}},saveDataToIndexedDB:async()=>{try{t({isLoading:!0});const e={success:!0,message:"Data saved successfully"};return await r().refreshAssets(),t({isLoading:!1}),e}catch(e){return console.error("Error saving data:",e),t({isLoading:!1}),{success:!1,message:`Error saving data: ${e instanceof Error?e.message:String(e)}`}}},exportToZip:async()=>{try{t({isLoading:!0});const e=await fe.exportToZip();return t({isLoading:!1}),e}catch(e){return console.error("Error exporting to ZIP:",e),t({isLoading:!1}),{success:!1,message:`Error exporting data: ${e instanceof Error?e.message:String(e)}`}}}});function Zt(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}const Gn=(t,r)=>({combats:[],activeCombatId:null,initiativeOrder:[],currentRound:1,currentTurnIndex:0,isLoading:!1,error:null,fetchCombats:async()=>{try{t({isLoading:!0,error:null});const e=await fe.getDataObject("combats.json");t({combats:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch combats: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}},addCombat:async e=>{try{t({isLoading:!0,error:null});const s={...e,id:Zt(),status:e.status||"planned",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n=[...r().combats,s];return await fe.saveDataObject("combats.json",n),t({combats:n,isLoading:!1}),s}catch(s){throw t({error:`Failed to add combat: ${s instanceof Error?s.message:String(s)}`,isLoading:!1}),s}},updateCombat:async(e,s)=>{try{t({isLoading:!0,error:null});const n=r().combats,i=n.findIndex(l=>l.id===e);if(i===-1)return t({error:`Combat with ID ${e} not found`,isLoading:!1}),null;const a={...n[i],...s,updatedAt:new Date().toISOString()},o=[...n.slice(0,i),a,...n.slice(i+1)];return await fe.saveDataObject("combats.json",o),t({combats:o,isLoading:!1}),a}catch(n){throw t({error:`Failed to update combat: ${n instanceof Error?n.message:String(n)}`,isLoading:!1}),n}},deleteCombat:async e=>{try{t({isLoading:!0,error:null});const s=r().combats.filter(n=>n.id!==e);return await fe.saveDataObject("combats.json",s),t({combats:s,isLoading:!1}),!0}catch(s){return t({error:`Failed to delete combat: ${s instanceof Error?s.message:String(s)}`,isLoading:!1}),!1}},startCombatSession:async e=>{try{return r().combats.find(n=>n.id===e)?(await r().updateCombat(e,{status:"active",round:1,turn:0}),t({activeCombatId:e,currentRound:1,currentTurnIndex:0,initiativeOrder:[]}),!0):(t({error:`Combat with ID ${e} not found`}),!1)}catch(s){return t({error:`Failed to start combat session: ${s instanceof Error?s.message:String(s)}`}),!1}},endCombatSession:()=>{const{activeCombatId:e,updateCombat:s}=r();e&&s(e,{status:"completed"}).catch(n=>{console.error("Failed to update combat status:",n)}),t({activeCombatId:null,initiativeOrder:[],currentRound:1,currentTurnIndex:0})},setupInitiative:e=>{const s=[...e].sort((n,i)=>i.initiative-n.initiative);t({initiativeOrder:s,currentTurnIndex:0})},nextTurn:()=>{const{initiativeOrder:e,currentTurnIndex:s}=r();if(e.length===0)return;const n=(s+1)%e.length;n===0&&r().nextRound(),t({currentTurnIndex:n})},nextRound:()=>{t(e=>({currentRound:e.currentRound+1}))},updateInitiativeEntry:(e,s)=>{const{initiativeOrder:n}=r(),i=n.map(a=>a.entityId===e?{...a,...s}:a);t({initiativeOrder:i})},addRewards:async(e,s)=>{try{const n=r().combats.find(l=>l.id===e);if(!n)return t({error:`Combat with ID ${e} not found`}),null;const i=n.rewards||[],a=s.map(l=>({...l,description:l.description||""})),o=[...i,...a];return await r().updateCombat(e,{rewards:o})}catch(n){return t({error:`Failed to add rewards: ${n instanceof Error?n.message:String(n)}`}),null}}}),Yn=(t,r)=>({audioTracks:[],activeTracks:[],volume:.7,isPlaying:!1,initializedCombatAudio:{},addAudioTrack:e=>{if(r().audioTracks.find(i=>i.url===e.url))return;const n={...e,id:Zt(),howl:new jr.Howl({src:[e.url],html5:!0})};t(i=>({audioTracks:[...i.audioTracks,n]}))},playTrack:async(e,s={})=>{const{replace:n=!0,locationId:i="global",loop:a=!1}=s;console.log(`audioSlice.playTrack: Called with url=${e}, replace=${n}, locationId=${i}, loop=${a}`);let o=e;if(e.includes("/")&&(o=e.split("/").pop()||""),!o){console.error("audioSlice.playTrack: Invalid URL, could not extract asset name:",e);return}const l=r().activeTracks,d=l.find(v=>v.name===o&&v.locationId===i);if(d){console.log(`audioSlice.playTrack: Track ${o} already playing at ${i}. Ensuring unmuted.`),d.isMuted&&(d.howl.mute(!1),t(v=>({activeTracks:v.activeTracks.map(m=>m.id===d.id?{...m,isMuted:!1}:m)})));return}let u=[],f=[...l];n&&i!=="global"&&(console.log(`audioSlice.playTrack: Replace=true. Checking for tracks with locationId=${i} to stop.`),u=l.filter(v=>v.locationId===i),u.length>0&&(console.log(`audioSlice.playTrack: Found ${u.length} tracks to stop.`),f=l.filter(v=>v.locationId!==i))),u.length>0&&(u.forEach(v=>{console.log(`audioSlice.playTrack: Stopping track ${v.name} (id: ${v.id})`),v.howl.stop()}),t({activeTracks:f}));try{console.log(`audioSlice.playTrack: Attempting to get asset URL for name: ${o}`);const v=await fe.getAssetUrl("audio",o);if(!v){console.error(`audioSlice.playTrack: AssetManager failed to find URL for: ${o}`);return}console.log(`audioSlice.playTrack: Creating and playing new Howl for ${o} at ${i}`);const m=new jr.Howl({src:[v],loop:a,volume:r().volume,html5:!0}),g={id:Zt(),howl:m,name:o,volume:r().volume,isMuted:!1,locationId:i,loop:a};t(b=>({activeTracks:[...b.activeTracks,g],isPlaying:!0})),m.play()}catch(v){console.error(`audioSlice.playTrack: Error during Howl creation/play for ${o}:`,v)}},stopAllTracks:()=>{console.log("audioSlice.stopAllTracks: Stopping all tracks"),r().activeTracks.forEach(s=>{s.howl.stop()}),t({activeTracks:[],isPlaying:!1})},stopTrack:e=>{const s=r().activeTracks,n=s.find(a=>a.id===e);if(!n){console.log(`audioSlice.stopTrack: Track ${e} not found.`);return}console.log(`audioSlice.stopTrack: Stopping track ${n.name} (id: ${e})`),n.howl.stop();const i=s.filter(a=>a.id!==e);t({activeTracks:i,isPlaying:i.length>0})},stopTracksByLocationPrefix:e=>{if(!e)return;console.log(`audioSlice.stopTracksByLocationPrefix: Stopping tracks with prefix: ${e}`);const s=r().activeTracks,n=s.filter(a=>a.locationId&&a.locationId.startsWith(e)),i=s.filter(a=>!a.locationId||!a.locationId.startsWith(e));n.length>0?(n.forEach(a=>{console.log(`Stopping track ${a.name} (locId: ${a.locationId})`),a.howl.stop()}),t({activeTracks:i,isPlaying:i.length>0})):console.log(`No tracks found with prefix: ${e}`)},setVolume:e=>{const s=Math.max(0,Math.min(1,e));console.log(`audioSlice.setVolume: Setting master volume to ${s}`),r().activeTracks.forEach(n=>{n.isMuted||n.howl.volume(s)}),t({volume:s})},toggleMuteTrack:e=>{const s=r().activeTracks.find(i=>i.id===e);if(!s)return;const n=!s.isMuted;console.log(`audioSlice.toggleMuteTrack: Toggling mute for ${s.name} to ${n}`),s.howl.mute(n),t(i=>({activeTracks:i.activeTracks.map(a=>a.id===e?{...a,isMuted:n}:a)}))},setTrackVolume:(e,s)=>{const n=r().activeTracks.find(a=>a.id===e);if(!n)return;const i=Math.max(0,Math.min(1,s));console.log(`audioSlice.setTrackVolume: Setting volume for ${n.name} to ${i}`),n.isMuted||n.howl.volume(i),t(a=>({activeTracks:a.activeTracks.map(o=>o.id===e?{...o,volume:i}:o)}))},markCombatAudioInitialized:e=>{console.log(`audioSlice.markCombatAudioInitialized: Marking combat ${e} as initialized`),t(s=>({initializedCombatAudio:{...s.initializedCombatAudio,[e]:!0}}))},isCombatAudioInitialized:e=>!!r().initializedCombatAudio[e],resetCombatAudioInitialized:e=>{console.log(`audioSlice.resetCombatAudioInitialized: Resetting combat ${e} initialization status`),t(s=>{const{[e]:n,...i}=s.initializedCombatAudio;return{initializedCombatAudio:i}})}}),Xn=(t,r)=>({mapConfig:{worldWidth:1920,worldHeight:1080},selectedLocationId:null,currentLocation:void 0,isLoading:!1,error:null,setSelectedLocationId:e=>{t({selectedLocationId:e})},setCurrentLocationById:e=>{const s=r().locations,n=s==null?void 0:s.find(i=>i.id===e);t({currentLocation:n})},updateMapConfig:e=>{t(s=>({mapConfig:{...s.mapConfig,...e}}))}}),et=Rn()((t,r,e)=>({...Kn(t,r),...Zn(t),...Jn(t,r),...Gn(t,r),...Xn(t,r),...Yn(t,r),initializeStore:async()=>{try{t({isLoading:!0}),await r().refreshAssets(),await Promise.all([r().fetchLocations(),r().fetchCharacters(),r().fetchCombats()]),t({isLoading:!1})}catch(s){console.error("Error initializing store:",s),t({isLoading:!1})}}})),qn=()=>{const[t,r]=L.useState(!1),e=An(),[s,n]=L.useState(window.innerWidth<768),[i,a]=L.useState(!1),{saveDataToIndexedDB:o,exportToZip:l}=et();L.useEffect(()=>{const g=()=>{n(window.innerWidth<768)},b=()=>{a(window.scrollY>10)};return window.addEventListener("resize",g),window.addEventListener("scroll",b),()=>{window.removeEventListener("resize",g),window.removeEventListener("scroll",b)}},[]);const d=async()=>{try{const g=await o();alert(g.message)}catch(g){alert(`Error saving data: ${g instanceof Error?g.message:String(g)}`)}},u=async()=>{try{const g=await l();if(g.success&&g.url){const b=document.createElement("a");b.href=g.url,b.download="campaign-data.zip",document.body.appendChild(b),b.click(),document.body.removeChild(b)}else alert(g.message)}catch(g){alert(`Error exporting data: ${g instanceof Error?g.message:String(g)}`)}},f=()=>{r(!t)},v=g=>e.pathname===g,m=[{path:"/",label:"Dashboard",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{path:"/map",label:"Map View",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{path:"/locations",label:"Locations",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})},{path:"/characters",label:"Characters",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{path:"/combats",label:"Combats",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}];return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-40 
        transition-all duration-300 ease-in-out
        ${i?"bg-slate-900/90 backdrop-blur-lg":"bg-transparent"} 
        border-b ${i?"border-slate-700/30":"border-transparent"}
      `,children:c.jsxs("div",{className:"container max-w-full mx-auto px-4 flex items-center justify-between h-16",children:[s&&c.jsx("button",{className:"text-slate-50 p-2 rounded-lg hover:bg-white/5 active:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all","aria-label":"menu",onClick:f,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsx("h1",{className:"text-xl font-bold font-[var(--font-display)] tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-indigo-500 to-indigo-600 mr-2",children:"Campaign Organizer"}),!s&&c.jsx("nav",{className:"flex items-center space-x-2 mx-6 flex-1 justify-center",children:m.map(g=>c.jsxs(Er,{to:g.path,className:`
                    px-4 py-2 rounded-[var(--radius-md)] transition-all duration-200 flex items-center space-x-2.5 overflow-hidden
                    ${v(g.path)?"text-white font-medium bg-white/10 backdrop-blur-sm shadow-sm border border-white/5":"text-slate-300 hover:text-indigo-400 hover:bg-white/5"}
                  `,children:[v(g.path)&&c.jsx("div",{className:"absolute inset-0 opacity-20",children:c.jsx("div",{className:"absolute inset-x-0 -top-6 h-10 bg-gradient-to-r from-indigo-500/20 via-indigo-600/40 to-indigo-700/20 blur-md"})}),c.jsx("span",{className:"relative z-10",children:g.icon}),c.jsx("span",{className:"relative z-10",children:g.label})]},g.path))}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{className:"p-2 rounded-[var(--radius-md)] hover:bg-white/5 active:bg-white/10 text-slate-300 hover:text-indigo-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all",onClick:d,title:"Save Campaign",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),c.jsx("button",{className:"p-2 rounded-[var(--radius-md)] hover:bg-white/5 active:bg-white/10 text-slate-300 hover:text-indigo-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all",onClick:u,title:"Export Campaign",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]})}),c.jsxs("div",{className:`
          fixed inset-0 z-50 overflow-hidden pointer-events-none
          transition-all duration-300 ease-in-out
          ${!t&&"opacity-0"}
        `,children:[c.jsx("div",{className:`
            absolute inset-0 bg-slate-950/70 backdrop-blur-md 
            transition-opacity duration-300 
            ${t?"opacity-100 pointer-events-auto":"opacity-0"}
          `,onClick:f}),c.jsx("div",{className:`
            absolute inset-y-0 left-0 max-w-xs w-full bg-slate-900/90 backdrop-blur-xl
            shadow-2xl border-r border-white/5 pointer-events-auto
            transition-transform duration-300 ease-out
            ${t?"translate-x-0":"-translate-x-full"}
          `,children:c.jsxs("nav",{className:"h-full flex flex-col py-5 overflow-y-auto",children:[c.jsxs("div",{className:"px-5 mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-indigo-500 to-indigo-600 font-[var(--font-display)]",children:"Campaign Organizer"}),c.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 active:bg-white/10 text-slate-400 hover:text-white transition-colors",onClick:f,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"mt-2 px-3 space-y-1.5",children:m.map(g=>c.jsxs(Er,{to:g.path,onClick:f,className:`
                    flex items-center space-x-3 px-4 py-3 rounded-[var(--radius-md)] 
                    transition-all duration-200
                    ${v(g.path)?"bg-indigo-500/20 text-white font-medium":"hover:bg-white/5 text-slate-300 hover:text-white"}
                  `,children:[c.jsx("span",{className:"text-indigo-400",children:g.icon}),c.jsx("span",{children:g.label})]},g.path))}),c.jsxs("div",{className:"mt-auto px-3 pt-5 border-t border-slate-800/50",children:[c.jsx("div",{className:"flex items-center space-x-2 px-3 py-2",children:c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 w-full rounded-[var(--radius-md)] bg-white/5 hover:bg-white/10 text-slate-300 transition-colors",onClick:()=>{f(),d()},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),c.jsx("span",{children:"Save Campaign"})]})}),c.jsx("div",{className:"flex items-center space-x-2 px-3 py-2",children:c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 w-full rounded-[var(--radius-md)] bg-white/5 hover:bg-white/10 text-slate-300 transition-colors",onClick:()=>{f(),u()},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{children:"Export Data"})]})})]})]})})]})]})},le=({children:t,className:r="",size:e=24,color:s,sx:n={}})=>{const i={};n.fontSize&&(i.fontSize=n.fontSize),n.filter&&(i.filter=n.filter),n.transform&&(i.transform=n.transform);let a="";return s==="primary"?a="text-blue-500":s==="secondary"?a="text-purple-500":s==="error"&&(a="text-red-500"),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`inline-block ${a} ${r}`,style:i,children:t})},Rs=t=>c.jsxs(le,{...t,children:[c.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),c.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),zs=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),c.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Os=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Ms=t=>c.jsxs(le,{...t,children:[c.jsx("circle",{cx:"5",cy:"6",r:"3"}),c.jsx("path",{d:"M9 6h5l3 5.063V16h-2"}),c.jsx("path",{d:"M8 16l-2-6.063L12 7"}),c.jsx("path",{d:"M18 19c0 1.105-3.134 2-7 2s-7-.895-7-2"}),c.jsx("path",{d:"M10 12l2 7"})]}),or=t=>c.jsxs(le,{...t,children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Fs=t=>c.jsx(le,{...t,children:c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Qn=t=>c.jsx(le,{...t,children:c.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Zr=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M3 6h18"}),c.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),c.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),lr=t=>c.jsxs(le,{...t,children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ea=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ta=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),gt=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),Bs=t=>c.jsxs(le,{...t,children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Ws=t=>c.jsxs(le,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),c.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),ra=t=>c.jsxs(le,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),c.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Us=t=>c.jsxs(le,{...t,children:[c.jsx("path",{d:"M9 18V5l12-2v13"}),c.jsx("circle",{cx:"6",cy:"18",r:"3"}),c.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),na=t=>c.jsx(le,{...t,children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),aa=t=>c.jsxs(le,{...t,children:[c.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),c.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),Vs=t=>c.jsxs(le,{...t,children:[c.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),c.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),c.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),Nr=t=>c.jsx(le,{...t,children:c.jsx("polyline",{points:"6 9 12 15 18 9"})}),Hs=t=>c.jsx(le,{...t,children:c.jsx("polyline",{points:"18 15 12 9 6 15"})}),ia=t=>c.jsxs(le,{...t,children:[c.jsx("polyline",{points:"16 16 12 12 8 16"}),c.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),c.jsx("path",{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"}),c.jsx("polyline",{points:"16 16 12 12 8 16"})]}),Ks=t=>c.jsxs(le,{...t,children:[c.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),c.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Zs=t=>c.jsxs(le,{...t,children:[c.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),c.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Js=t=>c.jsxs(le,{...t,children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Gs=t=>c.jsxs(le,{...t,children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"})]}),Ys=t=>c.jsxs(le,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M15 9l-6 6"}),c.jsx("path",{d:"M9 9l6 6"})]}),Jr=()=>{const{audioTracks:t,activeTracks:r,addAudioTrack:e,playTrack:s,stopAllTracks:n,stopTrack:i,stopTracksByLocationPrefix:a,setVolume:o,setTrackVolume:l,toggleMuteTrack:d,volume:u}=et(),f=L.useCallback((w,E)=>{let S=w;w.includes("/")&&(S=w.split("/").pop()||"",S.includes("/")&&(S=S.substring(S.lastIndexOf("/")+1)));const T=`/audio/${S}`;console.log(`useAudioPlayer.play: Calling slice playTrack with url=${T}, options=`,E),s(T,E)},[s]),v=L.useCallback(()=>{console.log("useAudioPlayer.stopAll: Calling slice stopAllTracks"),n()},[n]),m=L.useCallback(w=>{console.log(`useAudioPlayer.stop: Calling slice stopTrack for id=${w}`),i(w)},[i]),g=L.useCallback(w=>{console.log(`useAudioPlayer.stopLocationTracks: Calling slice stopTracksByLocationPrefix for prefix=${w}`),a(w)},[a]),b=L.useCallback(w=>{o(Math.max(0,Math.min(1,w)))},[o]),x=L.useCallback((w,E)=>{l(w,Math.max(0,Math.min(1,E)))},[l]),y=L.useCallback(w=>{d(w)},[d]);return{tracks:t,activeTracks:r,masterVolume:u,play:f,stop:m,stopAll:v,stopLocationTracks:g,setMasterVolume:b,adjustTrackVolume:x,toggleMute:y,addTrack:e}},sa=()=>{const[t,r]=L.useState(!1),[e,s]=L.useState([]),[n,i]=L.useState(!1),[a,o]=L.useState(""),[l,d]=L.useState(!0),{play:u,activeTracks:f}=Jr();L.useEffect(()=>{t&&v()},[t]);const v=async()=>{i(!0);try{const w=await fe.getAssets("audio");s(w.map(E=>E.name))}catch(w){console.error("Error loading audio assets:",w)}finally{i(!1)}},m=()=>{r(!0)},g=()=>{r(!1)},b=w=>{const E=`/audio/${w}`;u(E,{replace:!1,locationId:"",loop:l,name:w}),g()},x=w=>f.some(E=>E.name===w),y=e.filter(w=>w.toLowerCase().includes(a.toLowerCase()));return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"flex items-center px-3 py-1.5 bg-blue-600 text-white rounded text-sm mb-2 hover:bg-blue-700 transition-colors",onClick:m,children:[c.jsx(or,{size:16,className:"mr-1"}),"Add Track"]}),t&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:g}),c.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[c.jsx("div",{className:"p-4 border-b border-slate-700",children:c.jsx("h2",{className:"text-lg font-medium text-white",children:"Select Audio Track"})}),c.jsxs("div",{className:"p-4 overflow-y-auto flex-grow",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"Select a track to play. You can choose whether to loop it or play it once."}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:"text",className:"w-full pl-9 pr-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm",placeholder:"Search tracks...",value:a,onChange:w=>o(w.target.value)}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:w=>d(w.target.checked)}),c.jsx("div",{className:"relative w-10 h-5 bg-slate-700 rounded-full peer peer-checked:bg-blue-600 peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5"}),c.jsx("span",{className:"ml-2 text-sm text-white",children:"Loop Track"})]})]}),c.jsx("div",{className:"h-px bg-slate-700 mb-3"}),n?c.jsx("p",{className:"text-white",children:"Loading audio assets..."}):e.length===0?c.jsx("p",{className:"text-white",children:"No audio assets found. Import some audio files first."}):c.jsx("ul",{className:"max-h-[300px] overflow-y-auto pr-1",children:y.map(w=>{const E=x(w);return c.jsxs("li",{className:"flex items-center justify-between py-2 border-b border-slate-700 last:border-none",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-white",children:w}),E&&c.jsx("p",{className:"text-xs text-blue-400",children:"Currently playing"})]}),c.jsxs("div",{className:"group relative",title:E?"Already playing":"Play track","data-disabled":E,"aria-disabled":E,children:[c.jsx("button",{className:`p-2 rounded-full ${E?"text-blue-400 cursor-not-allowed":"text-white hover:bg-slate-700"}`,onClick:()=>!E&&b(w),disabled:E,children:E?c.jsx(aa,{size:20}):c.jsx(na,{size:20})}),c.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 hidden group-hover:block bg-slate-900 text-xs text-white py-1 px-2 rounded whitespace-nowrap",children:E?"Already playing":"Play track"})]})]},w)})})]}),c.jsx("div",{className:"p-3 border-t border-slate-700 flex justify-end",children:c.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors",onClick:g,children:"Close"})})]})]})]})},oa=()=>{const{activeTracks:t,toggleMute:r,stop:e,adjustTrackVolume:s,setMasterVolume:n,masterVolume:i}=Jr(),a=i,[o,l]=L.useState(!1),[d,u]=L.useState(a||.7),[f,v]=L.useState({}),[m,g]=L.useState(!1);L.useEffect(()=>{!o&&a>0&&u(a)},[a,o]);const b=()=>{o?n(d):(a>0&&u(a),n(0)),l(!o)},x=S=>{const T=parseFloat(S.target.value);n(T),o&&T>0&&l(!1),T===0&&!o&&l(!0)},y=S=>T=>{s(S,parseFloat(T.target.value))},w=S=>{v(T=>({...T,[S]:!T[S]}))},E=()=>{g(!m)};return m?c.jsx("div",{className:"fixed bottom-5 left-5 bg-slate-800/90 text-white p-2 rounded-full shadow-lg z-50 hover:bg-slate-700/90 cursor-pointer",onClick:E,title:"Audio Controls",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}):c.jsxs("div",{className:"fixed bottom-5 left-5 p-4 max-w-xs max-h-[300px] overflow-y-auto bg-slate-800/90 z-50 rounded-lg shadow-lg hover:shadow-xl transition-shadow",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h2",{className:"text-lg font-medium text-white",children:"Audio Controls"}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:E,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})})]}),c.jsx(sa,{}),c.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:b,children:a===0?c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),c.jsx("span",{className:"text-sm text-white min-w-[80px]",children:"Master Volume"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,onChange:x,className:"w-full accent-blue-500","aria-label":"Master volume control"})]}),c.jsx("div",{className:"h-px bg-slate-600 my-3"}),c.jsx("h3",{className:"text-base font-medium text-white mb-2",children:"Active Tracks"}),t.length===0?c.jsx("p",{className:"text-sm text-slate-400 italic",children:'No tracks currently playing. Use the "Add Track" button to play some music.'}):c.jsx("ul",{className:"space-y-2",children:t.map(S=>c.jsxs(L.Fragment,{children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>r(S.id),children:S.isMuted?c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),c.jsx("span",{className:"flex-1 text-white text-sm cursor-pointer truncate",onClick:()=>w(S.id),children:S.name}),c.jsx("div",{className:`p-1 ${S.loop?"text-white":"text-white/30"}`,children:S.loop?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>w(S.id),children:f[S.id]?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>e(S.id),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f[S.id]&&c.jsxs("div",{className:"pl-8 pr-4 pb-2 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-white min-w-[60px]",children:"Volume"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:S.volume,onChange:y(S.id),className:"w-full accent-blue-500","aria-label":`Volume control for ${S.name}`})]})]},S.id))})]})},la=({size:t="md",color:r="primary",text:e="",fullScreen:s=!1})=>{const n={sm:{container:"h-5 w-5",circle:"h-5 w-5 border-2",text:"text-xs mt-2"},md:{container:"h-8 w-8",circle:"h-8 w-8 border-2",text:"text-sm mt-3"},lg:{container:"h-12 w-12",circle:"h-12 w-12 border-3",text:"text-base mt-4"},xl:{container:"h-16 w-16",circle:"h-16 w-16 border-4",text:"text-lg mt-4"}},i={primary:{outer:"border-indigo-500/20",inner:"border-t-indigo-500"},secondary:{outer:"border-amber-500/20",inner:"border-t-amber-500"},white:{outer:"border-white/20",inner:"border-t-white"}},a=n[t],o=i[r],l=c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`rounded-full ${a.circle} border-solid ${o.outer}`}),c.jsx("div",{className:`
          absolute top-0 left-0 
          rounded-full ${a.circle} border-solid ${o.inner}
          animate-spin
        `}),c.jsx("div",{className:`
          absolute -inset-1.5
          bg-${r==="primary"?"indigo":r==="secondary"?"amber":"white"}-500/10
          rounded-full blur-sm opacity-0 animate-pulse-slow
        `})]}),e&&c.jsx("div",{className:`${a.text} text-slate-300 font-normal`,children:e})]});return s?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",children:l}):l},ca=()=>{const t=et(r=>r.initializeStore);return L.useEffect(()=>{t()},[t]),null},Gr=()=>{const[t,r]=L.useState(!1),[e,s]=L.useState(!1),[n,i]=L.useState(null),{audioAssets:a,imageAssets:o,dataAssets:l,hasAssets:d,isLoading:u,refreshAssets:f,saveDataToIndexedDB:v,exportToZip:m}=et(),g=async N=>{if(!N.name.toLowerCase().endsWith(".zip")){i({success:!1,message:"Please upload a .zip file containing audio, images, and data folders."});return}const I=N.size/(1024*1024);I>200&&(i({success:!0,message:`Warning: The file is ${I.toFixed(1)}MB, which is quite large. Processing may take some time and require sufficient memory.`}),await new Promise(k=>setTimeout(k,2e3))),r(!0),i({success:!0,message:"Processing zip file... This may take a few moments for large files."});try{const k=await fe.processZipFile(N);i(k),k.success&&await f()}catch(k){console.error("Error processing file:",k),i({success:!1,message:`Error processing file: ${k instanceof Error?k.message:String(k)}`})}finally{r(!1)}};return{audioAssets:a,imageAssets:o,dataAssets:l,hasStoredAssets:d,isLoadingAssets:u,isProcessing:t,isDragging:e,result:n,processZipFile:g,addAsset:async(N,I)=>{r(!0);try{const z=await fe.addAsset(N,I);return i(z),z.success&&await f(),z}catch(z){const k={success:!1,message:`Error adding asset: ${z instanceof Error?z.message:String(z)}`};return i(k),k}finally{r(!1)}},deleteAsset:async(N,I)=>{r(!0);try{const z=await fe.deleteAsset(N,I);return i(z),z.success&&await f(),z}catch(z){const k={success:!1,message:`Error deleting asset: ${z instanceof Error?z.message:String(z)}`};return i(k),k}finally{r(!1)}},clearAllAssets:async()=>{r(!0);try{return await fe.clearAllAssets(),i({success:!0,message:"All imported assets have been cleared."}),await f(),{success:!0,message:"All imported assets have been cleared."}}catch(N){const I={success:!1,message:`Error clearing assets: ${N instanceof Error?N.message:String(N)}`};return i(I),I}finally{r(!1)}},createSampleData:async()=>{r(!0),i(null);try{const N=await fe.loadExampleData();return i(N),N.success&&await f(),N}catch(N){const I={success:!1,message:`Error creating sample data: ${N instanceof Error?N.message:String(N)}`};return i(I),I}finally{r(!1)}},exportData:async()=>{r(!0);try{await v();const N=await m();if(i({success:N.success,message:N.message}),N.success&&N.url){const I=document.createElement("a");I.href=N.url,I.download="campaign-data.zip",document.body.appendChild(I),I.click(),document.body.removeChild(I)}return N}catch(N){const I={success:!1,message:`Error exporting data: ${N instanceof Error?N.message:String(N)}`};return i(I),I}finally{r(!1)}},loadAssetLists:async()=>{await f()},handleDragOver:N=>{N.preventDefault(),s(!0)},handleDragLeave:N=>{N.preventDefault(),s(!1)},handleDrop:async N=>{N.preventDefault(),s(!1);const I=N.dataTransfer.files;if(I.length===0)return;const z=I[0];await g(z)},clearResult:()=>{i(null)}}},cr=()=>{const[t,r]=L.useState(!1),[e,s]=L.useState(""),[n,i]=L.useState(""),[a,o]=L.useState(!1),[l,d]=L.useState(null),[u,f]=L.useState(!1),[v,m]=L.useState(""),g=async y=>{o(!0),d(null);try{const w=await fe.getAssetByName("data",y);if(!w)throw new Error(`JSON file ${y} not found`);if(typeof w.data=="string"&&(w.data.startsWith("{")||w.data.startsWith("["))){const E=JSON.parse(w.data);i(JSON.stringify(E,null,2))}else try{const E=atob(w.data),S=JSON.parse(E);i(JSON.stringify(S,null,2))}catch{throw new Error(`Failed to parse JSON data from ${y}`)}s(y),r(!0)}catch(w){console.error("Error loading JSON content:",w),d(`Error loading JSON content: ${w instanceof Error?w.message:String(w)}`)}finally{o(!1)}};return{isJsonEditorOpen:t,jsonFileToEdit:e,jsonContent:n,isLoading:a,error:l,isCreateJsonOpen:u,newJsonFileName:v,setIsJsonEditorOpen:r,setJsonFileToEdit:s,setJsonContent:i,setIsCreateJsonOpen:f,setNewJsonFileName:m,loadJsonContent:g,saveJsonContent:async()=>{o(!0),d(null);try{const y=JSON.parse(n),w=new Blob([JSON.stringify(y)],{type:"application/json"}),E=new File([w],e,{type:"application/json"}),S=await fe.addAsset("data",E);if(!S.success)throw new Error(S.message);return r(!1),{success:!0,message:`JSON file ${e} saved successfully`}}catch(y){return console.error("Error saving JSON content:",y),d(`Error saving JSON content: ${y instanceof Error?y.message:String(y)}`),{success:!1,message:`Error saving JSON content: ${y instanceof Error?y.message:String(y)}`}}finally{o(!1)}},createNewJsonFile:async(y="{}")=>{o(!0),d(null);try{const w=v.endsWith(".json")?v:`${v}.json`,E=new Blob([y],{type:"application/json"}),S=new File([E],w,{type:"application/json"}),T=await fe.addAsset("data",S);if(!T.success)throw new Error(T.message);return m(""),f(!1),await g(w),{success:!0,message:`New JSON file ${w} created successfully`}}catch(w){return console.error("Error creating JSON file:",w),d(`Error creating JSON file: ${w instanceof Error?w.message:String(w)}`),{success:!1,message:`Error creating JSON file: ${w instanceof Error?w.message:String(w)}`}}finally{o(!1)}}}},dr=({children:t,severity:r="info",onClose:e,variant:s="standard",className:n="",icon:i,title:a,action:o})=>{const[l,d]=L.useState(!0);L.useEffect(()=>{if(!l&&e){const v=setTimeout(()=>{e()},300);return()=>clearTimeout(v)}},[l,e]);const u=()=>({success:{standard:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300",filled:"bg-green-600 text-white",outlined:"border border-green-500 text-green-700 dark:text-green-400",soft:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},error:{standard:"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-300",filled:"bg-red-600 text-white",outlined:"border border-red-500 text-red-700 dark:text-red-400",soft:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300"},warning:{standard:"bg-amber-50 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300",filled:"bg-amber-600 text-white",outlined:"border border-amber-500 text-amber-700 dark:text-amber-400",soft:"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300"},info:{standard:"bg-blue-50 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",filled:"bg-blue-600 text-white",outlined:"border border-blue-500 text-blue-700 dark:text-blue-400",soft:"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300"}})[r][s],f=()=>{if(i)return i;const m=s==="filled"?"text-white":{success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-amber-500 dark:text-amber-400",info:"text-blue-500 dark:text-blue-400"}[r];switch(r){case"success":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":default:return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}};return c.jsx("div",{className:`
        rounded-lg overflow-hidden
        transition-all duration-300 ease-in-out
        ${l?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"}
        ${u()}
        shadow-sm
        ${n}
      `,role:"alert",children:c.jsxs("div",{className:"px-4 py-3 flex items-start",children:[c.jsx("div",{className:"flex-shrink-0 mr-3 pt-0.5",children:f()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[a&&c.jsx("div",{className:"text-sm font-medium mb-1",children:a}),c.jsx("div",{className:"text-sm",children:t})]}),o&&c.jsx("div",{className:"ml-3",children:o}),e&&c.jsx("button",{type:"button",className:`
              ml-3 flex-shrink-0 p-1 rounded-full 
              ${s==="filled"?"text-white/80 hover:text-white hover:bg-white/10":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700/50"}
              focus:outline-none transition-colors
            `,onClick:()=>d(!1),"aria-label":"Close",children:c.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},De=L.forwardRef(({children:t,component:r="div",sx:e={},className:s="",...n},i)=>{const a={};let o="";e.display&&(typeof e.display=="object"?(e.display.xs&&(o+=` ${e.display.xs}`),e.display.sm&&(o+=` sm:${e.display.sm}`),e.display.md&&(o+=` md:${e.display.md}`),e.display.lg&&(o+=` lg:${e.display.lg}`),e.display.xl&&(o+=` xl:${e.display.xl}`)):o+=` ${e.display}`),e.flexDirection&&(typeof e.flexDirection=="object"?(e.flexDirection.xs&&(o+=` flex-${e.flexDirection.xs}`),e.flexDirection.sm&&(o+=` sm:flex-${e.flexDirection.sm}`),e.flexDirection.md&&(o+=` md:flex-${e.flexDirection.md}`),e.flexDirection.lg&&(o+=` lg:flex-${e.flexDirection.lg}`),e.flexDirection.xl&&(o+=` xl:flex-${e.flexDirection.xl}`)):o+=` flex-${e.flexDirection}`),e.justifyContent&&(o+=` justify-${e.justifyContent.replace("flex-","")}`),e.alignItems&&(o+=` items-${e.alignItems.replace("flex-","")}`),["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py"].forEach(u=>{if(e[u]!==void 0)if(typeof e[u]=="object")for(const f in e[u]){const v=e[u][f],g=`${f==="xs"?"":`${f}:`}${u}-${v}`;o+=` ${g}`}else{const f=e[u];u==="m"&&(a.margin=`${f*.25}rem`),u==="mt"&&(a.marginTop=`${f*.25}rem`),u==="mr"&&(a.marginRight=`${f*.25}rem`),u==="mb"&&(a.marginBottom=`${f*.25}rem`),u==="ml"&&(a.marginLeft=`${f*.25}rem`),u==="mx"&&(a.marginLeft=`${f*.25}rem`,a.marginRight=`${f*.25}rem`),u==="my"&&(a.marginTop=`${f*.25}rem`,a.marginBottom=`${f*.25}rem`),u==="p"&&(a.padding=`${f*.25}rem`),u==="pt"&&(a.paddingTop=`${f*.25}rem`),u==="pr"&&(a.paddingRight=`${f*.25}rem`),u==="pb"&&(a.paddingBottom=`${f*.25}rem`),u==="pl"&&(a.paddingLeft=`${f*.25}rem`),u==="px"&&(a.paddingLeft=`${f*.25}rem`,a.paddingRight=`${f*.25}rem`),u==="py"&&(a.paddingTop=`${f*.25}rem`,a.paddingBottom=`${f*.25}rem`)}}),e.width&&(a.width=typeof e.width=="number"?`${e.width}px`:e.width),e.minWidth&&(a.minWidth=typeof e.minWidth=="number"?`${e.minWidth}px`:e.minWidth),e.maxWidth&&(a.maxWidth=typeof e.maxWidth=="number"?`${e.maxWidth}px`:e.maxWidth),e.height&&(a.height=typeof e.height=="number"?`${e.height}px`:e.height),e.minHeight&&(a.minHeight=typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight),e.maxHeight&&(a.maxHeight=typeof e.maxHeight=="number"?`${e.maxHeight}px`:e.maxHeight),e.color&&(a.color=e.color),e.backgroundColor&&(a.backgroundColor=e.backgroundColor),e.border&&(a.border=e.border),e.borderTop&&(a.borderTop=e.borderTop),e.borderRight&&(a.borderRight=e.borderRight),e.borderBottom&&(a.borderBottom=e.borderBottom),e.borderLeft&&(a.borderLeft=e.borderLeft),e.borderRadius&&(a.borderRadius=e.borderRadius),e.borderColor&&(a.borderColor=e.borderColor),e.fontWeight&&(a.fontWeight=e.fontWeight),e.fontSize&&(a.fontSize=e.fontSize),e.textAlign&&(a.textAlign=e.textAlign);const d=`${s}${o}`.trim();return c.jsx(r,{ref:i,className:d,style:{...a,...n.style},...n,children:t})});De.displayName="Box";const ur=L.forwardRef(({children:t,className:r="",disablePadding:e=!1,dense:s=!1,sx:n={},...i},a)=>{const o={};return n.width&&(o.width=n.width),n.maxWidth&&(o.maxWidth=n.maxWidth),n.maxHeight&&(o.maxHeight=n.maxHeight),n.overflowY&&(o.overflowY=n.overflowY),n.overflowX&&(o.overflowX=n.overflowX),n.flexGrow!==void 0&&(o.flexGrow=n.flexGrow),c.jsx("ul",{ref:a,className:`
        ${e?"":"py-2"}
        ${s?"space-y-0.5":"space-y-1"}
        ${r}
      `,style:{...i.style,...o},...i,children:t})});ur.displayName="List";const Pt=L.forwardRef(({children:t,className:r="",selected:e=!1,disabled:s=!1,divider:n=!1,disablePadding:i=!1,onClick:a,sx:o={},secondaryAction:l,...d},u)=>{const f={},v=e?"bg-primary-600/20":"",m=s?"opacity-50 pointer-events-none":"",g=a?"cursor-pointer hover:bg-slate-800/80":"",b=n?"border-b border-slate-700/50":"",x=i?"":"px-4 py-2",y=ie.Children.map(t,w=>ie.isValidElement(w)&&(w.type===Pt||typeof w.type=="function"&&(w.type.displayName==="ListItem"||w.type.name==="ListItem"))?w.props.children:w);return l?c.jsxs("li",{ref:u,className:`
          ${x} transition-colors
          ${v}
          ${m}
          ${g}
          ${b}
          ${r}
          flex justify-between items-center
        `,onClick:s?void 0:a,style:{...d.style,...f},...d,children:[c.jsx("div",{className:"flex-grow",children:y}),c.jsx("div",{className:"ml-2",children:l})]}):c.jsx("li",{ref:u,className:`
        ${x} transition-colors
        ${v}
        ${m}
        ${g}
        ${b}
        ${r}
      `,onClick:s?void 0:a,style:{...d.style,...f},...d,children:y})});Pt.displayName="ListItem";const da=L.forwardRef(({children:t,className:r="",selected:e=!1,disabled:s=!1,onClick:n,sx:i={},...a},o)=>{const l={},d=e?"bg-primary-600/20":"",u="flex items-center w-full px-4 py-2 text-left transition-colors",f="hover:bg-slate-800/80",v="active:bg-slate-700/50",m=s?"opacity-50 cursor-not-allowed":"cursor-pointer";return c.jsx("button",{ref:o,type:"button",role:"button","aria-disabled":s,disabled:s,className:`
        ${u}
        ${d}
        ${s?"":f} ${s?"":v}
        ${m}
        ${r}
      `,onClick:s?void 0:n,style:{...a.style,...l},...a,children:t})});da.displayName="ListItemButton";const Xs=({primary:t,secondary:r,className:e="",sx:s={},primaryTypographyProps:n={},secondaryTypographyProps:i={},...a})=>{const o=`text-sm font-medium text-white 
    ${n.variant==="body2"?"text-xs":""}
    ${n.variant==="subtitle1"?"text-base font-semibold":""}
    ${n.variant==="subtitle2"?"text-sm font-semibold":""}
    ${n.className||""}
  `,l=`text-xs text-slate-400
    ${i.className||""}
  `;return c.jsxs("div",{className:`flex flex-col ${e}`,...a,children:[t&&c.jsx("div",{className:o,children:t}),r&&c.jsx("div",{className:l,children:r})]})},fr=L.forwardRef(({children:t,className:r="",elevation:e=1,variant:s="elevation",sx:n={},...i},a)=>{const o={};n.display&&(o.display=n.display),n.flexDirection&&(o.flexDirection=n.flexDirection),n.alignItems&&(o.alignItems=n.alignItems),n.justifyContent&&(o.justifyContent=n.justifyContent),n.flexGrow!==void 0&&(o.flexGrow=n.flexGrow),n.p&&(o.padding=typeof n.p=="number"?`${n.p*8}px`:n.p),n.width&&(o.width=n.width),n.height&&(o.height=n.height),n.minWidth&&(o.minWidth=n.minWidth),n.maxWidth&&(o.maxWidth=n.maxWidth),n.overflow&&(o.overflow=n.overflow),n.overflowX&&(o.overflowX=n.overflowX),n.overflowY&&(o.overflowY=n.overflowY),n.bgcolor&&(o.backgroundColor=n.bgcolor),n.zIndex!==void 0&&(o.zIndex=n.zIndex);let l="";if(s==="elevation")switch(e){case 0:l="";break;case 1:l="shadow-md";break;case 2:l="shadow-lg";break;case 3:l="shadow-xl";break;default:l="shadow-2xl"}const d=s==="outlined"?"border border-slate-700/50":"";return c.jsx("div",{ref:a,className:`paper glass-effect rounded-[var(--radius-md)] ${l} ${d} ${r}`,style:{...o,...i.style},...i,children:t})});fr.displayName="Paper";function ua(t,r){const{options:e,value:s,onChange:n,getOptionLabel:i,renderInput:a,isOptionEqualToValue:o,className:l="",sx:d={}}=t,[u,f]=L.useState(!1),[v,m]=L.useState(s?i(s):""),[g,b]=L.useState(-1),x=L.useRef(null),y=L.useRef(null),w=L.useRef(null);L.useEffect(()=>{if(s!==null&&i(s)!==v){const k=i(s);m(k),y.current&&(y.current.value=k)}},[s,i]);const E=e.filter(k=>{const $=i(k);return $&&typeof $=="string"&&typeof v=="string"&&$.toLowerCase().includes(v.toLowerCase())}),S=L.useCallback(k=>{if(x.current&&!x.current.contains(k.target)&&(f(!1),v)){const $=e.find(h=>i(h).toLowerCase()===v.toLowerCase());$?n(null,$):s&&m(i(s))}},[s,v,e,i,n]);L.useEffect(()=>(document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}),[S]);const T=(k,$)=>{m(k),f(!0),b(-1),k===""&&s!==null&&n(null,null)},F=()=>{f(!0)},M=k=>{const $=i(k);m($),f(!1),n(null,k)},j=k=>{if(!u){k.key==="ArrowDown"&&f(!0);return}switch(k.key){case"ArrowDown":k.preventDefault(),b($=>$<E.length-1?$+1:0);break;case"ArrowUp":k.preventDefault(),b($=>$>0?$-1:E.length-1);break;case"Enter":g>=0&&g<E.length&&M(E[g]);break;case"Escape":f(!1);break}};L.useEffect(()=>{if(u&&g>=0&&w.current){const k=w.current.children[g];k&&k.scrollIntoView({block:"nearest"})}},[g,u]);const N=k=>{b(k)},I=()=>({value:v,onChange:T,onFocus:F,onKeyDown:j,ref:y,InputProps:{inputProps:{role:"combobox","aria-autocomplete":"list","aria-expanded":u,"aria-controls":u?"autocomplete-listbox":void 0,"aria-activedescendant":u&&g>=0?`option-${g}`:void 0,value:v}}}),z=(k,$)=>{const h=g===$,D=i(k);return c.jsx(Pt,{role:"option",id:`option-${$}`,"aria-selected":h,onClick:()=>M(k),onMouseEnter:()=>N($),sx:{cursor:"pointer",bgcolor:h?"action.hover":"transparent","&:hover":{bgcolor:"action.hover"}},children:D},$)};return ie.useImperativeHandle(r,()=>x.current),ie.useLayoutEffect(()=>{y.current&&(y.current.value=v)},[v,u,g]),c.jsxs(De,{ref:x,className:`autocomplete ${l}`,sx:{position:"relative",...d},children:[a(I()),u&&E.length>0&&c.jsx(fr,{sx:{position:"absolute",zIndex:1e3,width:"100%",maxHeight:300,overflow:"auto",mt:1},children:c.jsx(ur,{ref:w,role:"listbox",id:"autocomplete-listbox",children:E.map((k,$)=>z(k,$))})})]})}const qs=ie.forwardRef(ua),we=typeof document<"u"?ie.useLayoutEffect:()=>{};function $e(t){const r=L.useRef(null);return we(()=>{r.current=t},[t]),L.useCallback((...e)=>{const s=r.current;return s==null?void 0:s(...e)},[])}function fa(t){let[r,e]=L.useState(t),s=L.useRef(null),n=$e(()=>{if(!s.current)return;let a=s.current.next();if(a.done){s.current=null;return}r===a.value?n():e(a.value)});we(()=>{s.current&&n()});let i=$e(a=>{s.current=a(r),n()});return[r,i]}const hr={prefix:String(Math.round(Math.random()*1e10)),current:0},Yr=ie.createContext(hr),ha=ie.createContext(!1);let ma=!!(typeof window<"u"&&window.document&&window.document.createElement),Bt=new WeakMap;function pa(t=!1){let r=L.useContext(Yr),e=L.useRef(null);if(e.current===null&&!t){var s,n;let i=(n=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(s=n.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(i){let a=Bt.get(i);a==null?Bt.set(i,{id:r.current,state:i.memoizedState}):i.memoizedState!==a.state&&(r.current=a.id,Bt.delete(i))}e.current=++r.current}return e.current}function ga(t){let r=L.useContext(Yr);r===hr&&!ma&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let e=pa(!!t),s=`react-aria${r.prefix}`;return t||`${s}-${e}`}function ba(t){let r=ie.useId(),[e]=L.useState(ka()),s=e?"react-aria":`react-aria${hr.prefix}`;return t||`${s}-${r}`}const va=typeof ie.useId=="function"?ba:ga;function wa(){return!1}function ya(){return!0}function xa(t){return()=>{}}function ka(){return typeof ie.useSyncExternalStore=="function"?ie.useSyncExternalStore(xa,wa,ya):L.useContext(ha)}let $a=!!(typeof window<"u"&&window.document&&window.document.createElement),Ye=new Map,lt;typeof FinalizationRegistry<"u"&&(lt=new FinalizationRegistry(t=>{Ye.delete(t)}));function _t(t){let[r,e]=L.useState(t),s=L.useRef(null),n=va(r),i=L.useRef(null);if(lt&&lt.register(i,n),$a){const a=Ye.get(n);a&&!a.includes(s)?a.push(s):Ye.set(n,[s])}return we(()=>{let a=n;return()=>{lt&&lt.unregister(i),Ye.delete(a)}},[n]),L.useEffect(()=>{let a=s.current;return a&&e(a),()=>{a&&(s.current=null)}}),n}function _a(t,r){if(t===r)return t;let e=Ye.get(t);if(e)return e.forEach(n=>n.current=r),r;let s=Ye.get(r);return s?(s.forEach(n=>n.current=t),t):r}function Jt(t=[]){let r=_t(),[e,s]=fa(r),n=L.useCallback(()=>{s(function*(){yield r,yield document.getElementById(r)?r:void 0})},[r,s]);return we(n,[r,n,...t]),e}function Xr(...t){return(...r)=>{for(let e of t)typeof e=="function"&&e(...r)}}const ue=t=>{var r;return(r=t==null?void 0:t.ownerDocument)!==null&&r!==void 0?r:document},Ee=t=>t&&"window"in t&&t.window===t?t:ue(t).defaultView||window;function Ea(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function ja(t){return Ea(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let Ca=!1;function It(){return Ca}function he(t,r){if(!It())return r&&t?t.contains(r):!1;if(!t||!r)return!1;let e=r;for(;e!==null;){if(e===t)return!0;e.tagName==="SLOT"&&e.assignedSlot?e=e.assignedSlot.parentNode:ja(e)?e=e.host:e=e.parentNode}return!1}const _e=(t=document)=>{var r;if(!It())return t.activeElement;let e=t.activeElement;for(;e&&"shadowRoot"in e&&(!((r=e.shadowRoot)===null||r===void 0)&&r.activeElement);)e=e.shadowRoot.activeElement;return e};function se(t){return It()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}class Sa{get currentNode(){return this._currentNode}set currentNode(r){if(!he(this.root,r))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const e=[];let s=r,n=r;for(this._currentNode=r;s&&s!==this.root;)if(s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const a=s,o=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});e.push(o),o.currentNode=n,this._currentSetFor.add(o),s=n=a.host}else s=s.parentNode;const i=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});e.push(i),i.currentNode=n,this._currentSetFor.add(i),this._walkerStack=e}get doc(){return this._doc}firstChild(){let r=this.currentNode,e=this.nextNode();return he(r,e)?(e&&(this.currentNode=e),e):(this.currentNode=r,null)}lastChild(){let e=this._walkerStack[0].lastChild();return e&&(this.currentNode=e),e}nextNode(){const r=this._walkerStack[0].nextNode();if(r){if(r.shadowRoot){var e;let n;if(typeof this.filter=="function"?n=this.filter(r):!((e=this.filter)===null||e===void 0)&&e.acceptNode&&(n=this.filter.acceptNode(r)),n===NodeFilter.FILTER_ACCEPT)return this.currentNode=r,r;let i=this.nextNode();return i&&(this.currentNode=i),i}return r&&(this.currentNode=r),r}else if(this._walkerStack.length>1){this._walkerStack.shift();let s=this.nextNode();return s&&(this.currentNode=s),s}else return null}previousNode(){const r=this._walkerStack[0];if(r.currentNode===r.root){if(this._currentSetFor.has(r))if(this._currentSetFor.delete(r),this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null;return null}const e=r.previousNode();if(e){if(e.shadowRoot){var s;let i;if(typeof this.filter=="function"?i=this.filter(e):!((s=this.filter)===null||s===void 0)&&s.acceptNode&&(i=this.filter.acceptNode(e)),i===NodeFilter.FILTER_ACCEPT)return e&&(this.currentNode=e),e;let a=this.lastChild();return a&&(this.currentNode=a),a}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(r,e,s,n){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=a=>{if(a.nodeType===Node.ELEMENT_NODE){const l=a.shadowRoot;if(l){const d=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(d),NodeFilter.FILTER_ACCEPT}else{var o;if(typeof this.filter=="function")return this.filter(a);if(!((o=this.filter)===null||o===void 0)&&o.acceptNode)return this.filter.acceptNode(a);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=r,this.root=e,this.filter=n??null,this.whatToShow=s??NodeFilter.SHOW_ALL,this._currentNode=e,this._walkerStack.unshift(r.createTreeWalker(e,s,this._acceptNode));const i=e.shadowRoot;if(i){const a=this._doc.createTreeWalker(i,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(a)}}}function Na(t,r,e,s){return It()?new Sa(t,r,e,s):t.createTreeWalker(r,e,s)}function qr(t){var r,e,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(e=qr(t[r]))&&(s&&(s+=" "),s+=e)}else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function Ta(){for(var t,r,e=0,s="",n=arguments.length;e<n;e++)(t=arguments[e])&&(r=qr(t))&&(s&&(s+=" "),s+=r);return s}function Se(...t){let r={...t[0]};for(let e=1;e<t.length;e++){let s=t[e];for(let n in s){let i=r[n],a=s[n];typeof i=="function"&&typeof a=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?r[n]=Xr(i,a):(n==="className"||n==="UNSAFE_className")&&typeof i=="string"&&typeof a=="string"?r[n]=Ta(i,a):n==="id"&&i&&a?r.id=_a(i,a):r[n]=a!==void 0?a:i}}return r}const La=new Set(["id"]),Aa=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Pa=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),Ia=/^(data-.*)$/;function Dt(t,r={}){let{labelable:e,isLink:s,propNames:n}=r,i={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(La.has(a)||e&&Aa.has(a)||s&&Pa.has(a)||n!=null&&n.has(a)||Ia.test(a))&&(i[a]=t[a]);return i}function Xe(t){if(Da())t.focus({preventScroll:!0});else{let r=Ra(t);t.focus(),za(r)}}let bt=null;function Da(){if(bt==null){bt=!1;try{document.createElement("div").focus({get preventScroll(){return bt=!0,!0}})}catch{}}return bt}function Ra(t){let r=t.parentNode,e=[],s=document.scrollingElement||document.documentElement;for(;r instanceof HTMLElement&&r!==s;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&e.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),r=r.parentNode;return s instanceof HTMLElement&&e.push({element:s,scrollTop:s.scrollTop,scrollLeft:s.scrollLeft}),e}function za(t){for(let{element:r,scrollTop:e,scrollLeft:s}of t)r.scrollTop=e,r.scrollLeft=s}function Rt(t){var r;return typeof window>"u"||window.navigator==null?!1:((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands.some(e=>t.test(e.brand)))||t.test(window.navigator.userAgent)}function mr(t){var r;return typeof window<"u"&&window.navigator!=null?t.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function Me(t){let r=null;return()=>(r==null&&(r=t()),r)}const qe=Me(function(){return mr(/^Mac/i)}),Oa=Me(function(){return mr(/^iPhone/i)}),Qr=Me(function(){return mr(/^iPad/i)||qe()&&navigator.maxTouchPoints>1}),pr=Me(function(){return Oa()||Qr()}),Qs=Me(function(){return qe()||pr()}),Ma=Me(function(){return Rt(/AppleWebKit/i)&&!en()}),en=Me(function(){return Rt(/Chrome/i)}),gr=Me(function(){return Rt(/Android/i)}),Fa=Me(function(){return Rt(/Firefox/i)}),Ba=L.createContext({isNative:!0,open:Va,useHref:t=>t});function Wa(){return L.useContext(Ba)}function Qe(t,r,e=!0){var s,n;let{metaKey:i,ctrlKey:a,altKey:o,shiftKey:l}=r;Fa()&&(!((n=window.event)===null||n===void 0||(s=n.type)===null||s===void 0)&&s.startsWith("key"))&&t.target==="_blank"&&(qe()?i=!0:a=!0);let d=Ma()&&qe()&&!Qr()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:i,ctrlKey:a,altKey:o,shiftKey:l}):new MouseEvent("click",{metaKey:i,ctrlKey:a,altKey:o,shiftKey:l,bubbles:!0,cancelable:!0});Qe.isOpening=e,Xe(t),t.dispatchEvent(d),Qe.isOpening=!1}Qe.isOpening=!1;function Ua(t,r){if(t instanceof HTMLAnchorElement)r(t);else if(t.hasAttribute("data-href")){let e=document.createElement("a");e.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(e.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(e.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(e.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(e.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(e.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(e),r(e),t.removeChild(e)}}function Va(t,r){Ua(t,e=>Qe(e,r))}function eo(t){let r=Wa();var e;const s=r.useHref((e=t==null?void 0:t.href)!==null&&e!==void 0?e:"");return{href:t!=null&&t.href?s:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}let Je=new Map,Gt=new Set;function Tr(){if(typeof window>"u")return;function t(s){return"propertyName"in s}let r=s=>{if(!t(s)||!s.target)return;let n=Je.get(s.target);n||(n=new Set,Je.set(s.target,n),s.target.addEventListener("transitioncancel",e,{once:!0})),n.add(s.propertyName)},e=s=>{if(!t(s)||!s.target)return;let n=Je.get(s.target);if(n&&(n.delete(s.propertyName),n.size===0&&(s.target.removeEventListener("transitioncancel",e),Je.delete(s.target)),Je.size===0)){for(let i of Gt)i();Gt.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?Tr():document.addEventListener("DOMContentLoaded",Tr));function tn(t){requestAnimationFrame(()=>{Je.size===0?t():Gt.add(t)})}function rn(){let t=L.useRef(new Map),r=L.useCallback((n,i,a,o)=>{let l=o!=null&&o.once?(...d)=>{t.current.delete(a),a(...d)}:a;t.current.set(a,{type:i,eventTarget:n,fn:l,options:o}),n.addEventListener(i,l,o)},[]),e=L.useCallback((n,i,a,o)=>{var l;let d=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;n.removeEventListener(i,d,o),t.current.delete(a)},[]),s=L.useCallback(()=>{t.current.forEach((n,i)=>{e(n.eventTarget,n.type,i,n.options)})},[e]);return L.useEffect(()=>s,[s]),{addGlobalListener:r,removeGlobalListener:e,removeAllGlobalListeners:s}}function Ha(t,r){let{id:e,"aria-label":s,"aria-labelledby":n}=t;return e=_t(e),n&&s?n=[...new Set([e,...n.trim().split(/\s+/)])].join(" "):n&&(n=n.trim().split(/\s+/).join(" ")),!s&&!n&&r&&(s=r),{id:e,"aria-label":s,"aria-labelledby":n}}function nn(t,r){we(()=>{if(t&&t.ref&&r)return t.ref.current=r.current,()=>{t.ref&&(t.ref.current=null)}})}function Yt(t){return t.mozInputSource===0&&t.isTrusted?!0:gr()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Ka(t){return!gr()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function an(t,r,e){let s=L.useRef(r),n=$e(()=>{e&&e(s.current)});L.useEffect(()=>{var i;let a=t==null||(i=t.current)===null||i===void 0?void 0:i.form;return a==null||a.addEventListener("reset",n),()=>{a==null||a.removeEventListener("reset",n)}},[t,n])}const br=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],Za=br.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";br.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Ja=br.join(':not([hidden]):not([tabindex="-1"]),');function sn(t){return t.matches(Za)}function Ga(t){return t.matches(Ja)}function on(t,r,e){let[s,n]=L.useState(t||r),i=L.useRef(t!==void 0),a=t!==void 0;L.useEffect(()=>{let d=i.current;d!==a&&console.warn(`WARN: A component changed from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}.`),i.current=a},[a]);let o=a?t:s,l=L.useCallback((d,...u)=>{let f=(v,...m)=>{e&&(Object.is(o,v)||e(v,...m)),a||(o=v)};typeof d=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),n((m,...g)=>{let b=d(a?o:m,...g);return f(b,...u),a?m:b})):(a||n(d),f(d,...u))},[a,o,e]);return[o,l]}let Ge="default",Xt="",xt=new WeakMap;function Lr(t){if(pr()){if(Ge==="default"){const r=ue(t);Xt=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}Ge="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let r="userSelect"in t.style?"userSelect":"webkitUserSelect";xt.set(t,t.style[r]),t.style[r]="none"}}function Wt(t){if(pr()){if(Ge!=="disabled")return;Ge="restoring",setTimeout(()=>{tn(()=>{if(Ge==="restoring"){const r=ue(t);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=Xt||""),Xt="",Ge="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&xt.has(t)){let r=xt.get(t),e="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[e]==="none"&&(t.style[e]=r),t.getAttribute("style")===""&&t.removeAttribute("style"),xt.delete(t)}}const ln=ie.createContext({register:()=>{}});ln.displayName="PressResponderContext";class cn{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(r,e){this.nativeEvent=e,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.defaultPrevented=e.defaultPrevented,this.eventPhase=e.eventPhase,this.isTrusted=e.isTrusted,this.timeStamp=e.timeStamp,this.type=r}}function dn(t){let r=L.useRef({isFocused:!1,observer:null});we(()=>{const s=r.current;return()=>{s.observer&&(s.observer.disconnect(),s.observer=null)}},[]);let e=$e(s=>{t==null||t(s)});return L.useCallback(s=>{if(s.target instanceof HTMLButtonElement||s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement){r.current.isFocused=!0;let n=s.target,i=a=>{r.current.isFocused=!1,n.disabled&&e(new cn("blur",a)),r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};n.addEventListener("focusout",i,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&n.disabled){var a;(a=r.current.observer)===null||a===void 0||a.disconnect();let o=n===document.activeElement?null:document.activeElement;n.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),r.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let Et=!1;function Ar(t){for(;t&&!sn(t);)t=t.parentElement;let r=Ee(t),e=r.document.activeElement;if(!e||e===t)return;Et=!0;let s=!1,n=u=>{(u.target===e||s)&&u.stopImmediatePropagation()},i=u=>{(u.target===e||s)&&(u.stopImmediatePropagation(),!t&&!s&&(s=!0,Xe(e),l()))},a=u=>{(u.target===t||s)&&u.stopImmediatePropagation()},o=u=>{(u.target===t||s)&&(u.stopImmediatePropagation(),s||(s=!0,Xe(e),l()))};r.addEventListener("blur",n,!0),r.addEventListener("focusout",i,!0),r.addEventListener("focusin",o,!0),r.addEventListener("focus",a,!0);let l=()=>{cancelAnimationFrame(d),r.removeEventListener("blur",n,!0),r.removeEventListener("focusout",i,!0),r.removeEventListener("focusin",o,!0),r.removeEventListener("focus",a,!0),Et=!1,s=!1},d=requestAnimationFrame(l);return l}function Ya(t,r){return r.get?r.get.call(t):r.value}function un(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function Xa(t,r){var e=un(t,r,"get");return Ya(t,e)}function qa(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qa(t,r,e){qa(t,r),r.set(t,e)}function ei(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}function Pr(t,r,e){var s=un(t,r,"set");return ei(t,s,e),e}function ti(t){let r=L.useContext(ln);if(r){let{register:e,...s}=r;t=Se(s,t),e()}return nn(r,t.ref),t}var vt=new WeakMap;class wt{continuePropagation(){Pr(this,vt,!1)}get shouldStopPropagation(){return Xa(this,vt)}constructor(r,e,s,n){Qa(this,vt,{writable:!0,value:void 0}),Pr(this,vt,!0);var i;let a=(i=n==null?void 0:n.target)!==null&&i!==void 0?i:s.currentTarget;const o=a==null?void 0:a.getBoundingClientRect();let l,d=0,u,f=null;s.clientX!=null&&s.clientY!=null&&(u=s.clientX,f=s.clientY),o&&(u!=null&&f!=null?(l=u-o.left,d=f-o.top):(l=o.width/2,d=o.height/2)),this.type=r,this.pointerType=e,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=l,this.y=d}}const Ir=Symbol("linkClicked");function jt(t){let{onPress:r,onPressChange:e,onPressStart:s,onPressEnd:n,onPressUp:i,isDisabled:a,isPressed:o,preventFocusOnPress:l,shouldCancelOnPointerExit:d,allowTextSelectionOnPress:u,ref:f,...v}=ti(t),[m,g]=L.useState(!1),b=L.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:y}=rn(),w=$e((j,N)=>{let I=b.current;if(a||I.didFirePressStart)return!1;let z=!0;if(I.isTriggeringEvent=!0,s){let k=new wt("pressstart",N,j);s(k),z=k.shouldStopPropagation}return e&&e(!0),I.isTriggeringEvent=!1,I.didFirePressStart=!0,g(!0),z}),E=$e((j,N,I=!0)=>{let z=b.current;if(!z.didFirePressStart)return!1;z.didFirePressStart=!1,z.isTriggeringEvent=!0;let k=!0;if(n){let $=new wt("pressend",N,j);n($),k=$.shouldStopPropagation}if(e&&e(!1),g(!1),r&&I&&!a){let $=new wt("press",N,j);r($),k&&(k=$.shouldStopPropagation)}return z.isTriggeringEvent=!1,k}),S=$e((j,N)=>{let I=b.current;if(a)return!1;if(i){I.isTriggeringEvent=!0;let z=new wt("pressup",N,j);return i(z),I.isTriggeringEvent=!1,z.shouldStopPropagation}return!0}),T=$e(j=>{let N=b.current;if(N.isPressed&&N.target){N.didFirePressStart&&N.pointerType!=null&&E(Ze(N.target,j),N.pointerType,!1),N.isPressed=!1,N.isOverTarget=!1,N.activePointerId=null,N.pointerType=null,y(),u||Wt(N.target);for(let I of N.disposables)I();N.disposables=[]}}),F=$e(j=>{d&&T(j)}),M=L.useMemo(()=>{let j=b.current,N={onKeyDown(z){if(Ut(z.nativeEvent,z.currentTarget)&&he(z.currentTarget,se(z.nativeEvent))){var k;zr(se(z.nativeEvent),z.key)&&z.preventDefault();let $=!0;if(!j.isPressed&&!z.repeat){j.target=z.currentTarget,j.isPressed=!0,j.pointerType="keyboard",$=w(z,"keyboard");let h=z.currentTarget,D=Q=>{Ut(Q,h)&&!Q.repeat&&he(h,se(Q))&&j.target&&S(Ze(j.target,Q),"keyboard")};x(ue(z.currentTarget),"keyup",Xr(D,I),!0)}$&&z.stopPropagation(),z.metaKey&&qe()&&((k=j.metaKeyEvents)===null||k===void 0||k.set(z.key,z.nativeEvent))}else z.key==="Meta"&&(j.metaKeyEvents=new Map)},onClick(z){if(!(z&&!he(z.currentTarget,se(z.nativeEvent)))&&z&&z.button===0&&!j.isTriggeringEvent&&!Qe.isOpening){let k=!0;if(a&&z.preventDefault(),!j.ignoreEmulatedMouseEvents&&!j.isPressed&&(j.pointerType==="virtual"||Yt(z.nativeEvent))){let $=w(z,"virtual"),h=S(z,"virtual"),D=E(z,"virtual");k=$&&h&&D}else if(j.isPressed&&j.pointerType!=="keyboard"){let $=j.pointerType||z.nativeEvent.pointerType||"virtual";k=E(Ze(z.currentTarget,z),$,!0),j.isOverTarget=!1,T(z)}j.ignoreEmulatedMouseEvents=!1,k&&z.stopPropagation()}}},I=z=>{var k;if(j.isPressed&&j.target&&Ut(z,j.target)){var $;zr(se(z),z.key)&&z.preventDefault();let D=se(z);E(Ze(j.target,z),"keyboard",he(j.target,se(z))),y(),z.key!=="Enter"&&vr(j.target)&&he(j.target,D)&&!z[Ir]&&(z[Ir]=!0,Qe(j.target,z,!1)),j.isPressed=!1,($=j.metaKeyEvents)===null||$===void 0||$.delete(z.key)}else if(z.key==="Meta"&&(!((k=j.metaKeyEvents)===null||k===void 0)&&k.size)){var h;let D=j.metaKeyEvents;j.metaKeyEvents=void 0;for(let Q of D.values())(h=j.target)===null||h===void 0||h.dispatchEvent(new KeyboardEvent("keyup",Q))}};if(typeof PointerEvent<"u"){N.onPointerDown=$=>{if($.button!==0||!he($.currentTarget,se($.nativeEvent)))return;if(Ka($.nativeEvent)){j.pointerType="virtual";return}j.pointerType=$.pointerType;let h=!0;if(!j.isPressed){j.isPressed=!0,j.isOverTarget=!0,j.activePointerId=$.pointerId,j.target=$.currentTarget,u||Lr(j.target),h=w($,j.pointerType);let D=se($.nativeEvent);"releasePointerCapture"in D&&D.releasePointerCapture($.pointerId),x(ue($.currentTarget),"pointerup",z,!1),x(ue($.currentTarget),"pointercancel",k,!1)}h&&$.stopPropagation()},N.onMouseDown=$=>{if(he($.currentTarget,se($.nativeEvent))&&$.button===0){if(l){let h=Ar($.target);h&&j.disposables.push(h)}$.stopPropagation()}},N.onPointerUp=$=>{!he($.currentTarget,se($.nativeEvent))||j.pointerType==="virtual"||$.button===0&&S($,j.pointerType||$.pointerType)},N.onPointerEnter=$=>{$.pointerId===j.activePointerId&&j.target&&!j.isOverTarget&&j.pointerType!=null&&(j.isOverTarget=!0,w(Ze(j.target,$),j.pointerType))},N.onPointerLeave=$=>{$.pointerId===j.activePointerId&&j.target&&j.isOverTarget&&j.pointerType!=null&&(j.isOverTarget=!1,E(Ze(j.target,$),j.pointerType,!1),F($))};let z=$=>{if($.pointerId===j.activePointerId&&j.isPressed&&$.button===0&&j.target){if(he(j.target,se($))&&j.pointerType!=null){let h=!1,D=setTimeout(()=>{j.isPressed&&j.target instanceof HTMLElement&&(h?T($):(Xe(j.target),j.target.click()))},80);x($.currentTarget,"click",()=>h=!0,!0),j.disposables.push(()=>clearTimeout(D))}else T($);j.isOverTarget=!1}},k=$=>{T($)};N.onDragStart=$=>{he($.currentTarget,se($.nativeEvent))&&T($)}}else{N.onMouseDown=$=>{if($.button!==0||!he($.currentTarget,se($.nativeEvent)))return;if(j.ignoreEmulatedMouseEvents){$.stopPropagation();return}if(j.isPressed=!0,j.isOverTarget=!0,j.target=$.currentTarget,j.pointerType=Yt($.nativeEvent)?"virtual":"mouse",Ur.flushSync(()=>w($,j.pointerType))&&$.stopPropagation(),l){let D=Ar($.target);D&&j.disposables.push(D)}x(ue($.currentTarget),"mouseup",z,!1)},N.onMouseEnter=$=>{if(!he($.currentTarget,se($.nativeEvent)))return;let h=!0;j.isPressed&&!j.ignoreEmulatedMouseEvents&&j.pointerType!=null&&(j.isOverTarget=!0,h=w($,j.pointerType)),h&&$.stopPropagation()},N.onMouseLeave=$=>{if(!he($.currentTarget,se($.nativeEvent)))return;let h=!0;j.isPressed&&!j.ignoreEmulatedMouseEvents&&j.pointerType!=null&&(j.isOverTarget=!1,h=E($,j.pointerType,!1),F($)),h&&$.stopPropagation()},N.onMouseUp=$=>{he($.currentTarget,se($.nativeEvent))&&!j.ignoreEmulatedMouseEvents&&$.button===0&&S($,j.pointerType||"mouse")};let z=$=>{if($.button===0){if(j.ignoreEmulatedMouseEvents){j.ignoreEmulatedMouseEvents=!1;return}j.target&&j.target.contains($.target)&&j.pointerType!=null||T($),j.isOverTarget=!1}};N.onTouchStart=$=>{if(!he($.currentTarget,se($.nativeEvent)))return;let h=ri($.nativeEvent);if(!h)return;j.activePointerId=h.identifier,j.ignoreEmulatedMouseEvents=!0,j.isOverTarget=!0,j.isPressed=!0,j.target=$.currentTarget,j.pointerType="touch",u||Lr(j.target),w(Be(j.target,$),j.pointerType)&&$.stopPropagation(),x(Ee($.currentTarget),"scroll",k,!0)},N.onTouchMove=$=>{if(!he($.currentTarget,se($.nativeEvent)))return;if(!j.isPressed){$.stopPropagation();return}let h=Dr($.nativeEvent,j.activePointerId),D=!0;h&&Rr(h,$.currentTarget)?!j.isOverTarget&&j.pointerType!=null&&(j.isOverTarget=!0,D=w(Be(j.target,$),j.pointerType)):j.isOverTarget&&j.pointerType!=null&&(j.isOverTarget=!1,D=E(Be(j.target,$),j.pointerType,!1),F(Be(j.target,$))),D&&$.stopPropagation()},N.onTouchEnd=$=>{if(!he($.currentTarget,se($.nativeEvent)))return;if(!j.isPressed){$.stopPropagation();return}let h=Dr($.nativeEvent,j.activePointerId),D=!0;h&&Rr(h,$.currentTarget)&&j.pointerType!=null?(S(Be(j.target,$),j.pointerType),D=E(Be(j.target,$),j.pointerType)):j.isOverTarget&&j.pointerType!=null&&(D=E(Be(j.target,$),j.pointerType,!1)),D&&$.stopPropagation(),j.isPressed=!1,j.activePointerId=null,j.isOverTarget=!1,j.ignoreEmulatedMouseEvents=!0,j.target&&!u&&Wt(j.target),y()},N.onTouchCancel=$=>{he($.currentTarget,se($.nativeEvent))&&($.stopPropagation(),j.isPressed&&T(Be(j.target,$)))};let k=$=>{j.isPressed&&he(se($),j.target)&&T({currentTarget:j.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};N.onDragStart=$=>{he($.currentTarget,se($.nativeEvent))&&T($)}}return N},[x,a,l,y,u,T,F,E,w,S]);return L.useEffect(()=>{let j=b.current;return()=>{var N;u||Wt((N=j.target)!==null&&N!==void 0?N:void 0);for(let I of j.disposables)I();j.disposables=[]}},[u]),{isPressed:o||m,pressProps:Se(v,M)}}function vr(t){return t.tagName==="A"&&t.hasAttribute("href")}function Ut(t,r){const{key:e,code:s}=t,n=r,i=n.getAttribute("role");return(e==="Enter"||e===" "||e==="Spacebar"||s==="Space")&&!(n instanceof Ee(n).HTMLInputElement&&!fn(n,e)||n instanceof Ee(n).HTMLTextAreaElement||n.isContentEditable)&&!((i==="link"||!i&&vr(n))&&e!=="Enter")}function ri(t){const{targetTouches:r}=t;return r.length>0?r[0]:null}function Dr(t,r){const e=t.changedTouches;for(let s=0;s<e.length;s++){const n=e[s];if(n.identifier===r)return n}return null}function Be(t,r){let e=0,s=0;return r.targetTouches&&r.targetTouches.length===1&&(e=r.targetTouches[0].clientX,s=r.targetTouches[0].clientY),{currentTarget:t,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:e,clientY:s}}function Ze(t,r){let e=r.clientX,s=r.clientY;return{currentTarget:t,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:e,clientY:s}}function ni(t){let r=0,e=0;return t.width!==void 0?r=t.width/2:t.radiusX!==void 0&&(r=t.radiusX),t.height!==void 0?e=t.height/2:t.radiusY!==void 0&&(e=t.radiusY),{top:t.clientY-e,right:t.clientX+r,bottom:t.clientY+e,left:t.clientX-r}}function ai(t,r){return!(t.left>r.right||r.left>t.right||t.top>r.bottom||r.top>t.bottom)}function Rr(t,r){let e=r.getBoundingClientRect(),s=ni(t);return ai(e,s)}function ii(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!vr(t)}function zr(t,r){return t instanceof HTMLInputElement?!fn(t,r):ii(t)}const si=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function fn(t,r){return t.type==="checkbox"||t.type==="radio"?r===" ":si.has(t.type)}let Ke=null,qt=new Set,dt=new Map,He=!1,Qt=!1;const oi={Tab:!0,Escape:!0};function zt(t,r){for(let e of qt)e(t,r)}function li(t){return!(t.metaKey||!qe()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Ct(t){He=!0,li(t)&&(Ke="keyboard",zt("keyboard",t))}function Ce(t){Ke="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(He=!0,zt("pointer",t))}function hn(t){Yt(t)&&(He=!0,Ke="virtual")}function mn(t){t.target===window||t.target===document||Et||!t.isTrusted||(!He&&!Qt&&(Ke="virtual",zt("virtual",t)),He=!1,Qt=!1)}function pn(){Et||(He=!1,Qt=!0)}function er(t){if(typeof window>"u"||dt.get(Ee(t)))return;const r=Ee(t),e=ue(t);let s=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){He=!0,s.apply(this,arguments)},e.addEventListener("keydown",Ct,!0),e.addEventListener("keyup",Ct,!0),e.addEventListener("click",hn,!0),r.addEventListener("focus",mn,!0),r.addEventListener("blur",pn,!1),typeof PointerEvent<"u"?(e.addEventListener("pointerdown",Ce,!0),e.addEventListener("pointermove",Ce,!0),e.addEventListener("pointerup",Ce,!0)):(e.addEventListener("mousedown",Ce,!0),e.addEventListener("mousemove",Ce,!0),e.addEventListener("mouseup",Ce,!0)),r.addEventListener("beforeunload",()=>{gn(t)},{once:!0}),dt.set(r,{focus:s})}const gn=(t,r)=>{const e=Ee(t),s=ue(t);r&&s.removeEventListener("DOMContentLoaded",r),dt.has(e)&&(e.HTMLElement.prototype.focus=dt.get(e).focus,s.removeEventListener("keydown",Ct,!0),s.removeEventListener("keyup",Ct,!0),s.removeEventListener("click",hn,!0),e.removeEventListener("focus",mn,!0),e.removeEventListener("blur",pn,!1),typeof PointerEvent<"u"?(s.removeEventListener("pointerdown",Ce,!0),s.removeEventListener("pointermove",Ce,!0),s.removeEventListener("pointerup",Ce,!0)):(s.removeEventListener("mousedown",Ce,!0),s.removeEventListener("mousemove",Ce,!0),s.removeEventListener("mouseup",Ce,!0)),dt.delete(e))};function ci(t){const r=ue(t);let e;return r.readyState!=="loading"?er(t):(e=()=>{er(t)},r.addEventListener("DOMContentLoaded",e)),()=>gn(t,e)}typeof document<"u"&&ci();function di(){return Ke!=="pointer"}function bn(){return Ke}function ui(t){Ke=t,zt(t,null)}const fi=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function hi(t,r,e){let s=ue(e==null?void 0:e.target);const n=typeof window<"u"?Ee(e==null?void 0:e.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?Ee(e==null?void 0:e.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?Ee(e==null?void 0:e.target).HTMLElement:HTMLElement,o=typeof window<"u"?Ee(e==null?void 0:e.target).KeyboardEvent:KeyboardEvent;return t=t||s.activeElement instanceof n&&!fi.has(s.activeElement.type)||s.activeElement instanceof i||s.activeElement instanceof a&&s.activeElement.isContentEditable,!(t&&r==="keyboard"&&e instanceof o&&!oi[e.key])}function to(t,r,e){er(),L.useEffect(()=>{let s=(n,i)=>{hi(!!(e!=null&&e.isTextInput),n,i)&&t(di())};return qt.add(s),()=>{qt.delete(s)}},r)}function St(t){const r=ue(t),e=_e(r);if(bn()==="virtual"){let s=e;tn(()=>{_e(r)===s&&t.isConnected&&Xe(t)})}else Xe(t)}function mi(t){let{isDisabled:r,onFocus:e,onBlur:s,onFocusChange:n}=t;const i=L.useCallback(l=>{if(l.target===l.currentTarget)return s&&s(l),n&&n(!1),!0},[s,n]),a=dn(i),o=L.useCallback(l=>{const d=ue(l.target),u=d?_e(d):_e();l.target===l.currentTarget&&u===se(l.nativeEvent)&&(e&&e(l),n&&n(!0),a(l))},[n,e,a]);return{focusProps:{onFocus:!r&&(e||n||s)?o:void 0,onBlur:!r&&(s||n)?i:void 0}}}function Or(t){if(!t)return;let r=!0;return e=>{let s={...e,preventDefault(){e.preventDefault()},isDefaultPrevented(){return e.isDefaultPrevented()},stopPropagation(){r?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):r=!0},continuePropagation(){r=!1},isPropagationStopped(){return r}};t(s),r&&e.stopPropagation()}}function pi(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:Or(t.onKeyDown),onKeyUp:Or(t.onKeyUp)}}}let gi=ie.createContext(null);function bi(t){let r=L.useContext(gi)||{};nn(r,t);let{ref:e,...s}=r;return s}function wr(t,r){let{focusProps:e}=mi(t),{keyboardProps:s}=pi(t),n=Se(e,s),i=bi(r),a=t.isDisabled?{}:i,o=L.useRef(t.autoFocus);L.useEffect(()=>{o.current&&r.current&&St(r.current),o.current=!1},[r]);let l=t.excludeFromTabOrder?-1:0;return t.isDisabled&&(l=void 0),{focusableProps:Se({...n,tabIndex:l},a)}}function vi(t){let{isDisabled:r,onBlurWithin:e,onFocusWithin:s,onFocusWithinChange:n}=t,i=L.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=rn(),l=L.useCallback(f=>{f.currentTarget.contains(f.target)&&i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,o(),e&&e(f),n&&n(!1))},[e,n,i,o]),d=dn(l),u=L.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const v=ue(f.target),m=_e(v);if(!i.current.isFocusWithin&&m===se(f.nativeEvent)){s&&s(f),n&&n(!0),i.current.isFocusWithin=!0,d(f);let g=f.currentTarget;a(v,"focus",b=>{if(i.current.isFocusWithin&&!he(g,b.target)){let x=new cn("blur",new v.defaultView.FocusEvent("blur",{relatedTarget:b.target}));x.target=g,x.currentTarget=g,l(x)}},{capture:!0})}},[s,n,d,a,l]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}function wi(t){let{ref:r,onInteractOutside:e,isDisabled:s,onInteractOutsideStart:n}=t,i=L.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),a=$e(l=>{e&&yt(l,r)&&(n&&n(l),i.current.isPointerDown=!0)}),o=$e(l=>{e&&e(l)});L.useEffect(()=>{let l=i.current;if(s)return;const d=r.current,u=ue(d);if(typeof PointerEvent<"u"){let f=v=>{l.isPointerDown&&yt(v,r)&&o(v),l.isPointerDown=!1};return u.addEventListener("pointerdown",a,!0),u.addEventListener("pointerup",f,!0),()=>{u.removeEventListener("pointerdown",a,!0),u.removeEventListener("pointerup",f,!0)}}else{let f=m=>{l.ignoreEmulatedMouseEvents?l.ignoreEmulatedMouseEvents=!1:l.isPointerDown&&yt(m,r)&&o(m),l.isPointerDown=!1},v=m=>{l.ignoreEmulatedMouseEvents=!0,l.isPointerDown&&yt(m,r)&&o(m),l.isPointerDown=!1};return u.addEventListener("mousedown",a,!0),u.addEventListener("mouseup",f,!0),u.addEventListener("touchstart",a,!0),u.addEventListener("touchend",v,!0),()=>{u.removeEventListener("mousedown",a,!0),u.removeEventListener("mouseup",f,!0),u.removeEventListener("touchstart",a,!0),u.removeEventListener("touchend",v,!0)}}},[r,s,a,o])}function yt(t,r){if(t.button>0)return!1;if(t.target){const e=t.target.ownerDocument;if(!e||!e.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return r.current?!t.composedPath().includes(r.current):!1}function yi(t,r){let{elementType:e="button",isDisabled:s,onPress:n,onPressStart:i,onPressEnd:a,onPressUp:o,onPressChange:l,preventFocusOnPress:d,allowFocusWhenDisabled:u,onClick:f,href:v,target:m,rel:g,type:b="button"}=t,x;e==="button"?x={type:b,disabled:s}:x={role:"button",href:e==="a"&&!s?v:void 0,target:e==="a"?m:void 0,type:e==="input"?b:void 0,disabled:e==="input"?s:void 0,"aria-disabled":!s||e==="input"?void 0:s,rel:e==="a"?g:void 0};let{pressProps:y,isPressed:w}=jt({onPressStart:i,onPressEnd:a,onPressChange:l,onPress:n,onPressUp:o,isDisabled:s,preventFocusOnPress:d,ref:r}),{focusableProps:E}=wr(t,r);u&&(E.tabIndex=s?-1:E.tabIndex);let S=Se(E,y,Dt(t,{labelable:!0}));return{isPressed:w,buttonProps:Se(x,S,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"],onClick:T=>{f&&(f(T),console.warn("onClick is deprecated, please use onPress"))}})}}function xi(t){const r=Ee(t);if(!(t instanceof r.HTMLElement)&&!(t instanceof r.SVGElement))return!1;let{display:e,visibility:s}=t.style,n=e!=="none"&&s!=="hidden"&&s!=="collapse";if(n){const{getComputedStyle:i}=t.ownerDocument.defaultView;let{display:a,visibility:o}=i(t);n=a!=="none"&&o!=="hidden"&&o!=="collapse"}return n}function ki(t,r){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&r&&r.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function vn(t,r){return t.nodeName!=="#comment"&&xi(t)&&ki(t,r)&&(!t.parentElement||vn(t.parentElement,t))}const Mr=ie.createContext(null),tr="react-aria-focus-scope-restore";let de=null;function $i(t){let{children:r,contain:e,restoreFocus:s,autoFocus:n}=t,i=L.useRef(null),a=L.useRef(null),o=L.useRef([]),{parentNode:l}=L.useContext(Mr)||{},d=L.useMemo(()=>new nr({scopeRef:o}),[o]);we(()=>{let v=l||be.root;if(be.getTreeNode(v.scopeRef)&&de&&!Nt(de,v.scopeRef)){let m=be.getTreeNode(de);m&&(v=m)}v.addChild(d),be.addNode(d)},[d,l]),we(()=>{let v=be.getTreeNode(o);v&&(v.contain=!!e)},[e]),we(()=>{var v;let m=(v=i.current)===null||v===void 0?void 0:v.nextSibling,g=[],b=x=>x.stopPropagation();for(;m&&m!==a.current;)g.push(m),m.addEventListener(tr,b),m=m.nextSibling;return o.current=g,()=>{for(let x of g)x.removeEventListener(tr,b)}},[r]),Si(o,s,e),Ei(o,e),Ni(o,s,e),Ci(o,n),L.useEffect(()=>{const v=_e(ue(o.current?o.current[0]:void 0));let m=null;if(Ne(v,o.current)){for(let g of be.traverse())g.scopeRef&&Ne(v,g.scopeRef.current)&&(m=g);m===be.getTreeNode(o)&&(de=m.scopeRef)}},[o]),we(()=>()=>{var v,m,g;let b=(g=(m=be.getTreeNode(o))===null||m===void 0||(v=m.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&g!==void 0?g:null;(o===de||Nt(o,de))&&(!b||be.getTreeNode(b))&&(de=b),be.removeTreeNode(o)},[o]);let u=L.useMemo(()=>_i(o),[]),f=L.useMemo(()=>({focusManager:u,parentNode:d}),[d,u]);return ie.createElement(Mr.Provider,{value:f},ie.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),r,ie.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function _i(t){return{focusNext(r={}){let e=t.current,{from:s,tabbable:n,wrap:i,accept:a}=r;var o;let l=s||_e(ue((o=e[0])!==null&&o!==void 0?o:void 0)),d=e[0].previousElementSibling,u=Ve(e),f=Ue(u,{tabbable:n,accept:a},e);f.currentNode=Ne(l,e)?l:d;let v=f.nextNode();return!v&&i&&(f.currentNode=d,v=f.nextNode()),v&&Oe(v,!0),v},focusPrevious(r={}){let e=t.current,{from:s,tabbable:n,wrap:i,accept:a}=r;var o;let l=s||_e(ue((o=e[0])!==null&&o!==void 0?o:void 0)),d=e[e.length-1].nextElementSibling,u=Ve(e),f=Ue(u,{tabbable:n,accept:a},e);f.currentNode=Ne(l,e)?l:d;let v=f.previousNode();return!v&&i&&(f.currentNode=d,v=f.previousNode()),v&&Oe(v,!0),v},focusFirst(r={}){let e=t.current,{tabbable:s,accept:n}=r,i=Ve(e),a=Ue(i,{tabbable:s,accept:n},e);a.currentNode=e[0].previousElementSibling;let o=a.nextNode();return o&&Oe(o,!0),o},focusLast(r={}){let e=t.current,{tabbable:s,accept:n}=r,i=Ve(e),a=Ue(i,{tabbable:s,accept:n},e);a.currentNode=e[e.length-1].nextElementSibling;let o=a.previousNode();return o&&Oe(o,!0),o}}}function Ve(t){return t[0].parentElement}function ct(t){let r=be.getTreeNode(de);for(;r&&r.scopeRef!==t;){if(r.contain)return!1;r=r.parent}return!0}function Ei(t,r){let e=L.useRef(void 0),s=L.useRef(void 0);we(()=>{let n=t.current;if(!r){s.current&&(cancelAnimationFrame(s.current),s.current=void 0);return}const i=ue(n?n[0]:void 0);let a=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!ct(t)||d.isComposing)return;let u=_e(i),f=t.current;if(!f||!Ne(u,f))return;let v=Ve(f),m=Ue(v,{tabbable:!0},f);if(!u)return;m.currentNode=u;let g=d.shiftKey?m.previousNode():m.nextNode();g||(m.currentNode=d.shiftKey?f[f.length-1].nextElementSibling:f[0].previousElementSibling,g=d.shiftKey?m.previousNode():m.nextNode()),d.preventDefault(),g&&Oe(g,!0)},o=d=>{(!de||Nt(de,t))&&Ne(se(d),t.current)?(de=t,e.current=se(d)):ct(t)&&!We(se(d),t)?e.current?e.current.focus():de&&de.current&&rr(de.current):ct(t)&&(e.current=se(d))},l=d=>{s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{let u=bn(),f=(u==="virtual"||u===null)&&gr()&&en(),v=_e(i);if(!f&&v&&ct(t)&&!We(v,t)){de=t;let g=se(d);if(g&&g.isConnected){var m;e.current=g,(m=e.current)===null||m===void 0||m.focus()}else de.current&&rr(de.current)}})};return i.addEventListener("keydown",a,!1),i.addEventListener("focusin",o,!1),n==null||n.forEach(d=>d.addEventListener("focusin",o,!1)),n==null||n.forEach(d=>d.addEventListener("focusout",l,!1)),()=>{i.removeEventListener("keydown",a,!1),i.removeEventListener("focusin",o,!1),n==null||n.forEach(d=>d.removeEventListener("focusin",o,!1)),n==null||n.forEach(d=>d.removeEventListener("focusout",l,!1))}},[t,r]),we(()=>()=>{s.current&&cancelAnimationFrame(s.current)},[s])}function wn(t){return We(t)}function Ne(t,r){return!t||!r?!1:r.some(e=>e.contains(t))}function We(t,r=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of be.traverse(be.getTreeNode(r)))if(e&&Ne(t,e.current))return!0;return!1}function ji(t){return We(t,de)}function Nt(t,r){var e;let s=(e=be.getTreeNode(r))===null||e===void 0?void 0:e.parent;for(;s;){if(s.scopeRef===t)return!0;s=s.parent}return!1}function Oe(t,r=!1){if(t!=null&&!r)try{St(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function yn(t,r=!0){let e=t[0].previousElementSibling,s=Ve(t),n=Ue(s,{tabbable:r},t);n.currentNode=e;let i=n.nextNode();return r&&!i&&(s=Ve(t),n=Ue(s,{tabbable:!1},t),n.currentNode=e,i=n.nextNode()),i}function rr(t,r=!0){Oe(yn(t,r))}function Ci(t,r){const e=ie.useRef(r);L.useEffect(()=>{if(e.current){de=t;const s=ue(t.current?t.current[0]:void 0);!Ne(_e(s),de.current)&&t.current&&rr(t.current)}e.current=!1},[t])}function Si(t,r,e){we(()=>{if(r||e)return;let s=t.current;const n=ue(s?s[0]:void 0);let i=a=>{let o=se(a);Ne(o,t.current)?de=t:wn(o)||(de=null)};return n.addEventListener("focusin",i,!1),s==null||s.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{n.removeEventListener("focusin",i,!1),s==null||s.forEach(a=>a.removeEventListener("focusin",i,!1))}},[t,r,e])}function Fr(t){let r=be.getTreeNode(de);for(;r&&r.scopeRef!==t;){if(r.nodeToRestore)return!1;r=r.parent}return(r==null?void 0:r.scopeRef)===t}function Ni(t,r,e){const s=L.useRef(typeof document<"u"?_e(ue(t.current?t.current[0]:void 0)):null);we(()=>{let n=t.current;const i=ue(n?n[0]:void 0);if(!r||e)return;let a=()=>{(!de||Nt(de,t))&&Ne(_e(i),t.current)&&(de=t)};return i.addEventListener("focusin",a,!1),n==null||n.forEach(o=>o.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),n==null||n.forEach(o=>o.removeEventListener("focusin",a,!1))}},[t,e]),we(()=>{const n=ue(t.current?t.current[0]:void 0);if(!r)return;let i=a=>{if(a.key!=="Tab"||a.altKey||a.ctrlKey||a.metaKey||!ct(t)||a.isComposing)return;let o=n.activeElement;if(!We(o,t)||!Fr(t))return;let l=be.getTreeNode(t);if(!l)return;let d=l.nodeToRestore,u=Ue(n.body,{tabbable:!0});u.currentNode=o;let f=a.shiftKey?u.previousNode():u.nextNode();if((!d||!d.isConnected||d===n.body)&&(d=void 0,l.nodeToRestore=void 0),(!f||!We(f,t))&&d){u.currentNode=d;do f=a.shiftKey?u.previousNode():u.nextNode();while(We(f,t));a.preventDefault(),a.stopPropagation(),f?Oe(f,!0):wn(d)?Oe(d,!0):o.blur()}};return e||n.addEventListener("keydown",i,!0),()=>{e||n.removeEventListener("keydown",i,!0)}},[t,r,e]),we(()=>{const n=ue(t.current?t.current[0]:void 0);if(!r)return;let i=be.getTreeNode(t);if(i){var a;return i.nodeToRestore=(a=s.current)!==null&&a!==void 0?a:void 0,()=>{let o=be.getTreeNode(t);if(!o)return;let l=o.nodeToRestore,d=_e(n);if(r&&l&&(d&&We(d,t)||d===n.body&&Fr(t))){let u=be.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let f=u.getTreeNode(t);for(;f;){if(f.nodeToRestore&&f.nodeToRestore.isConnected){Br(f.nodeToRestore);return}f=f.parent}for(f=u.getTreeNode(t);f;){if(f.scopeRef&&f.scopeRef.current&&be.getTreeNode(f.scopeRef)){let v=yn(f.scopeRef.current,!0);Br(v);return}f=f.parent}}})}}}},[t,r])}function Br(t){t.dispatchEvent(new CustomEvent(tr,{bubbles:!0,cancelable:!0}))&&Oe(t)}function Ue(t,r,e){let s=r!=null&&r.tabbable?Ga:sn,n=(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null,i=ue(n),a=Na(i,t||i,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var l;return!(r==null||(l=r.from)===null||l===void 0)&&l.contains(o)?NodeFilter.FILTER_REJECT:s(o)&&vn(o)&&(!e||Ne(o,e))&&(!(r!=null&&r.accept)||r.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return r!=null&&r.from&&(a.currentNode=r.from),a}class yr{get size(){return this.fastMap.size}getTreeNode(r){return this.fastMap.get(r)}addTreeNode(r,e,s){let n=this.fastMap.get(e??null);if(!n)return;let i=new nr({scopeRef:r});n.addChild(i),i.parent=n,this.fastMap.set(r,i),s&&(i.nodeToRestore=s)}addNode(r){this.fastMap.set(r.scopeRef,r)}removeTreeNode(r){if(r===null)return;let e=this.fastMap.get(r);if(!e)return;let s=e.parent;for(let i of this.traverse())i!==e&&e.nodeToRestore&&i.nodeToRestore&&e.scopeRef&&e.scopeRef.current&&Ne(i.nodeToRestore,e.scopeRef.current)&&(i.nodeToRestore=e.nodeToRestore);let n=e.children;s&&(s.removeChild(e),n.size>0&&n.forEach(i=>s&&s.addChild(i))),this.fastMap.delete(e.scopeRef)}*traverse(r=this.root){if(r.scopeRef!=null&&(yield r),r.children.size>0)for(let e of r.children)yield*this.traverse(e)}clone(){var r;let e=new yr;var s;for(let n of this.traverse())e.addTreeNode(n.scopeRef,(s=(r=n.parent)===null||r===void 0?void 0:r.scopeRef)!==null&&s!==void 0?s:null,n.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new nr({scopeRef:null}),this.fastMap.set(null,this.root)}}class nr{addChild(r){this.children.add(r),r.parent=this}removeChild(r){this.children.delete(r),r.parent=void 0}constructor(r){this.children=new Set,this.contain=!1,this.scopeRef=r.scopeRef}}let be=new yr;const xn={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},kn={...xn,customError:!0,valid:!1},ot={isInvalid:!1,validationDetails:xn,validationErrors:[]},Ti=L.createContext({}),ar="__formValidationState"+Date.now();function $n(t){if(t[ar]){let{realtimeValidation:r,displayValidation:e,updateValidation:s,resetValidation:n,commitValidation:i}=t[ar];return{realtimeValidation:r,displayValidation:e,updateValidation:s,resetValidation:n,commitValidation:i}}return Li(t)}function Li(t){let{isInvalid:r,validationState:e,name:s,value:n,builtinValidation:i,validate:a,validationBehavior:o="aria"}=t;e&&(r||(r=e==="invalid"));let l=r!==void 0?{isInvalid:r,validationErrors:[],validationDetails:kn}:null,d=L.useMemo(()=>{if(!a||n==null)return null;let I=Ai(a,n);return Wr(I)},[a,n]);i!=null&&i.validationDetails.valid&&(i=void 0);let u=L.useContext(Ti),f=L.useMemo(()=>s?Array.isArray(s)?s.flatMap(I=>ir(u[I])):ir(u[s]):[],[u,s]),[v,m]=L.useState(u),[g,b]=L.useState(!1);u!==v&&(m(u),b(!1));let x=L.useMemo(()=>Wr(g?[]:f),[g,f]),y=L.useRef(ot),[w,E]=L.useState(ot),S=L.useRef(ot),T=()=>{if(!F)return;M(!1);let I=d||i||y.current;Vt(I,S.current)||(S.current=I,E(I))},[F,M]=L.useState(!1);return L.useEffect(T),{realtimeValidation:l||x||d||i||ot,displayValidation:o==="native"?l||x||w:l||x||d||i||w,updateValidation(I){o==="aria"&&!Vt(w,I)?E(I):y.current=I},resetValidation(){let I=ot;Vt(I,S.current)||(S.current=I,E(I)),o==="native"&&M(!1),b(!0)},commitValidation(){o==="native"&&M(!0),b(!0)}}}function ir(t){return t?Array.isArray(t)?t:[t]:[]}function Ai(t,r){if(typeof t=="function"){let e=t(r);if(e&&typeof e!="boolean")return ir(e)}return[]}function Wr(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:kn}:null}function Vt(t,r){return t===r?!0:!!t&&!!r&&t.isInvalid===r.isInvalid&&t.validationErrors.length===r.validationErrors.length&&t.validationErrors.every((e,s)=>e===r.validationErrors[s])&&Object.entries(t.validationDetails).every(([e,s])=>r.validationDetails[e]===s)}function _n(t,r,e){let{validationBehavior:s,focus:n}=t;we(()=>{if(s==="native"&&(e!=null&&e.current)&&!e.current.disabled){let l=r.realtimeValidation.isInvalid?r.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";e.current.setCustomValidity(l),e.current.hasAttribute("title")||(e.current.title=""),r.realtimeValidation.isInvalid||r.updateValidation(Ii(e.current))}});let i=$e(()=>{r.resetValidation()}),a=$e(l=>{var d;r.displayValidation.isInvalid||r.commitValidation();let u=e==null||(d=e.current)===null||d===void 0?void 0:d.form;if(!l.defaultPrevented&&e&&u&&Di(u)===e.current){var f;n?n():(f=e.current)===null||f===void 0||f.focus(),ui("keyboard")}l.preventDefault()}),o=$e(()=>{r.commitValidation()});L.useEffect(()=>{let l=e==null?void 0:e.current;if(!l)return;let d=l.form;return l.addEventListener("invalid",a),l.addEventListener("change",o),d==null||d.addEventListener("reset",i),()=>{l.removeEventListener("invalid",a),l.removeEventListener("change",o),d==null||d.removeEventListener("reset",i)}},[e,a,o,i,s])}function Pi(t){let r=t.validity;return{badInput:r.badInput,customError:r.customError,patternMismatch:r.patternMismatch,rangeOverflow:r.rangeOverflow,rangeUnderflow:r.rangeUnderflow,stepMismatch:r.stepMismatch,tooLong:r.tooLong,tooShort:r.tooShort,typeMismatch:r.typeMismatch,valueMissing:r.valueMissing,valid:r.valid}}function Ii(t){return{isInvalid:!t.validity.valid,validationDetails:Pi(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function Di(t){for(let r=0;r<t.elements.length;r++){let e=t.elements[r];if(!e.validity.valid)return e}return null}function Ri(t,r,e){let{isDisabled:s=!1,isReadOnly:n=!1,value:i,name:a,children:o,"aria-label":l,"aria-labelledby":d,validationState:u="valid",isInvalid:f}=t,v=F=>{F.stopPropagation(),r.setSelected(F.target.checked)},m=o!=null,g=l!=null||d!=null;!m&&!g&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:b,isPressed:x}=jt({isDisabled:s}),{pressProps:y,isPressed:w}=jt({onPress(){var F;r.toggle(),(F=e.current)===null||F===void 0||F.focus()},isDisabled:s||n}),{focusableProps:E}=wr(t,e),S=Se(b,E),T=Dt(t,{labelable:!0});return an(e,r.isSelected,r.setSelected),{labelProps:Se(y,{onClick:F=>F.preventDefault()}),inputProps:Se(T,{"aria-invalid":f||u==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-controls":t["aria-controls"],"aria-readonly":n||void 0,onChange:v,disabled:s,...i==null?{}:{value:i},name:a,type:"checkbox",...S}),isSelected:r.isSelected,isPressed:x||w,isDisabled:s,isReadOnly:n,isInvalid:f||u==="invalid"}}function zi(t,r,e){let s=$n({...t,value:r.isSelected}),{isInvalid:n,validationErrors:i,validationDetails:a}=s.displayValidation,{labelProps:o,inputProps:l,isSelected:d,isPressed:u,isDisabled:f,isReadOnly:v}=Ri({...t,isInvalid:n},r,e);_n(t,s,e);let{isIndeterminate:m,isRequired:g,validationBehavior:b="aria"}=t;L.useEffect(()=>{e.current&&(e.current.indeterminate=!!m)});let{pressProps:x}=jt({isDisabled:f||v,onPress(){let{[ar]:y}=t,{commitValidation:w}=y||s;w()}});return{labelProps:Se(o,x),inputProps:{...l,checked:d,"aria-required":g&&b==="aria"||void 0,required:g&&b==="native"},isSelected:d,isPressed:u,isDisabled:f,isReadOnly:v,isInvalid:n,validationErrors:i,validationDetails:a}}function Oi(t){let{id:r,label:e,"aria-labelledby":s,"aria-label":n,labelElementType:i="label"}=t;r=_t(r);let a=_t(),o={};e?(s=s?`${a} ${s}`:a,o={id:a,htmlFor:i==="label"?r:void 0}):!s&&!n&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let l=Ha({id:r,"aria-label":n,"aria-labelledby":s});return{labelProps:o,fieldProps:l}}function Mi(t){let{description:r,errorMessage:e,isInvalid:s,validationState:n}=t,{labelProps:i,fieldProps:a}=Oi(t),o=Jt([!!r,!!e,s,n]),l=Jt([!!r,!!e,s,n]);return a=Se(a,{"aria-describedby":[o,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:i,fieldProps:a,descriptionProps:{id:o},errorMessageProps:{id:l}}}function Fi(t={}){let{isReadOnly:r}=t,[e,s]=on(t.isSelected,t.defaultSelected||!1,t.onChange);function n(a){r||s(a)}function i(){r||s(!e)}return{isSelected:e,setSelected:n,toggle:i}}function Bi(t,r){let{inputElementType:e="input",isDisabled:s=!1,isRequired:n=!1,isReadOnly:i=!1,type:a="text",validationBehavior:o="aria"}=t,[l,d]=on(t.value,t.defaultValue||"",t.onChange),{focusableProps:u}=wr(t,r),f=$n({...t,value:l}),{isInvalid:v,validationErrors:m,validationDetails:g}=f.displayValidation,{labelProps:b,fieldProps:x,descriptionProps:y,errorMessageProps:w}=Mi({...t,isInvalid:v,errorMessage:t.errorMessage||m}),E=Dt(t,{labelable:!0});const S={type:a,pattern:t.pattern};return an(r,l,d),_n(t,f,r),L.useEffect(()=>{if(r.current instanceof Ee(r.current).HTMLTextAreaElement){let T=r.current;Object.defineProperty(T,"defaultValue",{get:()=>T.value,set:()=>{},configurable:!0})}},[r]),{labelProps:b,inputProps:Se(E,e==="input"?S:void 0,{disabled:s,readOnly:i,required:n&&o==="native","aria-required":n&&o==="aria"||void 0,"aria-invalid":v||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],"aria-controls":t["aria-controls"],value:l,onChange:T=>d(T.target.value),autoComplete:t.autoComplete,autoCapitalize:t.autoCapitalize,maxLength:t.maxLength,minLength:t.minLength,name:t.name,placeholder:t.placeholder,inputMode:t.inputMode,autoCorrect:t.autoCorrect,spellCheck:t.spellCheck,[parseInt(ie.version,10)>=17?"enterKeyHint":"enterkeyhint"]:t.enterKeyHint,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...u,...x}),descriptionProps:y,errorMessageProps:w,isInvalid:v,validationErrors:m,validationDetails:g}}const Ie=[];function Wi(t,r){let{onClose:e,shouldCloseOnBlur:s,isOpen:n,isDismissable:i=!1,isKeyboardDismissDisabled:a=!1,shouldCloseOnInteractOutside:o}=t;L.useEffect(()=>{if(n&&!Ie.includes(r))return Ie.push(r),()=>{let g=Ie.indexOf(r);g>=0&&Ie.splice(g,1)}},[n,r]);let l=()=>{Ie[Ie.length-1]===r&&e&&e()},d=g=>{(!o||o(g.target))&&Ie[Ie.length-1]===r&&(g.stopPropagation(),g.preventDefault())},u=g=>{(!o||o(g.target))&&(Ie[Ie.length-1]===r&&(g.stopPropagation(),g.preventDefault()),l())},f=g=>{g.key==="Escape"&&!a&&!g.nativeEvent.isComposing&&(g.stopPropagation(),g.preventDefault(),l())};wi({ref:r,onInteractOutside:i&&n?u:void 0,onInteractOutsideStart:d});let{focusWithinProps:v}=vi({isDisabled:!s,onBlurWithin:g=>{!g.relatedTarget||ji(g.relatedTarget)||(!o||o(g.relatedTarget))&&(e==null||e())}}),m=g=>{g.target===g.currentTarget&&g.preventDefault()};return{overlayProps:{onKeyDown:f,...v},underlayProps:{onPointerDown:m}}}const Tt=ie.createContext(null);function Ui(t){let{children:r}=t,e=L.useContext(Tt),[s,n]=L.useState(0),i=L.useMemo(()=>({parent:e,modalCount:s,addModal(){n(a=>a+1),e&&e.addModal()},removeModal(){n(a=>a-1),e&&e.removeModal()}}),[e,s]);return ie.createElement(Tt.Provider,{value:i},r)}function Vi(){let t=L.useContext(Tt);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function Hi(t){let{modalProviderProps:r}=Vi();return ie.createElement("div",{"data-overlay-container":!0,...t,...r})}function Ki(t){return ie.createElement(Ui,null,ie.createElement(Hi,t))}function Zi(t){let r=L.useContext(Tt);if(!r)throw new Error("Modal is not contained within a provider");return L.useEffect(()=>{if(!(!r||!r.parent))return r.parent.addModal(),()=>{r&&r.parent&&r.parent.removeModal()}},[r,r.parent,void 0]),{modalProps:{"data-ismodal":!0}}}const Ji=ie.createContext(null);function Gi(){let t=L.useContext(Ji),r=t==null?void 0:t.setContain;we(()=>{r==null||r(!0)},[r])}function Yi(t,r){let{role:e="dialog"}=t,s=Jt();s=t["aria-label"]?void 0:s;let n=L.useRef(!1);return L.useEffect(()=>{if(r.current&&!r.current.contains(document.activeElement)){St(r.current);let i=setTimeout(()=>{document.activeElement===r.current&&(n.current=!0,r.current&&(r.current.blur(),St(r.current)),n.current=!1)},500);return()=>{clearTimeout(i)}}},[r]),Gi(),{dialogProps:{...Dt(t,{labelable:!0}),role:e,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||s,onBlur:i=>{n.current&&i.stopPropagation()}},titleProps:{id:s}}}const ke=L.forwardRef(({onPress:t,onPressChange:r,onPressStart:e,onPressEnd:s,onPressUp:n,isDisabled:i=!1,children:a,variant:o="contained",color:l="primary",size:d="medium",className:u="",startIcon:f,endIcon:v,fullWidth:m=!1,loading:g=!1,loadingText:b,disableElevation:x=!1,disableRipple:y=!1,rounded:w=!1,type:E="button",form:S,name:T,value:F,href:M,target:j,rel:N,...I},z)=>{const k=L.useRef(null),$=M?"a":"button",h=i||g,D={...I,elementType:$,isDisabled:h,onPress:t,onPressChange:r,onPressStart:e,onPressEnd:s,onPressUp:n,href:M,target:j,rel:N},{buttonProps:Q,isPressed:K}=yi(D,k),re="inline-flex items-center justify-center font-medium transition-all duration-150 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-slate-900",W={small:"px-3 py-1.5 text-xs",medium:"px-4 py-2 text-sm",large:"px-6 py-2.5 text-base"}[d];let U="";o==="contained"?(l==="primary"?U=h?"bg-indigo-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white shadow-md hover:shadow-lg":l==="secondary"?U=h?"bg-amber-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white shadow-md hover:shadow-lg":l==="success"?U=h?"bg-emerald-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 active:bg-emerald-800 text-white shadow-md hover:shadow-lg":l==="warning"?U=h?"bg-amber-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white shadow-md hover:shadow-lg":l==="error"?U=h?"bg-red-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white shadow-md hover:shadow-lg":l==="info"?U=h?"bg-sky-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-sky-600 hover:bg-sky-700 active:bg-sky-800 text-white shadow-md hover:shadow-lg":U=h?"bg-slate-600/40 text-white/60 shadow-none cursor-not-allowed":"bg-slate-700 hover:bg-slate-800 text-white shadow-md hover:shadow-lg",K&&!h&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-800":l==="secondary"?U+=" bg-amber-700":l==="success"?U+=" bg-emerald-800":l==="warning"?U+=" bg-amber-700":l==="error"?U+=" bg-red-800":l==="info"?U+=" bg-sky-800":U+=" bg-slate-900")):o==="outlined"?(l==="primary"?U=h?"border border-indigo-500/30 text-indigo-500/40 cursor-not-allowed":"border border-indigo-500/70 hover:border-indigo-500 text-indigo-500 hover:bg-indigo-500/10 active:bg-indigo-500/20":l==="secondary"?U=h?"border border-amber-500/30 text-amber-500/40 cursor-not-allowed":"border border-amber-500/70 hover:border-amber-500 text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="success"?U=h?"border border-emerald-500/30 text-emerald-500/40 cursor-not-allowed":"border border-emerald-500/70 hover:border-emerald-500 text-emerald-500 hover:bg-emerald-500/10 active:bg-emerald-500/20":l==="warning"?U=h?"border border-amber-500/30 text-amber-500/40 cursor-not-allowed":"border border-amber-500/70 hover:border-amber-500 text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="error"?U=h?"border border-red-500/30 text-red-500/40 cursor-not-allowed":"border border-red-500/70 hover:border-red-500 text-red-500 hover:bg-red-500/10 active:bg-red-500/20":l==="info"?U=h?"border border-sky-500/30 text-sky-500/40 cursor-not-allowed":"border border-sky-500/70 hover:border-sky-500 text-sky-500 hover:bg-sky-500/10 active:bg-sky-500/20":U=h?"border border-slate-400/30 text-slate-400/50 cursor-not-allowed":"border border-slate-400/70 hover:border-slate-300 text-slate-300 hover:bg-slate-300/10",K&&!h&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/20":l==="secondary"?U+=" bg-amber-500/20":l==="success"?U+=" bg-emerald-500/20":l==="warning"?U+=" bg-amber-500/20":l==="error"?U+=" bg-red-500/20":l==="info"?U+=" bg-sky-500/20":U+=" bg-slate-300/20")):o==="text"?(l==="primary"?U=h?"text-indigo-500/40 cursor-not-allowed":"text-indigo-500 hover:bg-indigo-500/10 active:bg-indigo-500/20":l==="secondary"?U=h?"text-amber-500/40 cursor-not-allowed":"text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="success"?U=h?"text-emerald-500/40 cursor-not-allowed":"text-emerald-500 hover:bg-emerald-500/10 active:bg-emerald-500/20":l==="warning"?U=h?"text-amber-500/40 cursor-not-allowed":"text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="error"?U=h?"text-red-500/40 cursor-not-allowed":"text-red-500 hover:bg-red-500/10 active:bg-red-500/20":l==="info"?U=h?"text-sky-500/40 cursor-not-allowed":"text-sky-500 hover:bg-sky-500/10 active:bg-sky-500/20":U=h?"text-slate-400/50 cursor-not-allowed":"text-slate-300 hover:bg-slate-300/10",K&&!h&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/20":l==="secondary"?U+=" bg-amber-500/20":l==="success"?U+=" bg-emerald-500/20":l==="warning"?U+=" bg-amber-500/20":l==="error"?U+=" bg-red-500/20":l==="info"?U+=" bg-sky-500/20":U+=" bg-slate-300/20")):o==="glass"?(l==="primary"?U=h?"bg-indigo-500/10 text-indigo-500/40 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-indigo-500/10 hover:bg-indigo-500/20 active:bg-indigo-500/30 text-indigo-400 border border-white/10 hover:border-white/20 backdrop-blur-md":l==="secondary"?U=h?"bg-amber-500/10 text-amber-500/40 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-amber-500/10 hover:bg-amber-500/20 active:bg-amber-500/30 text-amber-400 border border-white/10 hover:border-white/20 backdrop-blur-md":U=h?"bg-white/5 text-white/30 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-white/5 hover:bg-white/10 active:bg-white/15 text-white/80 border border-white/10 hover:border-white/20 backdrop-blur-md",K&&!h&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/30":l==="secondary"?U+=" bg-amber-500/30":U+=" bg-white/15")):o==="gradient"&&(l==="primary"?U=h?"bg-gradient-to-r from-indigo-500/40 to-purple-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-md hover:shadow-lg":l==="secondary"?U=h?"bg-gradient-to-r from-amber-500/40 to-orange-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white shadow-md hover:shadow-lg":U=h?"bg-gradient-to-r from-slate-700/40 to-slate-800/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 text-white shadow-md hover:shadow-lg",K&&!h&&(l==="primary"?U+=" from-indigo-700 to-purple-700":l==="secondary"?U+=" from-amber-600 to-orange-600":U+=" from-slate-800 to-slate-900"));const X=`
    ${re}
    ${W}
    ${U}
    ${w?"rounded-full":"rounded-[var(--radius-md)]"}
    ${x?"shadow-none hover:shadow-none":""}
    ${m?"w-full":""}
    ${u}
  `.trim(),Y=g?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b||a]}):c.jsxs(c.Fragment,{children:[f&&c.jsx("span",{className:"mr-2 -ml-1",children:f}),a,v&&c.jsx("span",{className:"ml-2 -mr-1",children:v})]});return ie.useImperativeHandle(z,()=>k.current),$==="a"?c.jsx("a",{...Q,ref:k,className:X,children:Y}):c.jsx("button",{...Q,ref:k,className:X,type:E,form:S,name:T,value:F,children:Y})});ke.displayName="Button";const kt=L.forwardRef(({children:t,className:r="",elevation:e=1,variant:s="elevation",hover:n=!1,sx:i={},...a},o)=>{const l={};i.width&&(l.width=i.width),i.minWidth&&(l.minWidth=i.minWidth),i.maxWidth&&(l.maxWidth=i.maxWidth),i.height&&(l.height=i.height),i.minHeight&&(l.minHeight=i.minHeight),i.maxHeight&&(l.maxHeight=i.maxHeight),i.mt&&(l.marginTop=`${i.mt*.25}rem`),i.mb&&(l.marginBottom=`${i.mb*.25}rem`),i.ml&&(l.marginLeft=`${i.ml*.25}rem`),i.mr&&(l.marginRight=`${i.mr*.25}rem`),i.mx&&(l.marginLeft=l.marginRight=`${i.mx*.25}rem`),i.my&&(l.marginTop=l.marginBottom=`${i.my*.25}rem`),i.m&&(l.margin=`${i.m*.25}rem`);const d=s==="elevation"?{0:"",1:"shadow-sm ring-1 ring-white/5 dark:ring-slate-800/50",2:"shadow ring-1 ring-white/10 dark:ring-slate-800/50",3:"shadow-md",4:"shadow-lg",5:"shadow-xl"}[e]:"";let u="";s==="outlined"?u="border border-white/10 dark:border-slate-700/50 bg-white/5 dark:bg-slate-900/30 backdrop-blur-sm":s==="filled"?u="bg-white/10 dark:bg-slate-800/70":s==="glass"?u="glass-effect":s==="frost"?u="frost-glass":u="bg-white/5 dark:bg-slate-900/70 backdrop-blur-sm";const f=n?"hover-lift":"";return c.jsx("div",{ref:o,className:`
        rounded-[var(--radius-lg)]
        overflow-hidden
        transition-all
        duration-200
        ${d}
        ${u}
        ${f}
        ${r}
      `,style:l,...a,children:t})});kt.displayName="Card";const sr=L.forwardRef(({title:t,subheader:r,avatar:e,action:s,divider:n=!0,className:i="",sx:a={},...o},l)=>{const d={},u=n?"border-b border-white/5 dark:border-slate-700/30":"";return c.jsxs("div",{ref:l,className:`
        flex items-center px-5 py-4 ${u}
        ${i}
      `,style:d,...o,children:[e&&c.jsx("div",{className:"mr-4 flex-shrink-0",children:e}),c.jsxs("div",{className:"flex-grow min-w-0",children:[t&&c.jsx("div",{className:"text-lg font-medium text-slate-50 dark:text-white truncate",children:t}),r&&c.jsx("div",{className:"text-sm text-slate-300 dark:text-slate-400 mt-0.5 truncate",children:r})]}),s&&c.jsx("div",{className:"ml-auto flex-shrink-0",children:s})]})});sr.displayName="CardHeader";const $t=L.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const i={};return c.jsx("div",{ref:n,className:`px-5 py-4 last:pb-6 text-slate-300 ${r}`,style:i,...s,children:t})});$t.displayName="CardContent";const Xi=L.forwardRef(({component:t="div",image:r,src:e,alt:s="",height:n,overlay:i,className:a="",sx:o={},...l},d)=>{const u={};n&&(u.height=typeof n=="number"?`${n}px`:n);const f=r||e;return t==="img"?c.jsxs("div",{className:"relative",children:[c.jsx("img",{ref:d,src:f,alt:s,className:`w-full object-cover ${a}`,style:u,...l}),i&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end",children:c.jsx("div",{className:"p-4 text-white w-full",children:i})})]}):c.jsx("div",{ref:d,className:`bg-cover bg-center relative ${a}`,style:{...u,backgroundImage:f?`url(${f})`:void 0},...l,children:i&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end",children:c.jsx("div",{className:"p-4 text-white w-full",children:i})})})});Xi.displayName="CardMedia";const qi=L.forwardRef(({children:t,className:r="",disableSpacing:e=!1,divider:s=!0,sx:n={},...i},a)=>{const o={},l=e?"":"space-x-2",d=s?"border-t border-white/5 dark:border-slate-700/30":"";return c.jsx("div",{ref:a,className:`
        flex items-center px-4 py-3 ${l} ${d}
        ${r}
      `,style:o,...i,children:t})});qi.displayName="CardActions";const Qi=L.forwardRef(({color:t="primary",size:r="medium",className:e="",sx:s={},...n},i)=>{const a=Fi(n),o=L.useRef(null),{inputProps:l}=zi(n,a,o),d=r==="small"?"h-4 w-4":r==="large"?"h-6 w-6":"h-5 w-5";let u="";switch(t){case"primary":u="focus:ring-primary-500 text-primary-500";break;case"secondary":u="focus:ring-secondary-500 text-secondary-500";break;case"error":u="focus:ring-red-500 text-red-500";break;case"warning":u="focus:ring-yellow-500 text-yellow-500";break;case"info":u="focus:ring-blue-500 text-blue-500";break;case"success":u="focus:ring-green-500 text-green-500";break;default:u="focus:ring-slate-500 text-slate-500"}const f={};return s.margin&&(f.margin=s.margin),s.marginLeft&&(f.marginLeft=s.marginLeft),s.marginRight&&(f.marginRight=s.marginRight),s.marginTop&&(f.marginTop=s.marginTop),s.marginBottom&&(f.marginBottom=s.marginBottom),ie.useImperativeHandle(i,()=>o.current),c.jsx("input",{type:"checkbox",ref:o,...l,className:`
        ${d}
        ${u}
        bg-white dark:bg-slate-800 
        border-gray-300 dark:border-gray-600 
        rounded 
        focus:ring-2 focus:ring-offset-2 
        dark:focus:ring-offset-slate-900
        transition-colors
        ${e}
      `,style:f})});Qi.displayName="Checkbox";const es=L.forwardRef(({label:t,color:r="default",size:e="medium",variant:s="filled",icon:n,onClick:i,onDelete:a,className:o="",disabled:l=!1},d)=>{let u="inline-flex items-center rounded-full font-medium transition-colors";const f=i&&!l?"cursor-pointer hover:opacity-90 active:opacity-80":"",v={small:"text-xs px-2 py-0.5 h-6",medium:"text-sm px-3 py-1 h-8"}[e];let m="";s==="filled"?m={default:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200",primary:"bg-primary-600 text-white",secondary:"bg-secondary-600 text-white",success:"bg-green-600 text-white",error:"bg-red-600 text-white",warning:"bg-amber-600 text-white",info:"bg-blue-600 text-white"}[r]:s==="outlined"?m={default:"border border-slate-300 text-slate-700 dark:border-slate-700 dark:text-slate-300",primary:"border border-primary-600/70 text-primary-600 dark:text-primary-500",secondary:"border border-secondary-600/70 text-secondary-600 dark:text-secondary-500",success:"border border-green-600/70 text-green-600 dark:text-green-500",error:"border border-red-600/70 text-red-600 dark:text-red-500",warning:"border border-amber-600/70 text-amber-600 dark:text-amber-500",info:"border border-blue-600/70 text-blue-600 dark:text-blue-500"}[r]:s==="soft"&&(m={default:"bg-slate-100 text-slate-800 dark:bg-slate-800/60 dark:text-slate-300",primary:"bg-primary-100/20 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400",secondary:"bg-secondary-100/20 text-secondary-700 dark:bg-secondary-900/30 dark:text-secondary-400",success:"bg-green-100/20 text-green-700 dark:bg-green-900/30 dark:text-green-400",error:"bg-red-100/20 text-red-700 dark:bg-red-900/30 dark:text-red-400",warning:"bg-amber-100/20 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",info:"bg-blue-100/20 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}[r]),l&&(u+=" opacity-50 cursor-default pointer-events-none");const g=`
    ml-1 
    -mr-1
    rounded-full 
    h-5 
    w-5 
    inline-flex 
    items-center 
    justify-center 
    hover:bg-black/10
    dark:hover:bg-white/10 
    transition-colors
    ${e==="small"?"text-xs":"text-sm"}
  `;return c.jsxs("div",{ref:d,className:`${u} ${v} ${m} ${f} ${o}`,onClick:!l&&i?i:void 0,children:[n&&c.jsx("span",{className:"mr-1 -ml-0.5",children:n}),c.jsx("span",{className:"truncate",children:t}),a&&c.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),!l&&a&&a(b)},className:g,disabled:l,"aria-label":"Remove",children:c.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})});es.displayName="Chip";const ut=({size:t=40,color:r="primary",thickness:e=3.6,className:s="",sx:n={}})=>{const i={width:`${t}px`,height:`${t}px`,...n},a={primary:"border-blue-500",secondary:"border-purple-500",default:"border-slate-200"};return c.jsx("div",{className:`
        inline-block 
        rounded-full 
        border-solid 
        animate-spin 
        ${a[r]}
        ${s}
      `,style:{borderWidth:`${e}px`,borderTopColor:"transparent",borderRightColor:"transparent",...i},role:"progressbar"})},En=L.createContext(null),xr=({open:t,onClose:r,children:e,maxWidth:s="sm",fullWidth:n=!1,className:i="",title:a})=>{const o=L.useRef(null);L.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),Wi({isOpen:t,onClose:r,isDismissable:!0},o);const{modalProps:l}=Zi(),d={role:"dialog",...a&&{"aria-label":a}},{dialogProps:u,titleProps:f}=Yi(d,o);if(!t)return null;const v=()=>{switch(s){case"xs":return"max-w-xs";case"sm":return"max-w-md";case"md":return"max-w-2xl";case"lg":return"max-w-4xl";case"xl":return"max-w-7xl";case"full":return"max-w-[calc(100%-2rem)]";default:return"max-w-md"}},m=c.jsx(En.Provider,{value:f,children:c.jsxs("div",{className:"dialog-overlay fixed inset-0 z-[10000] overflow-hidden",children:[c.jsx("div",{className:"fixed inset-0 w-screen h-screen bg-black/70 backdrop-blur-md transition-opacity duration-300 ease-out",onClick:r}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:c.jsx($i,{contain:!0,restoreFocus:!0,autoFocus:!0,children:c.jsx("div",{...l,...u,ref:o,className:`
                relative max-h-[90vh] overflow-hidden rounded-2xl 
                bg-white dark:bg-slate-900 
                text-left shadow-2xl transition-all duration-300 ease-out
                ${v()} ${n?"w-full":""}
                border border-slate-200 dark:border-slate-700
                animate-dialog-appear
                z-[10001]
                ${i}
              `,onClick:g=>g.stopPropagation(),children:e})})})]})});return Pn.createPortal(m,document.body)},Ot=({children:t,onClose:r,className:e=""})=>{const s=L.useContext(En);return c.jsxs("div",{className:`
      px-6 py-4 border-b border-slate-200 dark:border-slate-700
      bg-slate-50 dark:bg-slate-800
      flex items-center justify-between
      ${e}
    `,children:[c.jsx("h3",{...s,className:"text-lg font-semibold text-slate-900 dark:text-white",children:t}),r&&c.jsx("button",{type:"button",className:`rounded-full p-1.5 text-slate-400 hover:text-slate-500 dark:text-slate-500 dark:hover:text-slate-400
                     hover:bg-slate-100 dark:hover:bg-slate-700/60 focus:outline-none transition-colors`,onClick:r,"aria-label":"Close",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})};Ot.displayName="DialogTitle";const kr=({children:t,className:r="",dividers:e=!1})=>c.jsx("div",{className:`
      px-6 py-4 overflow-y-auto
      ${e?"border-y border-slate-200 dark:border-slate-700":""}
      ${r}
    `,style:{maxHeight:"calc(70vh)",overflowY:"auto"},children:t}),jn=({children:t,className:r=""})=>c.jsx("div",{className:`
      px-6 py-3 flex items-center justify-end space-x-2
      bg-slate-50 dark:bg-slate-800
      border-t border-slate-200 dark:border-slate-700
      ${r}
    `,children:t}),ts=L.forwardRef(({children:t,className:r="",fullWidth:e=!1,required:s=!1,disabled:n=!1,error:i=!1,sx:a={},...o},l)=>{const d={};return a.mb&&(d.marginBottom=`${a.mb*.25}rem`),a.mt&&(d.marginTop=`${a.mt*.25}rem`),a.mx&&(d.marginLeft=d.marginRight=`${a.mx*.25}rem`),a.my&&(d.marginTop=d.marginBottom=`${a.my*.25}rem`),c.jsx("div",{ref:l,className:`
        relative
        ${e?"w-full":""}
        ${n?"opacity-70 pointer-events-none":""}
        ${i?"text-red-500":""}
        ${r}
      `,"data-required":s,"data-disabled":n,"data-error":i,style:d,...o,children:t})});ts.displayName="FormControl";const rs=L.forwardRef(({children:t,className:r="",required:e=!1,disabled:s=!1,error:n=!1,shrink:i=!1,...a},o)=>c.jsxs("label",{ref:o,className:`
        block mb-2 text-sm font-medium
        ${n?"text-red-500":"text-slate-900 dark:text-white"}
        ${s?"opacity-70 pointer-events-none":""}
        ${r}
      `,...a,children:[t,e&&c.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}));rs.displayName="InputLabel";const ns=({control:t,label:r,className:e="",disabled:s=!1,labelPlacement:n="end",sx:i={},...a})=>{ie.useEffect(()=>{console.log("FormControlLabel component rendered",{label:r})},[r]);const o=ie.cloneElement(t,{disabled:s||t.props.disabled,onChange:t.props.onChange});let l="row";n==="top"&&(l="column-reverse"),n==="bottom"&&(l="column"),n==="start"&&(l="row-reverse");let d="ml-2";n==="start"&&(d="mr-2"),n==="top"&&(d="mb-1"),n==="bottom"&&(d="mt-1");const u={display:"inline-flex",flexDirection:l};return i.mt&&(u.marginTop=`${i.mt*.25}rem`),i.mb&&(u.marginBottom=`${i.mb*.25}rem`),i.ml&&(u.marginLeft=`${i.ml*.25}rem`),i.mr&&(u.marginRight=`${i.mr*.25}rem`),i.m&&(u.margin=`${i.m*.25}rem`),c.jsxs("label",{className:`inline-flex ${l==="row"||l==="row-reverse"?"items-center":"items-start"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${e}`,style:u,...a,children:[o,c.jsx("span",{className:`text-sm ${d} ${s?"text-gray-500":""}`,children:r})]})};ns.displayName="FormControlLabel";const Lt=L.forwardRef(({children:t,color:r="default",size:e="medium",disabled:s=!1,edge:n=!1,className:i="",sx:a={},...o},l)=>{const d={};a.m&&(d.margin=typeof a.m=="number"?`${a.m*8}px`:a.m),a.ml&&(d.marginLeft=typeof a.ml=="number"?`${a.ml*8}px`:a.ml),a.mr&&(d.marginRight=typeof a.mr=="number"?`${a.mr*8}px`:a.mr),a.mt&&(d.marginTop=typeof a.mt=="number"?`${a.mt*8}px`:a.mt),a.mb&&(d.marginBottom=typeof a.mb=="number"?`${a.mb*8}px`:a.mb);const u={small:"p-1",medium:"p-2",large:"p-3"};let f="";switch(r){case"primary":f="text-primary-400 hover:bg-primary-900/30";break;case"secondary":f="text-secondary-500 hover:bg-secondary-900/30";break;case"error":f="text-red-500 hover:bg-red-900/30";break;case"info":f="text-blue-500 hover:bg-blue-900/30";break;case"success":f="text-green-500 hover:bg-green-900/30";break;case"warning":f="text-yellow-500 hover:bg-yellow-900/30";break;default:f="text-slate-300 hover:bg-slate-700/50"}const v={start:"-ml-2",end:"-mr-2",false:""};return c.jsx("button",{ref:l,type:"button",disabled:s,className:`
        rounded-full
        ${u[e]}
        ${f}
        ${n?v[n]:""}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/50
        ${i}
      `,style:d,...o,children:t})});Lt.displayName="IconButton";const as=L.forwardRef(({children:t,className:r="",position:e,...s},n)=>c.jsx("div",{ref:n,className:`
        flex items-center justify-center
        text-slate-500 dark:text-slate-400
        ${e==="start"?"mr-2":"ml-2"}
        ${r}
      `,...s,children:t}));as.displayName="InputAdornment";const is=L.forwardRef(({open:t,autoHideDuration:r=6e3,onClose:e,message:s,action:n,anchorOrigin:i={vertical:"bottom",horizontal:"left"},className:a="",sx:o={},children:l,...d},u)=>{const[f,v]=L.useState(!1);if(L.useEffect(()=>{if(t){if(v(!0),r&&e){const b=setTimeout(()=>{e()},r);return()=>clearTimeout(b)}}else{const b=setTimeout(()=>{v(!1)},300);return()=>clearTimeout(b)}},[t,r,e]),!t&&!f)return null;const m={};o.mt&&(m.marginTop=`${o.mt*.25}rem`),o.mb&&(m.marginBottom=`${o.mb*.25}rem`),o.ml&&(m.marginLeft=`${o.ml*.25}rem`),o.mr&&(m.marginRight=`${o.mr*.25}rem`);const g={position:"fixed",zIndex:1400,...m};return i.vertical==="top"?g.top="16px":g.bottom="16px",i.horizontal==="left"?g.left="16px":i.horizontal==="center"?(g.left="50%",g.transform="translateX(-50%)"):g.right="16px",c.jsx("div",{ref:u,className:`snackbar ${a}`,style:g,...d,children:c.jsxs(fr,{sx:{display:"flex",alignItems:"center",padding:"6px 16px",color:"white",backgroundColor:"rgba(50, 50, 50, 0.9)",borderRadius:"4px",minWidth:"288px",maxWidth:"500px",boxShadow:"0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12)",opacity:t?1:0,transform:`translateY(${t?0:"20px"})`,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1), transform 225ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[c.jsx("div",{style:{flexGrow:1,padding:"8px 0"},children:s||l}),n||e&&c.jsx(Lt,{onClick:e,sx:{marginLeft:"8px",color:"white"},size:"small",children:c.jsx(lr,{})})]})})});is.displayName="Snackbar";const ss=L.forwardRef(({children:t,direction:r="column",spacing:e=0,alignItems:s,justifyContent:n,className:i="",sx:a={},...o},l)=>{a.width&&a.width,a.minWidth&&a.minWidth,a.maxWidth&&a.maxWidth,a.height&&a.height,a.minHeight&&a.minHeight,a.maxHeight&&a.maxHeight,a.mt&&a.mt*.25,a.mb&&a.mb*.25,a.ml&&a.ml*.25,a.mr&&a.mr*.25,a.mx&&a.mx*.25,a.my&&a.my*.25,a.m&&a.m*.25,a.p&&a.p*.25,a.pt&&a.pt*.25,a.pb&&a.pb*.25,a.pl&&a.pl*.25,a.pr&&a.pr*.25,a.px&&a.px*.25,a.py&&a.py*.25;const d=`${e*.25}rem`,u={display:"flex",flexDirection:r,gap:d,...s&&{alignItems:s},...n&&{justifyContent:n},...a};return c.jsx(De,{ref:l,className:`stack ${i}`,sx:u,...o,children:t})});ss.displayName="Stack";const Cn=L.forwardRef(({label:t,helperText:r,error:e=!1,fullWidth:s=!1,variant:n="outlined",multiline:i=!1,rows:a=3,InputProps:o,className:l="",disabled:d=!1,isRequired:u=!1,onChange:f,value:v,size:m="medium",...g},b)=>{const[x,y]=L.useState(v||""),w=L.useRef(null),E=L.useRef(null);L.useEffect(()=>{v!==void 0&&((o==null?void 0:o.inputProps)&&Object.keys(o.inputProps).some(D=>D.startsWith("aria-")&&D.includes("combobox"))?v!==""&&y(v):y(v))},[v,o]);const S=h=>{const D=h.target.value;v===void 0&&y(D),f&&f(D,h)},T=()=>({...i?{}:j,...{value:v!==void 0?v:x,onChange:S},...(o==null?void 0:o.inputProps)||{}}),F={description:r,errorMessage:r,validationState:e?"invalid":"valid",isDisabled:d,label:t,"aria-label":!t&&!g["aria-label"]&&!g["aria-labelledby"]?g.placeholder||"text field":g["aria-label"]},{labelProps:M,inputProps:j,descriptionProps:N,errorMessageProps:I}=i?{labelProps:{},inputProps:{},descriptionProps:{},errorMessageProps:{}}:Bi(F,w),k=`
    ${{small:{container:"mb-3",label:"text-xs mb-1",input:"py-1.5 px-3 text-sm",helper:"text-xs mt-1",adornment:"h-4 w-4"},medium:{container:"mb-4",label:"text-sm mb-1.5",input:"py-2 px-3 text-sm",helper:"text-xs mt-1.5",adornment:"h-5 w-5"},large:{container:"mb-5",label:"text-base mb-2",input:"py-2.5 px-4 text-base",helper:"text-sm mt-1.5",adornment:"h-5 w-5"}}[m].container}
    ${s?"w-full":""}
    ${l}
  `.trim(),$=`
    block px-2.5 pb-2.5 pt-4 w-full text-base
    bg-background-input dark:bg-background-input-dark
    border ${e?"border-red-500":"border-border-primary dark:border-border-primary-dark"} 
    rounded-lg
    focus:outline-none focus:ring-0
    ${e?"focus:border-red-500":"focus:border-primary dark:focus:border-primary-light"}
    ${d?"opacity-50 cursor-not-allowed":""}
    transition-all duration-200
  `;return ie.useImperativeHandle(b,()=>i?E.current:w.current),i?c.jsxs("div",{className:k,children:[t&&c.jsxs("label",{className:`
              absolute text-sm text-text-secondary dark:text-text-secondary-dark z-10
              duration-300 transform -translate-y-4 scale-75 top-2 origin-[0] bg-background px-2 peer-focus:px-2 
              peer-focus:text-primary dark:peer-focus:text-primary-light
              ${e?"text-red-500 peer-focus:text-red-500":""}
              left-1
            `,children:[t," ",u&&c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{ref:E,className:$,rows:a,onChange:S,value:v!==void 0?v:x,disabled:d,"aria-label":!t&&!g["aria-label"]&&!g["aria-labelledby"]?g.placeholder||"text area":g["aria-label"],...g}),r&&c.jsx("p",{className:`mt-1 text-xs ${e?"text-red-500":"text-text-secondary dark:text-text-secondary-dark"}`,children:r})]}):c.jsxs("div",{className:k,children:[t&&c.jsxs("label",{...M,className:`
            absolute text-sm text-text-secondary dark:text-text-secondary-dark z-10
            duration-300 transform -translate-y-4 scale-75 top-2 origin-[0] bg-background px-2 peer-focus:px-2 
            peer-focus:text-primary dark:peer-focus:text-primary-light
            ${e?"text-red-500 peer-focus:text-red-500":""}
            left-1
          `,children:[t," ",u&&c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[(o==null?void 0:o.startAdornment)&&c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:o.startAdornment}),c.jsx("input",{ref:w,...T(),className:`
            ${$}
            ${o!=null&&o.startAdornment?"pl-10":""}
            ${o!=null&&o.endAdornment?"pr-10":""}
          `,disabled:d,...g}),(o==null?void 0:o.endAdornment)&&c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:o.endAdornment})]}),r&&c.jsx("p",{...e?I:N,className:`mt-1 text-xs ${e?"text-red-500":"text-text-secondary dark:text-text-secondary-dark"}`,children:r})]})});Cn.displayName="TextField";const xe=L.forwardRef(({children:t,className:r="",variant:e="body1",component:s,color:n,noWrap:i=!1,gutterBottom:a=!1,paragraph:o=!1,sx:l={},...d},u)=>{const f={};l.display&&(f.display=l.display),l.p&&(f.padding=typeof l.p=="number"?`${l.p*8}px`:l.p),l.m&&(f.margin=typeof l.m=="number"?`${l.m*8}px`:l.m),l.mt&&(f.marginTop=typeof l.mt=="number"?`${l.mt*8}px`:l.mt),l.mr&&(f.marginRight=typeof l.mr=="number"?`${l.mr*8}px`:l.mr),l.mb&&(f.marginBottom=typeof l.mb=="number"?`${l.mb*8}px`:l.mb),l.ml&&(f.marginLeft=typeof l.ml=="number"?`${l.ml*8}px`:l.ml);const v={h1:{element:"h1",classes:"text-4xl font-bold"},h2:{element:"h2",classes:"text-3xl font-bold"},h3:{element:"h3",classes:"text-2xl font-bold"},h4:{element:"h4",classes:"text-xl font-bold"},h5:{element:"h5",classes:"text-lg font-bold"},h6:{element:"h6",classes:"text-base font-bold"},subtitle1:{element:"h6",classes:"text-base font-medium"},subtitle2:{element:"h6",classes:"text-sm font-medium"},body1:{element:"p",classes:"text-base"},body2:{element:"p",classes:"text-sm"},caption:{element:"span",classes:"text-xs"},button:{element:"span",classes:"text-sm font-medium uppercase"},overline:{element:"span",classes:"text-xs font-medium uppercase tracking-wider"}},m=s||(o?"p":v[e].element),g=v[e].classes,b=i?"whitespace-nowrap overflow-hidden text-ellipsis":"",x=a?"mb-2":"",y=o?"mb-4":"";let w="";if(n)switch(n){case"primary":w="text-primary-400";break;case"secondary":w="text-secondary-500";break;case"error":w="text-red-500";break;case"warning":w="text-yellow-500";break;case"info":w="text-blue-500";break;case"success":w="text-green-500";break;default:f.color=n}return c.jsx(m,{ref:u,className:`typography ${g} ${b} ${x} ${y} ${w} ${r}`,style:{...d.style,...f},...d,children:t})});xe.displayName="Typography";const os=L.forwardRef(({children:t,container:r=!1,item:e=!1,xs:s,sm:n,md:i,lg:a,xl:o,spacing:l=0,className:d="",sx:u={},...f},v)=>{const m={};u.mt&&(m.marginTop=`${u.mt*.25}rem`),u.mb&&(m.marginBottom=`${u.mb*.25}rem`),u.ml&&(m.marginLeft=`${u.ml*.25}rem`),u.mr&&(m.marginRight=`${u.mr*.25}rem`),u.mx&&(m.marginLeft=m.marginRight=`${u.mx*.25}rem`),u.my&&(m.marginTop=m.marginBottom=`${u.my*.25}rem`),u.m&&(m.margin=`${u.m*.25}rem`);const g=r?"flex flex-wrap":"",b=r?{0:"",1:"-m-1",2:"-m-2",3:"-m-3",4:"-m-4",5:"-m-5",6:"-m-6",7:"-m-7",8:"-m-8",9:"-m-9",10:"-m-10"}[l]:e?{0:"",1:"p-1",2:"p-2",3:"p-3",4:"p-4",5:"p-5",6:"p-6",7:"p-7",8:"p-8",9:"p-9",10:"p-10"}[l]:"",x=(F,M)=>{if(M===!0)return`${F}:flex-grow`;if(M==="auto")return`${F}:w-auto`;const j={1:"1/12",2:"2/12",3:"1/4",4:"1/3",5:"5/12",6:"1/2",7:"7/12",8:"2/3",9:"3/4",10:"10/12",11:"11/12",12:"full"};return M?`${F===""?"":`${F}:`}w-${j[M]||"full"}`:""},y=x("",s),w=x("sm",n),E=x("md",i),S=x("lg",a),T=x("xl",o);return c.jsx("div",{ref:v,className:`
        ${g}
        ${b}
        ${e?y:""}
        ${e?w:""}
        ${e?E:""}
        ${e?S:""}
        ${e?T:""}
        ${d}
      `.trim(),style:{...m,...f.style},...f,children:t})});os.displayName="Grid";const ls=L.forwardRef(({alt:t,src:r,children:e,variant:s="circular",size:n="medium",className:i="",sx:a={},...o},l)=>{const d={};a.mt&&(d.marginTop=`${a.mt*.25}rem`),a.mb&&(d.marginBottom=`${a.mb*.25}rem`),a.ml&&(d.marginLeft=`${a.ml*.25}rem`),a.mr&&(d.marginRight=`${a.mr*.25}rem`),a.mx&&(d.marginLeft=d.marginRight=`${a.mx*.25}rem`),a.my&&(d.marginTop=d.marginBottom=`${a.my*.25}rem`),a.m&&(d.margin=`${a.m*.25}rem`);const u={small:"w-8 h-8 text-xs",medium:"w-10 h-10 text-sm",large:"w-12 h-12 text-base"}[n],f={circular:"rounded-full",rounded:"rounded-md",square:"rounded-none"}[s],v=()=>{if(!t)return"";const m=t.split(" ");return m.length===1?m[0].substring(0,2).toUpperCase():(m[0][0]+m[m.length-1][0]).toUpperCase()};return c.jsx("div",{ref:l,className:`
        flex items-center justify-center
        overflow-hidden bg-gray-300 text-gray-600 font-medium
        ${u}
        ${f}
        ${i}
      `,"aria-label":t,style:d,...o,children:r?c.jsx("img",{src:r,alt:t||"avatar",className:"w-full h-full object-cover",onError:m=>{m.target.src=""}}):e||v()})});ls.displayName="Avatar";const cs=L.forwardRef(({checked:t,defaultChecked:r,disabled:e=!1,onChange:s,size:n="medium",color:i="primary",className:a="",edge:o,inputProps:l={},sx:d={},...u},f)=>{console.log("Switch rendering with checked=",t);const v=L.useCallback(S=>{console.log("Switch handleChange called with checked=",S.target.checked),s&&s(S)},[s]),m={};d.mt&&(m.marginTop=`${d.mt*.25}rem`),d.mb&&(m.marginBottom=`${d.mb*.25}rem`),d.ml&&(m.marginLeft=`${d.ml*.25}rem`),d.mr&&(m.marginRight=`${d.mr*.25}rem`),d.mx&&(m.marginLeft=m.marginRight=`${d.mx*.25}rem`),d.my&&(m.marginTop=m.marginBottom=`${d.my*.25}rem`),d.m&&(m.margin=`${d.m*.25}rem`);const g=n==="small"?"w-8":"w-10",b=n==="small"?"h-4":"h-5",x=n==="small"?"w-3 h-3":"w-4 h-4",y=n==="small"?"translate-x-4":"translate-x-5",w={primary:"bg-blue-500",secondary:"bg-purple-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-sky-500",success:"bg-green-500"},E={start:"-ml-2",end:"-mr-2"};return c.jsxs("label",{className:`
        inline-flex items-center relative
        ${o?E[o]:""}
        ${a}
      `,style:m,children:[c.jsx("input",{type:"checkbox",ref:f,checked:t,defaultChecked:r,disabled:e,onChange:v,className:"sr-only peer",...l,...u}),c.jsx("div",{className:`
          ${g} ${b} rounded-full
          flex items-center transition-colors duration-200 ease-in-out
          bg-gray-200 peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-offset-white
          peer-focus:ring-opacity-50
          peer-checked:${w[i]}
          ${e?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,children:c.jsx("span",{className:`
            ${x} bg-white rounded-full shadow transform
            transition-transform duration-200 ease-in-out
            peer-checked:${y}
            ml-0.5
          `})})]})});cs.displayName="Switch";const ds=L.forwardRef(({children:t,className:r="",size:e="medium",stickyHeader:s=!1,sx:n={},...i},a)=>{const o={};n.width&&(o.width=n.width),n.minWidth&&(o.minWidth=n.minWidth),n.maxWidth&&(o.maxWidth=n.maxWidth),n.mt&&(o.marginTop=`${n.mt*.25}rem`),n.mb&&(o.marginBottom=`${n.mb*.25}rem`),n.ml&&(o.marginLeft=`${n.ml*.25}rem`),n.mr&&(o.marginRight=`${n.mr*.25}rem`),n.mx&&(o.marginLeft=o.marginRight=`${n.mx*.25}rem`),n.my&&(o.marginTop=o.marginBottom=`${n.my*.25}rem`),n.m&&(o.margin=`${n.m*.25}rem`);const l=e==="small"?"text-sm":"text-base";return c.jsx("div",{className:"w-full overflow-x-auto",children:c.jsx("table",{ref:a,className:`
          min-w-full divide-y divide-gray-200
          border-collapse border-spacing-0
          ${l}
          ${r}
        `,style:o,...i,children:t})})});ds.displayName="Table";const us=L.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const i={};return c.jsx("thead",{ref:n,className:`bg-gray-50 ${r}`,style:i,...s,children:t})});us.displayName="TableHead";const fs=L.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const i={};return c.jsx("tbody",{ref:n,className:`bg-white divide-y divide-gray-200 ${r}`,style:i,...s,children:t})});fs.displayName="TableBody";const hs=L.forwardRef(({children:t,className:r="",hover:e=!1,selected:s=!1,sx:n={},...i},a)=>{const o={};return c.jsx("tr",{ref:a,className:`
        ${e?"hover:bg-gray-50":""}
        ${s?"bg-blue-50":""}
        transition-colors
        ${r}
      `,style:o,...i,children:t})});hs.displayName="TableRow";const ms=L.forwardRef(({children:t,className:r="",align:e="left",padding:s="normal",size:n="medium",variant:i="body",sx:a={},...o},l)=>{const d={},u={inherit:"",left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"}[e],f={normal:"px-4 py-3",checkbox:"px-1 py-3",none:"p-0"}[s],v=n==="small"?"text-sm":"text-base",m=i==="head"?"font-medium text-gray-700":i==="footer"?"font-medium bg-gray-50":"font-normal text-gray-500",g=i==="head"?"th":"td";return c.jsx(g,{ref:l,className:`
        ${u}
        ${f}
        ${v}
        ${m}
        ${r}
      `,style:d,...o,children:t})});ms.displayName="TableCell";const ps=L.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const i={};return c.jsx("tfoot",{ref:n,className:`bg-gray-50 ${r}`,style:i,...s,children:t})});ps.displayName="TableFooter";const gs=L.forwardRef(({children:t,color:r="primary",size:e="medium",variant:s="circular",className:n="",sx:i={},...a},o)=>{const l={};i.width&&(l.width=i.width),i.minWidth&&(l.minWidth=i.minWidth),i.maxWidth&&(l.maxWidth=i.maxWidth),i.height&&(l.height=i.height),i.minHeight&&(l.minHeight=i.minHeight),i.maxHeight&&(l.maxHeight=i.maxHeight),i.mt&&(l.marginTop=`${i.mt*.25}rem`),i.mb&&(l.marginBottom=`${i.mb*.25}rem`),i.ml&&(l.marginLeft=`${i.ml*.25}rem`),i.mr&&(l.marginRight=`${i.mr*.25}rem`),i.mx&&(l.marginLeft=l.marginRight=`${i.mx*.25}rem`),i.my&&(l.marginTop=l.marginBottom=`${i.my*.25}rem`),i.m&&(l.margin=`${i.m*.25}rem`),i.bottom&&(l.bottom=i.bottom),i.right&&(l.right=i.right),i.left&&(l.left=i.left),i.top&&(l.top=i.top),i.position&&(l.position=i.position),i.zIndex&&(l.zIndex=i.zIndex);const d={small:"w-10 h-10 text-sm",medium:"w-14 h-14 text-base",large:"w-16 h-16 text-lg"}[e],u={circular:"rounded-full aspect-square",extended:"rounded-full px-4"}[s],f={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-purple-600 hover:bg-purple-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",error:"bg-red-600 hover:bg-red-700 text-white",info:"bg-sky-600 hover:bg-sky-700 text-white",warning:"bg-amber-600 hover:bg-amber-700 text-white"}[r];return c.jsx("button",{ref:o,className:`
        flex items-center justify-center
        shadow-lg
        transition-colors
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-${r}-500
        disabled:opacity-50 disabled:pointer-events-none
        ${d}
        ${u}
        ${f}
        ${n}
      `,style:l,...a,children:t})});gs.displayName="Fab";function Mt(t,r){const e=ie.memo(t);return r?e.displayName=`Memo(${r})`:t.displayName?e.displayName=`Memo(${t.displayName})`:t.name&&(e.displayName=`Memo(${t.name})`),e}const bs=({onAssetImport:t,isFullPage:r=!1,dialogOpen:e=!1,onClose:s})=>{const n=L.useRef(null),i=L.useRef(null),a=L.useRef(null),o=L.useRef(null),{isDragging:l,isProcessing:d,result:u,hasStoredAssets:f,handleDragOver:v,handleDragLeave:m,handleDrop:g,processZipFile:b,clearResult:x,clearAllAssets:y,createSampleData:w,exportData:E,addAsset:S}=Gr(),T=`
Your zip file should contain:

1. /audio folder - with mp3, wav, or ogg files
2. /images folder - with jpg, png, gif, or pdf files
3. /data folder - with JSON files:
   - locations.json: Array of location objects with id, name, description
   - characters.json: Array of character objects

Example locations.json:
[
  {
    "id": "tavern",
    "name": "The Rusty Tankard",
    "description": "A cozy tavern with a fireplace.",
    "backgroundMusic": "tavern_ambience.mp3"
  }
]
  `,F=L.useCallback(async W=>{const U=W.target.files;if(!U||U.length===0)return;const O=U[0];await b(O),n.current&&(n.current.value=""),t&&t()},[b,t]),M=L.useCallback(async()=>{(await w()).success&&t&&t()},[w,t]),j=L.useCallback(async()=>{await E()},[E]),N=L.useCallback(async()=>{(await y()).success&&t&&t()},[y,t]),I=L.useCallback(()=>{var W;(W=n.current)==null||W.click()},[]),z=L.useCallback(async(W,U)=>{const O=W.target.files;!O||O.length===0||(await Promise.all(Array.from(O).map(R=>S(U,R))),W.target&&(W.target.value=""),t&&t())},[S,t]),k=L.useCallback(W=>{z(W,"audio")},[z]),$=L.useCallback(W=>{z(W,"images")},[z]),h=L.useCallback(W=>{z(W,"data")},[z]),D=L.useCallback(()=>{var W;(W=i.current)==null||W.click()},[]),Q=L.useCallback(()=>{var W;(W=a.current)==null||W.click()},[]),K=L.useCallback(()=>{var W;(W=o.current)==null||W.click()},[]),re=c.jsx("div",{className:`asset-drop-zone ${l?"dragging":""} ${r?"h-full":""}`,onDragOver:v,onDragLeave:m,onDrop:g,children:c.jsxs("div",{className:"p-4 bg-gray-800 dark:bg-gray-800 rounded-lg shadow-md relative w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Asset Manager"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{title:T,className:"text-gray-400 hover:text-gray-300 p-1 ml-2",children:c.jsx(ra,{})}),e&&s&&c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-300 p-1 ml-2",children:c.jsx(lr,{})})]})]}),c.jsxs("div",{className:"mb-4 bg-gray-700 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center p-3",children:[c.jsx("h3",{className:"text-base font-medium text-white",children:"Import ZIP File"}),c.jsx(Nr,{className:"text-gray-400"})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:`
                border-2 border-dashed rounded-lg p-6 
                flex flex-col items-center justify-center 
                cursor-pointer transition-colors duration-200
                ${l?"border-blue-500 bg-blue-900 bg-opacity-10":"border-gray-500"} 
              `,onDragOver:v,onDragLeave:m,onDrop:g,onClick:I,children:[d?c.jsx(ut,{className:"my-4"}):c.jsxs(c.Fragment,{children:[c.jsx(ia,{className:"text-gray-400 h-10 w-10 mb-2"}),c.jsx(xe,{variant:"body1",className:"text-white mb-1",children:"Drag & Drop a ZIP file here, or click to select"}),c.jsx(xe,{variant:"body2",className:"text-gray-400",children:"Your ZIP should contain audio/, images/, and data/ folders"})]}),c.jsx("input",{type:"file",ref:n,onChange:F,className:"hidden",accept:".zip"})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(gt,{}),onPress:I,isDisabled:d,children:"Select ZIP"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(ta,{}),onPress:j,isDisabled:d||!f,children:"Export Data"}),c.jsx(ke,{variant:"outlined",color:"primary",onPress:M,isDisabled:d,children:"Create Sample Data"}),c.jsx(ke,{variant:"outlined",color:"error",startIcon:c.jsx(Zr,{}),onPress:N,isDisabled:d||!f,children:"Clear Assets"})]})]})]}),c.jsxs("div",{className:"mb-4 bg-gray-700 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center p-3",children:[c.jsx("h3",{className:"text-base font-medium text-white",children:"Upload Individual Files"}),c.jsx(Nr,{className:"text-gray-400"})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(xe,{variant:"body1",className:"text-white mb-2",children:"Audio Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(gt,{}),onPress:D,isDisabled:d,className:"w-full",children:"Select Audio"}),c.jsx(xe,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: MP3, WAV, OGG"}),c.jsx("input",{type:"file",ref:i,onChange:k,className:"hidden",accept:"audio/*",multiple:!0})]}),c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(xe,{variant:"body1",className:"text-white mb-2",children:"Image Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(gt,{}),onPress:Q,isDisabled:d,className:"w-full",children:"Select Images"}),c.jsx(xe,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: JPG, PNG, GIF, SVG"}),c.jsx("input",{type:"file",ref:a,onChange:$,className:"hidden",accept:"image/*",multiple:!0})]}),c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(xe,{variant:"body1",className:"text-white mb-2",children:"Data Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(gt,{}),onPress:K,isDisabled:d,className:"w-full",children:"Select Data"}),c.jsx(xe,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: JSON, TXT, PDF"}),c.jsx("input",{type:"file",ref:o,onChange:h,className:"hidden",accept:".json,.txt,.pdf",multiple:!0})]})]}),d&&c.jsxs("div",{className:"flex justify-center items-center mt-4",children:[c.jsx(ut,{}),c.jsx(xe,{variant:"body2",className:"text-white ml-2",children:"Processing files..."})]})]})]}),u&&c.jsx(dr,{severity:u.success?"success":"error",onClose:x,className:"mt-4",children:u.message})]})});return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"w-full max-w-3xl",children:re})}):re},vs=Mt(bs,"AssetDropZone"),ws=({type:t,title:r})=>{const e=L.useRef(null),{audioAssets:s,imageAssets:n,dataAssets:i,isLoadingAssets:a,addAsset:o,deleteAsset:l}=Gr(),{loadJsonContent:d}=cr(),u=t==="audio"?s:t==="images"?n:i,f=L.useCallback(async x=>{const y=x.target.files;if(!y||y.length===0)return;const w=y[0];await o(t,w),e.current&&(e.current.value="")},[o,t]),v=L.useCallback(()=>{var x;(x=e.current)==null||x.click()},[]),m=L.useCallback(async x=>{window.confirm(`Are you sure you want to delete ${x}?`)&&await l(t,x)},[l,t]),g=L.useCallback(async x=>{await d(x)},[d]);if(a)return c.jsxs(De,{className:"p-4 bg-gray-800 rounded-lg mb-4",children:[c.jsx(xe,{variant:"h6",className:"mb-2",children:r}),c.jsx(De,{className:"flex justify-center p-4",children:c.jsx(ut,{})})]});const b=L.useCallback(x=>{const y=t==="images"&&x.toLowerCase().endsWith(".pdf"),w=t==="data"&&x.toLowerCase().endsWith(".json");return c.jsxs(Pt,{className:"flex justify-between items-center py-2",children:[c.jsxs("div",{children:[c.jsx(xe,{variant:"body2",className:"font-medium text-gray-200",children:x}),c.jsx(xe,{variant:"caption",className:"text-gray-400",children:t==="data"?"JSON Data":y?"PDF Document":`${r} File`})]}),c.jsxs("div",{className:"flex space-x-1",children:[w&&c.jsx(Lt,{size:"small",onClick:()=>g(x),className:"text-blue-400 hover:text-blue-300",children:c.jsx(Qn,{})}),c.jsx(Lt,{size:"small",onClick:()=>m(x),className:"text-red-400 hover:text-red-300",children:c.jsx(Zr,{})})]})]},x)},[t,r,m,g]);return c.jsxs(De,{className:"p-4 bg-gray-800 rounded-lg mb-4",children:[c.jsxs(De,{className:"flex justify-between items-center mb-2",children:[c.jsx(xe,{variant:"h6",children:r}),c.jsxs(ke,{variant:"outlined",color:"primary",size:"small",startIcon:c.jsx(or,{}),onPress:v,children:["Add ",r]}),c.jsx("input",{type:"file",ref:e,className:"hidden",onChange:f,accept:t==="audio"?".mp3,.wav,.ogg":t==="images"?".jpg,.jpeg,.png,.gif,.pdf":".json"})]}),u.length>0?c.jsx(ur,{className:"divide-y divide-gray-700",children:u.map(b)}):c.jsxs(De,{className:"p-4 text-center text-gray-400",children:["No ",r.toLowerCase(),' assets found. Add some using the "Add ',r,'" button.']})]})},ro=Mt(ws,"AssetList"),ys=()=>{const{isJsonEditorOpen:t,jsonFileToEdit:r,jsonContent:e,isLoading:s,error:n,setIsJsonEditorOpen:i,setJsonContent:a,saveJsonContent:o}=cr(),l=L.useCallback(async()=>{await o()},[o]),d=L.useCallback(()=>{s||e!==""&&!window.confirm("Are you sure you want to close without saving?")||i(!1)},[s,e,i]),u=L.useCallback(f=>{a(f.target.value)},[a]);return c.jsxs(xr,{open:t,onClose:d,maxWidth:"md",fullWidth:!0,children:[c.jsxs(Ot,{className:"flex justify-between items-center",children:[c.jsx("span",{children:r?`Editing: ${r}`:"JSON Editor"}),c.jsx(ke,{variant:"text",onPress:d,isDisabled:s,startIcon:c.jsx(lr,{}),children:"Close"})]}),c.jsx(kr,{children:s?c.jsx(De,{className:"flex justify-center items-center p-4",children:c.jsx(ut,{})}):c.jsxs(c.Fragment,{children:[n&&c.jsx(dr,{severity:"error",className:"mb-4",children:n}),c.jsx(De,{className:"mb-2",children:c.jsx(xe,{variant:"caption",className:"block mb-1 text-gray-400",children:"Edit the JSON data below. Make sure to keep valid JSON syntax."})}),c.jsx("textarea",{className:"w-full h-80 p-3 font-mono bg-gray-900 text-gray-200 border border-gray-700 rounded",value:e,onChange:u})]})}),c.jsx(jn,{children:c.jsx(ke,{variant:"contained",color:"primary",startIcon:c.jsx(ea,{}),onPress:l,isDisabled:s||!e,children:"Save"})})]})},no=Mt(ys,"JsonEditor"),xs=()=>{const{isCreateJsonOpen:t,newJsonFileName:r,isLoading:e,error:s,setIsCreateJsonOpen:n,setNewJsonFileName:i,createNewJsonFile:a}=cr(),o=L.useCallback(async()=>{r&&await a()},[r,a]),l=L.useCallback(()=>{e||n(!1)},[e,n]),d=L.useCallback(u=>{i(u)},[]);return c.jsxs(xr,{open:t,onClose:l,maxWidth:"sm",fullWidth:!0,children:[c.jsx(Ot,{children:"Create New JSON File"}),c.jsx(kr,{children:e?c.jsx("div",{className:"flex justify-center items-center p-4",children:c.jsx(ut,{})}):c.jsxs(c.Fragment,{children:[s&&c.jsx(dr,{severity:"error",className:"mb-4",children:s}),c.jsx(xe,{variant:"body2",className:"mb-4",children:"Enter a name for the new JSON file. The file will be created with empty JSON structure."}),c.jsx(Cn,{label:"File Name",placeholder:"example.json",value:r,onChange:d,fullWidth:!0,helperText:"File name will have .json extension added if not provided"})]})}),c.jsxs(jn,{children:[c.jsx(ke,{onPress:l,isDisabled:e,children:"Cancel"}),c.jsx(ke,{variant:"contained",color:"primary",startIcon:c.jsx(or,{}),onPress:o,isDisabled:e||!r,children:"Create"})]})]})},ao=Mt(xs,"NewJsonDialog"),ks=()=>{const{locations:t,characters:r,combats:e}=et(),[s,n]=L.useState(!1),[i,a]=L.useState(0);L.useEffect(()=>{(async()=>{const f=await fe.getAssets("audio");a(f.length)})()},[]);const o=[{label:"Total Locations",value:t.length,icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"from-indigo-500/20 to-indigo-700/20"},{label:"Total Characters",value:r.length,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),color:"from-amber-500/20 to-amber-700/20"},{label:"Available Music",value:i,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),color:"from-emerald-500/20 to-emerald-700/20"},{label:"Combat Encounters",value:e.length,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),color:"from-red-500/20 to-red-700/20"}],l=()=>{n(!1)},d=async()=>{const u=await fe.getAssets("audio");a(u.length)};return c.jsxs("div",{className:"p-6 max-w-[var(--content-width-xl)] mx-auto",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold font-[var(--font-display)] text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 to-indigo-500",children:"Campaign Dashboard"}),c.jsx(ke,{variant:"glass",color:"primary",startIcon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),onPress:()=>n(!0),children:"Manage Assets"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(u=>c.jsx(kt,{className:"hover-lift overflow-visible",variant:"glass",children:c.jsxs($t,{className:"p-5 relative z-10",children:[c.jsx("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-gradient-to-br rounded-[var(--radius-lg)] opacity-20 z-0 pointer-events-none ${stat.color}"}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-medium text-slate-200 mb-1",children:u.label}),c.jsx("p",{className:"text-4xl font-bold text-white",children:u.value})]}),c.jsx("div",{className:"bg-white/10 p-2 rounded-lg text-indigo-300",children:u.icon})]})]})},u.label))}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[c.jsxs(kt,{variant:"glass",className:"hover-lift",children:[c.jsx(sr,{title:c.jsx("span",{className:"text-xl font-semibold text-white",children:"Recent Locations"}),action:c.jsx(ke,{variant:"text",color:"default",size:"small",href:"/campaignorganizer/locations/",children:"View All"})}),c.jsx($t,{className:"px-5 pb-4 pt-0",children:c.jsxs("div",{className:"space-y-1",children:[t.slice(0,5).map(u=>c.jsxs("div",{className:"p-2 hover:bg-white/5 rounded-[var(--radius-md)] transition-all flex items-center",children:[c.jsx("span",{className:"text-indigo-300 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),u.name]},u.id)),t.length===0&&c.jsxs("div",{className:"text-slate-400 italic p-2 flex items-center",children:[c.jsx("span",{className:"text-slate-500 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"No locations added yet"]})]})})]}),c.jsxs(kt,{variant:"glass",className:"hover-lift",children:[c.jsx(sr,{title:c.jsx("span",{className:"text-xl font-semibold text-white",children:"Recent Characters"}),action:c.jsx(ke,{variant:"text",color:"default",size:"small",href:"/campaignorganizer/characters/",children:"View All"})}),c.jsx($t,{className:"px-5 pb-4 pt-0",children:c.jsxs("div",{className:"space-y-1",children:[r.slice(0,5).map(u=>c.jsxs("div",{className:"p-2 hover:bg-white/5 rounded-[var(--radius-md)] transition-all flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-amber-300 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),u.name]}),c.jsx("span",{className:"text-slate-400 text-sm bg-white/5 px-2 py-0.5 rounded",children:u.type})]},u.id)),r.length===0&&c.jsxs("div",{className:"text-slate-400 italic p-2 flex items-center",children:[c.jsx("span",{className:"text-slate-500 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"No characters added yet"]})]})})]})]}),s&&c.jsxs(xr,{open:s,onClose:l,maxWidth:"md",fullWidth:!0,children:[c.jsx(Ot,{children:"Asset Manager"}),c.jsx(kr,{children:c.jsx(vs,{onAssetImport:d,onClose:l})})]})]})},tt=(t,r)=>L.lazy(()=>t().then(e=>e[r]?{default:e[r]}:(console.error(`Component ${r} not found in the module`),{default:()=>c.jsxs("div",{className:"glass-effect p-6 text-center max-w-md mx-auto mt-10",children:[c.jsx("h5",{className:"text-xl font-display font-bold text-error-DEFAULT mb-4",children:"Failed to load component"}),c.jsx("button",{className:"px-5 py-2.5 bg-primary-DEFAULT text-text-primary rounded-lg hover:bg-primary-light transition-all duration-300 shadow-lg btn-glow",onClick:()=>window.location.reload(),children:"Reload Page"})]})})).catch(e=>(console.error(`Error loading component ${r}:`,e),{default:()=>c.jsxs("div",{className:"glass-effect p-8 text-center max-w-md mx-auto mt-10",children:[c.jsx("h5",{className:"text-xl font-display font-bold text-error-DEFAULT mb-4",children:"Failed to load component"}),c.jsxs("p",{className:"mb-6 text-text-secondary",children:["Error: ",e.message]}),c.jsx("button",{className:"px-5 py-2.5 bg-primary-DEFAULT text-text-primary rounded-lg hover:bg-primary-light transition-all duration-300 shadow-lg btn-glow",onClick:()=>window.location.reload(),children:"Reload Page"})]})}))),$s=tt(()=>Le(()=>import("./MapView-CQggdJmt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"MapView"),_s=tt(()=>Le(()=>import("./LocationsView-CHK55JMK.js"),__vite__mapDeps([8,1,4,6,7])),"LocationsView"),Es=tt(()=>Le(()=>import("./CharactersView-DEMeP-JL.js"),__vite__mapDeps([9,1,10,3,11,4,5,6,7])),"CharactersView"),js=tt(()=>Le(()=>import("./CombatsView-C6yITjBR.js"),__vite__mapDeps([12,1,10,3,4,6,7])),"CombatsView"),Cs=tt(()=>Le(()=>import("./CombatSessionView-Be6c6fnW.js"),__vite__mapDeps([13,1,2,3,4,11,5,6,7])),"CombatSessionView"),Ss=tt(()=>Le(()=>import("./AssetsView-GBH9dwDr.js"),__vite__mapDeps([14,1,6,7])),"AssetsView"),Ns=()=>c.jsx("div",{className:"flex justify-center items-center h-full p-10",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-DEFAULT opacity-20 blur-xl animate-pulse-slow"}),c.jsx("div",{className:"relative z-10",children:c.jsx(la,{size:"lg",text:"Loading content..."})})]})});window.ReactMarkdownLoaded=!0;const Ts=()=>null;function Ls(){et(e=>e.hasAssets);const[t,r]=L.useState({x:0,y:0});return L.useEffect(()=>{const e=s=>{r({x:s.clientX/window.innerWidth,y:s.clientY/window.innerHeight})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),c.jsxs("div",{className:"min-h-screen overflow-hidden bg-background",children:[c.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden bg-gradient-to-b from-background to-background-elevated",children:[c.jsx("div",{className:"absolute inset-0 bg-radial-gradient"}),c.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-3xl bg-gradient-to-br from-primary-dark/10 via-primary/5 to-transparent opacity-30",style:{top:`calc(20% - ${t.y*40}px)`,left:`calc(15% - ${t.x*40}px)`,transition:"transform 0.8s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] bg-gradient-to-tr from-secondary-dark/10 via-secondary/10 to-transparent opacity-30",style:{bottom:`calc(30% - ${t.y*30}px)`,right:`calc(20% - ${t.x*30}px)`,transition:"transform 1s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[80px] bg-gradient-to-r from-accent/5 via-accent-dark/10 to-transparent opacity-20",style:{top:`calc(60% - ${t.y*20}px)`,right:`calc(35% - ${t.x*20}px)`,transition:"transform 1.2s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-border-DEFAULT/10 to-transparent"}),c.jsx("div",{className:"absolute inset-0 bg-grid-pattern"})]}),c.jsxs(In,{basename:"/campaignorganizer/",children:[c.jsxs("div",{className:"flex flex-col min-h-screen relative z-10",children:[c.jsx(ca,{}),c.jsx(qn,{}),c.jsx("div",{className:"flex-1 relative pt-16",children:c.jsx("div",{className:"animate-fade-in h-full overflow-auto scrollbar-thin",children:c.jsx(L.Suspense,{fallback:c.jsx(Ns,{}),children:c.jsxs(Dn,{children:[c.jsx(Fe,{path:"/",element:c.jsx(ks,{})}),c.jsx(Fe,{path:"/map",element:c.jsx($s,{})}),c.jsx(Fe,{path:"/locations",element:c.jsx(_s,{})}),c.jsx(Fe,{path:"/characters",element:c.jsx(Es,{})}),c.jsx(Fe,{path:"/combats",element:c.jsx(js,{})}),c.jsx(Fe,{path:"/combat-session",element:c.jsx(Cs,{})}),c.jsx(Fe,{path:"/assets",element:c.jsx(Ss,{})}),c.jsx(Fe,{path:"*",element:c.jsxs("div",{className:"p-4",children:[c.jsx("script",{dangerouslySetInnerHTML:{__html:`
                          // Check if current path is likely a PDF or asset
                          const path = window.location.pathname;
                          const isPdf = path.toLowerCase().endsWith('.pdf');
                          const containsFragment = window.location.hash.includes('toolbar=') || 
                                                  window.location.hash.includes('navpanes=');
                          
                          if (isPdf || containsFragment) {
                            // Extract base path without fragments
                            const cleanPath = path.split('#')[0];
                            // Redirect back to main app, we'll handle PDFs in components
                            window.location.replace('/campaignorganizer/');
                            
                            // Store the PDF path to potentially use later
                            sessionStorage.setItem('lastAttemptedPdfPath', cleanPath);
                          }
                        `}}),c.jsx("h1",{className:"text-xl font-bold mb-4",children:"Page Not Found"}),c.jsx("p",{children:"The page you're looking for doesn't exist or you don't have permission to view it."}),c.jsx("button",{onClick:()=>window.location.href="/campaignorganizer/",className:"mt-4 px-4 py-2 bg-primary-DEFAULT text-white rounded hover:bg-primary-dark",children:"Return to Dashboard"})]})})]})})})}),c.jsx(oa,{})]}),c.jsx(Ts,{})]})]})}function As(){Le(()=>import("./MapView-CQggdJmt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),Le(()=>import("./LocationsView-CHK55JMK.js"),__vite__mapDeps([8,1,4,6,7])),Le(()=>import("./CharactersView-DEMeP-JL.js"),__vite__mapDeps([9,1,10,3,11,4,5,6,7])),Le(()=>import("./CombatsView-C6yITjBR.js"),__vite__mapDeps([12,1,10,3,4,6,7])),Le(()=>import("./CombatSessionView-Be6c6fnW.js"),__vite__mapDeps([13,1,2,3,4,11,5,6,7])),console.log("Preloading critical components...")}setTimeout(()=>{As()},2e3);Kt.createRoot(document.getElementById("root")).render(c.jsx(ie.StrictMode,{children:c.jsx(Ki,{children:c.jsx(Ls,{})})}));export{Xs as $,fe as A,De as B,ut as C,xr as D,Hs as E,qs as F,as as G,ra as H,Lt as I,Ws as J,Bs as K,Pt as L,Us as M,Ks as N,or as O,zs as P,Vs as Q,is as R,ea as S,xe as T,ur as U,os as V,ts as W,rs as X,Zt as Y,ns as Z,Qi as _,Gs as a,Fs as a0,we as a1,$e as a2,qe as a3,rn as a4,jt as a5,ue as a6,Xe as a7,Se as a8,ka as a9,ls as aA,ta as aB,to as aC,mi as aD,he as aE,Gr as aF,cr as aG,vs as aH,ro as aI,no as aJ,ao as aK,_e as aa,vi as ab,Ma as ac,_t as ad,Qs as ae,Wa as af,St as ag,bn as ah,Ue as ai,Qe as aj,Dt as ak,Oi as al,Jt as am,Xr as an,di as ao,eo as ap,Mi as aq,ui as ar,an as as,_n as at,on as au,$n as av,yi as aw,Wi as ax,$i as ay,fr as az,Nr as b,Qn as c,Js as d,ia as e,Ot as f,Ys as g,kr as h,ss as i,c as j,Cn as k,es as l,jn as m,ke as n,Zs as o,na as p,Os as q,Rs as r,Ms as s,et as t,Jr as u,lr as v,kt as w,$t as x,qi as y,Zr as z};
//# sourceMappingURL=index-C-zTHRzx.js.map
