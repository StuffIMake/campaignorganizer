const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapView-C6LTSgIR.js","assets/react-vendor-3Ywg6HeR.js","assets/combobox-BH-rrMj6.js","assets/useHover-DdTbeILI.js","assets/MarkdownContent-Cf8ndYjS.js","assets/PDFViewer-5B0ZY-ou.js","assets/map-vendor-Bbrwb_BN.js","assets/utilities-BiTQLgRB.js","assets/LocationsView-BkPVLmdg.js","assets/CharactersView-CsjbovlP.js","assets/Select-C5zUTDie.js","assets/AssetViewerDialog-DGcyaWPW.js","assets/CombatsView-1ilFBMND.js","assets/CombatSessionView-IK8C3Nls.js","assets/AssetsView-Cy2p1CzF.js"])))=>i.map(i=>d[i]);
import{r as C,a as En,c as ht,g as Cn,u as Sn,L as yr,R as ie,b as Nn,B as Tn,d as Ln,e as Me}from"./react-vendor-3Ywg6HeR.js";import{_ as Te}from"./map-vendor-Bbrwb_BN.js";import{v as Wt,h as kr,c as An}from"./utilities-BiTQLgRB.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();var Rr={exports:{}},Tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=C,Pn=Symbol.for("react.element"),Dn=Symbol.for("react.fragment"),zn=Object.prototype.hasOwnProperty,Rn=In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,On={key:!0,ref:!0,__self:!0,__source:!0};function Or(t,r,e){var s,n={},a=null,i=null;e!==void 0&&(a=""+e),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(i=r.ref);for(s in r)zn.call(r,s)&&!On.hasOwnProperty(s)&&(n[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:Pn,type:t,key:a,ref:i,props:n,_owner:Rn.current}}Tt.Fragment=Dn;Tt.jsx=Or;Tt.jsxs=Or;Rr.exports=Tt;var c=Rr.exports,Ut={},$r=En;Ut.createRoot=$r.createRoot,Ut.hydrateRoot=$r.hydrateRoot;function mt(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,r){(function(e){t.exports=e()})(function(){return function e(s,n,a){function i(d,f){if(!n[d]){if(!s[d]){var h=typeof mt=="function"&&mt;if(!f&&h)return h(d,!0);if(o)return o(d,!0);var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v}var m=n[d]={exports:{}};s[d][0].call(m.exports,function(g){var b=s[d][1][g];return i(b||g)},m,m.exports,e,s,n,a)}return n[d].exports}for(var o=typeof mt=="function"&&mt,l=0;l<a.length;l++)i(a[l]);return i}({1:[function(e,s,n){var a=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var d,f,h,v,m,g,b,y=[],x=0,w=l.length,_=w,E=a.getTypeOf(l)!=="string";x<l.length;)_=w-x,h=E?(d=l[x++],f=x<w?l[x++]:0,x<w?l[x++]:0):(d=l.charCodeAt(x++),f=x<w?l.charCodeAt(x++):0,x<w?l.charCodeAt(x++):0),v=d>>2,m=(3&d)<<4|f>>4,g=1<_?(15&f)<<2|h>>6:64,b=2<_?63&h:64,y.push(o.charAt(v)+o.charAt(m)+o.charAt(g)+o.charAt(b));return y.join("")},n.decode=function(l){var d,f,h,v,m,g,b=0,y=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var w,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&_--,l.charAt(l.length-2)===o.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|_):new Array(0|_);b<l.length;)d=o.indexOf(l.charAt(b++))<<2|(v=o.indexOf(l.charAt(b++)))>>4,f=(15&v)<<4|(m=o.indexOf(l.charAt(b++)))>>2,h=(3&m)<<6|(g=o.indexOf(l.charAt(b++))),w[y++]=d,m!==64&&(w[y++]=f),g!==64&&(w[y++]=h);return w}},{"./support":30,"./utils":32}],2:[function(e,s,n){var a=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function d(f,h,v,m,g){this.compressedSize=f,this.uncompressedSize=h,this.crc32=v,this.compression=m,this.compressedContent=g}d.prototype={getContentWorker:function(){var f=new i(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new i(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,h,v){return f.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},s.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,n){var a=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,n){var a=e("./utils"),i=function(){for(var o,l=[],d=0;d<256;d++){o=d;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;l[d]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?a.getTypeOf(o)!=="string"?function(d,f,h,v){var m=i,g=v+h;d^=-1;for(var b=v;b<g;b++)d=d>>>8^m[255&(d^f[b])];return-1^d}(0|l,o,o.length,0):function(d,f,h,v){var m=i,g=v+h;d^=-1;for(var b=v;b<g;b++)d=d>>>8^m[255&(d^f.charCodeAt(b))];return-1^d}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,s,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,s,n){var a=null;a=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:a}},{lie:37}],7:[function(e,s,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),d=a?"uint8array":"array";function f(h,v){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=v,this.meta={}}n.magic="\b\0",o.inherits(f,l),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(d,h.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(v){h.push({data:v,meta:h.meta})}},n.compressWorker=function(h){return new f("Deflate",h)},n.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,n){function a(m,g){var b,y="";for(b=0;b<g;b++)y+=String.fromCharCode(255&m),m>>>=8;return y}function i(m,g,b,y,x,w){var _,E,S=m.file,F=m.compression,R=w!==d.utf8encode,Z=o.transformTo("string",w(S.name)),L=o.transformTo("string",d.utf8encode(S.name)),O=S.comment,N=o.transformTo("string",w(O)),k=o.transformTo("string",d.utf8encode(O)),A=L.length!==S.name.length,u=k.length!==O.length,D="",H="",W="",ee=S.dir,B=S.date,U={crc32:0,compressedSize:0,uncompressedSize:0};g&&!b||(U.crc32=m.crc32,U.compressedSize=m.compressedSize,U.uncompressedSize=m.uncompressedSize);var z=0;g&&(z|=8),R||!A&&!u||(z|=2048);var P=0,re=0;ee&&(P|=16),x==="UNIX"?(re=798,P|=function(Y,fe){var xe=Y;return Y||(xe=fe?16893:33204),(65535&xe)<<16}(S.unixPermissions,ee)):(re=20,P|=function(Y){return 63&(Y||0)}(S.dosPermissions)),_=B.getUTCHours(),_<<=6,_|=B.getUTCMinutes(),_<<=5,_|=B.getUTCSeconds()/2,E=B.getUTCFullYear()-1980,E<<=4,E|=B.getUTCMonth()+1,E<<=5,E|=B.getUTCDate(),A&&(H=a(1,1)+a(f(Z),4)+L,D+="up"+a(H.length,2)+H),u&&(W=a(1,1)+a(f(N),4)+k,D+="uc"+a(W.length,2)+W);var X="";return X+=`
\0`,X+=a(z,2),X+=F.magic,X+=a(_,2),X+=a(E,2),X+=a(U.crc32,4),X+=a(U.compressedSize,4),X+=a(U.uncompressedSize,4),X+=a(Z.length,2),X+=a(D.length,2),{fileRecord:h.LOCAL_FILE_HEADER+X+Z+D,dirRecord:h.CENTRAL_FILE_HEADER+a(re,2)+X+a(N.length,2)+"\0\0\0\0"+a(P,4)+a(y,4)+Z+D+N}}var o=e("../utils"),l=e("../stream/GenericWorker"),d=e("../utf8"),f=e("../crc32"),h=e("../signature");function v(m,g,b,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=b,this.encodeFileName=y,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(v,l),v.prototype.push=function(m){var g=m.meta.percent||0,b=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:b?(g+100*(b-y-1))/b:100}}))},v.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var g=this.streamFiles&&!m.file.dir;if(g){var b=i(m,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(m){this.accumulate=!1;var g=this.streamFiles&&!m.file.dir,b=i(m,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),g)this.push({data:function(y){return h.DATA_DESCRIPTOR+a(y.crc32,4)+a(y.compressedSize,4)+a(y.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var m=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var b=this.bytesWritten-m,y=function(x,w,_,E,S){var F=o.transformTo("string",S(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(x,2)+a(x,2)+a(w,4)+a(_,4)+a(F.length,2)+F}(this.dirRecords.length,b,m,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(m){this._sources.push(m);var g=this;return m.on("data",function(b){g.processChunk(b)}),m.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),m.on("error",function(b){g.error(b)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(m){var g=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var b=0;b<g.length;b++)try{g[b].error(m)}catch{}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,g=0;g<m.length;g++)m[g].lock()},s.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,n){var a=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(o,l,d){var f=new i(l.streamFiles,d,l.platform,l.encodeFileName),h=0;try{o.forEach(function(v,m){h++;var g=function(w,_){var E=w||_,S=a[E];if(!S)throw new Error(E+" is not a valid compression method !");return S}(m.options.compression,l.compression),b=m.options.compressionOptions||l.compressionOptions||{},y=m.dir,x=m.date;m._compressWorker(g,b).withStreamInfo("file",{name:v,dir:y,date:x,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(v){f.error(v)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,n){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new a;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(i,o){return new a().loadAsync(i,o)},a.external=e("./external"),s.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,n){var a=e("./utils"),i=e("./external"),o=e("./utf8"),l=e("./zipEntries"),d=e("./stream/Crc32Probe"),f=e("./nodejsUtils");function h(v){return new i.Promise(function(m,g){var b=v.decompressed.getContentWorker().pipe(new d);b.on("error",function(y){g(y)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}s.exports=function(v,m){var g=this;return m=a.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(v)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,m.optimizedBinaryString,m.base64).then(function(b){var y=new l(m);return y.load(b),y}).then(function(b){var y=[i.Promise.resolve(b)],x=b.files;if(m.checkCRC32)for(var w=0;w<x.length;w++)y.push(h(x[w]));return i.Promise.all(y)}).then(function(b){for(var y=b.shift(),x=y.files,w=0;w<x.length;w++){var _=x[w],E=_.fileNameStr,S=a.resolve(_.fileNameStr);g.file(S,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(g.file(S).unsafeOriginalName=E)}return y.zipComment.length&&(g.comment=y.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,n){var a=e("../utils"),i=e("../stream/GenericWorker");function o(l,d){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}a.inherits(o,i),o.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,n){var a=e("readable-stream").Readable;function i(o,l,d){a.call(this,l),this._helper=o;var f=this;o.on("data",function(h,v){f.push(h)||f._helper.pause(),d&&d(v)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}e("../utils").inherits(i,a),i.prototype._read=function(){this._helper.resume()},s.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,s,n){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,i);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,i)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var i=new Buffer(a);return i.fill(0),i},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,s,n){function a(S,F,R){var Z,L=o.getTypeOf(F),O=o.extend(R||{},f);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(S=x(S)),O.createFolders&&(Z=y(S))&&w.call(this,Z,!0);var N=L==="string"&&O.binary===!1&&O.base64===!1;R&&R.binary!==void 0||(O.binary=!N),(F instanceof h&&F.uncompressedSize===0||O.dir||!F||F.length===0)&&(O.base64=!1,O.binary=!0,F="",O.compression="STORE",L="string");var k=null;k=F instanceof h||F instanceof l?F:g.isNode&&g.isStream(F)?new b(S,F):o.prepareContent(S,F,O.binary,O.optimizedBinaryString,O.base64);var A=new v(S,k,O);this.files[S]=A}var i=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),f=e("./defaults"),h=e("./compressedObject"),v=e("./zipObject"),m=e("./generate"),g=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),y=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var F=S.lastIndexOf("/");return 0<F?S.substring(0,F):""},x=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},w=function(S,F){return F=F!==void 0?F:f.createFolders,S=x(S),this.files[S]||a.call(this,S,null,{dir:!0,createFolders:F}),this.files[S]};function _(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var F,R,Z;for(F in this.files)Z=this.files[F],(R=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&S(R,Z)},filter:function(S){var F=[];return this.forEach(function(R,Z){S(R,Z)&&F.push(Z)}),F},file:function(S,F,R){if(arguments.length!==1)return S=this.root+S,a.call(this,S,F,R),this;if(_(S)){var Z=S;return this.filter(function(O,N){return!N.dir&&Z.test(O)})}var L=this.files[this.root+S];return L&&!L.dir?L:null},folder:function(S){if(!S)return this;if(_(S))return this.filter(function(L,O){return O.dir&&S.test(L)});var F=this.root+S,R=w.call(this,F),Z=this.clone();return Z.root=R.name,Z},remove:function(S){S=this.root+S;var F=this.files[S];if(F||(S.slice(-1)!=="/"&&(S+="/"),F=this.files[S]),F&&!F.dir)delete this.files[S];else for(var R=this.filter(function(L,O){return O.name.slice(0,S.length)===S}),Z=0;Z<R.length;Z++)delete this.files[R[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var F,R={};try{if((R=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var Z=R.comment||this.comment||"";F=m.generateWorker(this,R,Z)}catch(L){(F=new l("error")).error(L)}return new d(F,R.type||"string",R.mimeType)},generateAsync:function(S,F){return this.generateInternalStream(S).accumulate(F)},generateNodeStream:function(S,F){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(F)}};s.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,n){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,n){var a=e("./DataReader");function i(o){a.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(i,a),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),d=o.charCodeAt(1),f=o.charCodeAt(2),h=o.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===d&&this.data[v+2]===f&&this.data[v+3]===h)return v-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),d=o.charCodeAt(1),f=o.charCodeAt(2),h=o.charCodeAt(3),v=this.readData(4);return l===v[0]&&d===v[1]&&f===v[2]&&h===v[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,s,n){var a=e("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,d=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=o,d},readString:function(o){return a.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=i},{"../utils":32}],19:[function(e,s,n){var a=e("./Uint8ArrayReader");function i(o){a.call(this,o)}e("../utils").inherits(i,a),i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,n){var a=e("./DataReader");function i(o){a.call(this,o)}e("../utils").inherits(i,a),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,s,n){var a=e("./ArrayReader");function i(o){a.call(this,o)}e("../utils").inherits(i,a),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,n){var a=e("../utils"),i=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),d=e("./NodeBufferReader"),f=e("./Uint8ArrayReader");s.exports=function(h){var v=a.getTypeOf(h);return a.checkSupport(v),v!=="string"||i.uint8array?v==="nodebuffer"?new d(h):i.uint8array?new f(a.transformTo("uint8array",h)):new o(a.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,n){var a=e("./GenericWorker"),i=e("../utils");function o(l){a.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(o,a),o.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,n){var a=e("./GenericWorker"),i=e("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,a),o.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,n){var a=e("../utils"),i=e("./GenericWorker");function o(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(o,i),o.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}i.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,n){var a=e("../utils"),i=e("./GenericWorker");function o(l){i.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=a.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}a.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,n){function a(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(l){o.processChunk(l)}),i.on("end",function(){o.end()}),i.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},s.exports=a},{}],29:[function(e,s,n){var a=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),d=e("../support"),f=e("../external"),h=null;if(d.nodestream)try{h=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(g,b){return new f.Promise(function(y,x){var w=[],_=g._internalType,E=g._outputType,S=g._mimeType;g.on("data",function(F,R){w.push(F),b&&b(R)}).on("error",function(F){w=[],x(F)}).on("end",function(){try{var F=function(R,Z,L){switch(R){case"blob":return a.newBlob(a.transformTo("arraybuffer",Z),L);case"base64":return l.encode(Z);default:return a.transformTo(R,Z)}}(E,function(R,Z){var L,O=0,N=null,k=0;for(L=0;L<Z.length;L++)k+=Z[L].length;switch(R){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(N=new Uint8Array(k),L=0;L<Z.length;L++)N.set(Z[L],O),O+=Z[L].length;return N;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+R+"'")}}(_,w),S);y(F)}catch(R){x(R)}w=[]}).resume()})}function m(g,b,y){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=y,a.checkSupport(x),this._worker=g.pipe(new i(x)),g.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}m.prototype={accumulate:function(g){return v(this,g)},on:function(g,b){var y=this;return g==="data"?this._worker.on(g,function(x){b.call(y,x.data,x.meta)}):this._worker.on(g,function(){a.delay(b,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},s.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var a=new ArrayBuffer(0);try{n.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(a),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,n){for(var a=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}n.utf8encode=function(m){return i.nodebuffer?o.newBufferFrom(m,"utf-8"):function(g){var b,y,x,w,_,E=g.length,S=0;for(w=0;w<E;w++)(64512&(y=g.charCodeAt(w)))==55296&&w+1<E&&(64512&(x=g.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),w++),S+=y<128?1:y<2048?2:y<65536?3:4;for(b=i.uint8array?new Uint8Array(S):new Array(S),w=_=0;_<S;w++)(64512&(y=g.charCodeAt(w)))==55296&&w+1<E&&(64512&(x=g.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),w++),y<128?b[_++]=y:(y<2048?b[_++]=192|y>>>6:(y<65536?b[_++]=224|y>>>12:(b[_++]=240|y>>>18,b[_++]=128|y>>>12&63),b[_++]=128|y>>>6&63),b[_++]=128|63&y);return b}(m)},n.utf8decode=function(m){return i.nodebuffer?a.transformTo("nodebuffer",m).toString("utf-8"):function(g){var b,y,x,w,_=g.length,E=new Array(2*_);for(b=y=0;b<_;)if((x=g[b++])<128)E[y++]=x;else if(4<(w=d[x]))E[y++]=65533,b+=w-1;else{for(x&=w===2?31:w===3?15:7;1<w&&b<_;)x=x<<6|63&g[b++],w--;1<w?E[y++]=65533:x<65536?E[y++]=x:(x-=65536,E[y++]=55296|x>>10&1023,E[y++]=56320|1023&x)}return E.length!==y&&(E.subarray?E=E.subarray(0,y):E.length=y),a.applyFromCharCode(E)}(m=a.transformTo(i.uint8array?"uint8array":"array",m))},a.inherits(h,l),h.prototype.processChunk=function(m){var g=a.transformTo(i.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=g;(g=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),g.set(b,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var y=function(w,_){var E;for((_=_||w.length)>w.length&&(_=w.length),E=_-1;0<=E&&(192&w[E])==128;)E--;return E<0||E===0?_:E+d[w[E]]>_?E:_}(g),x=g;y!==g.length&&(i.uint8array?(x=g.subarray(0,y),this.leftOver=g.subarray(y,g.length)):(x=g.slice(0,y),this.leftOver=g.slice(y,g.length))),this.push({data:n.utf8decode(x),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,a.inherits(v,l),v.prototype.processChunk=function(m){this.push({data:n.utf8encode(m.data),meta:m.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,n){var a=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function d(b){return b}function f(b,y){for(var x=0;x<b.length;++x)y[x]=255&b.charCodeAt(x);return y}e("setimmediate"),n.newBlob=function(b,y){n.checkSupport("blob");try{return new Blob([b],{type:y})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,y,x){var w=[],_=0,E=b.length;if(E<=x)return String.fromCharCode.apply(null,b);for(;_<E;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(_,Math.min(_+x,E)))):w.push(String.fromCharCode.apply(null,b.subarray(_,Math.min(_+x,E)))),_+=x;return w.join("")},stringifyByChar:function(b){for(var y="",x=0;x<b.length;x++)y+=String.fromCharCode(b[x]);return y},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function v(b){var y=65536,x=n.getTypeOf(b),w=!0;if(x==="uint8array"?w=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return h.stringifyByChunk(b,x,y)}catch{y=Math.floor(y/2)}return h.stringifyByChar(b)}function m(b,y){for(var x=0;x<b.length;x++)y[x]=b[x];return y}n.applyFromCharCode=v;var g={};g.string={string:d,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return g.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,o.allocBuffer(b.length))}},g.array={string:v,array:d,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},g.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:d,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},g.uint8array={string:v,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:d,nodebuffer:function(b){return o.newBufferFrom(b)}},g.nodebuffer={string:v,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return g.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:d},n.transformTo=function(b,y){if(y=y||"",!b)return y;n.checkSupport(b);var x=n.getTypeOf(y);return g[x][b](y)},n.resolve=function(b){for(var y=b.split("/"),x=[],w=0;w<y.length;w++){var _=y[w];_==="."||_===""&&w!==0&&w!==y.length-1||(_===".."?x.pop():x.push(_))}return x.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":a.nodebuffer&&o.isBuffer(b)?"nodebuffer":a.uint8array&&b instanceof Uint8Array?"uint8array":a.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!a[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var y,x,w="";for(x=0;x<(b||"").length;x++)w+="\\x"+((y=b.charCodeAt(x))<16?"0":"")+y.toString(16).toUpperCase();return w},n.delay=function(b,y,x){setImmediate(function(){b.apply(x||null,y||[])})},n.inherits=function(b,y){function x(){}x.prototype=y.prototype,b.prototype=new x},n.extend=function(){var b,y,x={};for(b=0;b<arguments.length;b++)for(y in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],y)&&x[y]===void 0&&(x[y]=arguments[b][y]);return x},n.prepareContent=function(b,y,x,w,_){return l.Promise.resolve(y).then(function(E){return a.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,F){var R=new FileReader;R.onload=function(Z){S(Z.target.result)},R.onerror=function(Z){F(Z.target.error)},R.readAsArrayBuffer(E)}):E}).then(function(E){var S=n.getTypeOf(E);return S?(S==="arraybuffer"?E=n.transformTo("uint8array",E):S==="string"&&(_?E=i.decode(E):x&&w!==!0&&(E=function(F){return f(F,a.uint8array?new Uint8Array(F.length):new Array(F.length))}(E))),E):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,n){var a=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),l=e("./zipEntry"),d=e("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(v)+", expected "+i.pretty(h)+")")}},isSignature:function(h,v){var m=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===v;return this.reader.setIndex(m),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),v=d.uint8array?"uint8array":"array",m=i.transformTo(v,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,v,m,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),v=this.reader.readInt(4),m=this.reader.readData(v),this.zip64ExtensibleData[h]={id:h,length:v,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,v;for(h=0;h<this.files.length;h++)v=this.files[h],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var v=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var g=v-m;if(0<g)this.isSignature(v,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,n){var a=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),d=e("./utf8"),f=e("./compressions"),h=e("./support");function v(m,g){this.options=m,this.loadOptions=g}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var g,b;if(m.skip(22),this.fileNameLength=m.readInt(2),b=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(y){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===y)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var g=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(g),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=a(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var g,b,y,x=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<x;)g=m.readInt(2),b=m.readInt(2),y=m.readData(b),this.extraFields[g]={id:g,length:b,value:y};m.setIndex(x)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var b=i.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var x=i.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:d.utf8decode(g.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:d.utf8decode(g.readData(m.length-5))}return null}},s.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,n){function a(g,b,y){this.name=g,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=b,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),d=e("./compressedObject"),f=e("./stream/GenericWorker");a.prototype={internalStream:function(g){var b=null,y="string";try{if(!g)throw new Error("No output type specified.");var x=(y=g.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!w&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(_){(b=new f("error")).error(_)}return new i(b,y,"")},async:function(g,b){return this.internalStream(g).accumulate(b)},nodeStream:function(g,b){return this.internalStream(g||"nodebuffer").toNodejsStream(b)},_compressWorker:function(g,b){if(this._data instanceof d&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(y,g,b)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)a.prototype[h[m]]=v;s.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,n){(function(a){var i,o,l=a.MutationObserver||a.WebKitMutationObserver;if(l){var d=0,f=new l(g),h=a.document.createTextNode("");f.observe(h,{characterData:!0}),i=function(){h.data=d=++d%2}}else if(a.setImmediate||a.MessageChannel===void 0)i="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){g(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(g,0)};else{var v=new a.MessageChannel;v.port1.onmessage=g,i=function(){v.port2.postMessage(0)}}var m=[];function g(){var b,y;o=!0;for(var x=m.length;x;){for(y=m,m=[],b=-1;++b<x;)y[b]();x=m.length}o=!1}s.exports=function(b){m.push(b)!==1||o||i()}}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,n){var a=e("immediate");function i(){}var o={},l=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==i&&b(this,x)}function v(x,w,_){this.promise=x,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(x,w,_){a(function(){var E;try{E=w(_)}catch(S){return o.reject(x,S)}E===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,E)})}function g(x){var w=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof w=="function")return function(){w.apply(x,arguments)}}function b(x,w){var _=!1;function E(R){_||(_=!0,o.reject(x,R))}function S(R){_||(_=!0,o.resolve(x,R))}var F=y(function(){w(S,E)});F.status==="error"&&E(F.value)}function y(x,w){var _={};try{_.value=x(w),_.status="success"}catch(E){_.status="error",_.value=E}return _}(s.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var w=this.constructor;return this.then(function(_){return w.resolve(x()).then(function(){return _})},function(_){return w.resolve(x()).then(function(){throw _})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,w){if(typeof x!="function"&&this.state===d||typeof w!="function"&&this.state===l)return this;var _=new this.constructor(i);return this.state!==f?m(_,this.state===d?x:w,this.outcome):this.queue.push(new v(_,x,w)),_},v.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},v.prototype.otherCallFulfilled=function(x){m(this.promise,this.onFulfilled,x)},v.prototype.callRejected=function(x){o.reject(this.promise,x)},v.prototype.otherCallRejected=function(x){m(this.promise,this.onRejected,x)},o.resolve=function(x,w){var _=y(g,w);if(_.status==="error")return o.reject(x,_.value);var E=_.value;if(E)b(x,E);else{x.state=d,x.outcome=w;for(var S=-1,F=x.queue.length;++S<F;)x.queue[S].callFulfilled(w)}return x},o.reject=function(x,w){x.state=l,x.outcome=w;for(var _=-1,E=x.queue.length;++_<E;)x.queue[_].callRejected(w);return x},h.resolve=function(x){return x instanceof this?x:o.resolve(new this(i),x)},h.reject=function(x){var w=new this(i);return o.reject(w,x)},h.all=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=x.length,E=!1;if(!_)return this.resolve([]);for(var S=new Array(_),F=0,R=-1,Z=new this(i);++R<_;)L(x[R],R);return Z;function L(O,N){w.resolve(O).then(function(k){S[N]=k,++F!==_||E||(E=!0,o.resolve(Z,S))},function(k){E||(E=!0,o.reject(Z,k))})}},h.race=function(x){var w=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=x.length,E=!1;if(!_)return this.resolve([]);for(var S=-1,F=new this(i);++S<_;)R=x[S],w.resolve(R).then(function(Z){E||(E=!0,o.resolve(F,Z))},function(Z){E||(E=!0,o.reject(F,Z))});var R;return F}},{immediate:36}],38:[function(e,s,n){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,n){var a=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),d=e("./zlib/zstream"),f=Object.prototype.toString,h=0,v=-1,m=0,g=8;function b(x){if(!(this instanceof b))return new b(x);this.options=i.assign({level:v,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},x||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var _=a.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(_!==h)throw new Error(l[_]);if(w.header&&a.deflateSetHeader(this.strm,w.header),w.dictionary){var E;if(E=typeof w.dictionary=="string"?o.string2buf(w.dictionary):f.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(_=a.deflateSetDictionary(this.strm,E))!==h)throw new Error(l[_]);this._dict_set=!0}}function y(x,w){var _=new b(w);if(_.push(x,!0),_.err)throw _.msg||l[_.err];return _.result}b.prototype.push=function(x,w){var _,E,S=this.strm,F=this.options.chunkSize;if(this.ended)return!1;E=w===~~w?w:w===!0?4:0,typeof x=="string"?S.input=o.string2buf(x):f.call(x)==="[object ArrayBuffer]"?S.input=new Uint8Array(x):S.input=x,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new i.Buf8(F),S.next_out=0,S.avail_out=F),(_=a.deflate(S,E))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(S.output,S.next_out))):this.onData(i.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&_!==1);return E===4?(_=a.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):E!==2||(this.onEnd(h),!(S.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},n.Deflate=b,n.deflate=y,n.deflateRaw=function(x,w){return(w=w||{}).raw=!0,y(x,w)},n.gzip=function(x,w){return(w=w||{}).gzip=!0,y(x,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,n){var a=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),f=e("./zlib/zstream"),h=e("./zlib/gzheader"),v=Object.prototype.toString;function m(b){if(!(this instanceof m))return new m(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||b&&b.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=a.inflateInit2(this.strm,y.windowBits);if(x!==l.Z_OK)throw new Error(d[x]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function g(b,y){var x=new m(y);if(x.push(b,!0),x.err)throw x.msg||d[x.err];return x.result}m.prototype.push=function(b,y){var x,w,_,E,S,F,R=this.strm,Z=this.options.chunkSize,L=this.options.dictionary,O=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?R.input=o.binstring2buf(b):v.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new i.Buf8(Z),R.next_out=0,R.avail_out=Z),(x=a.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(F=typeof L=="string"?o.string2buf(L):v.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=a.inflateSetDictionary(this.strm,F)),x===l.Z_BUF_ERROR&&O===!0&&(x=l.Z_OK,O=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&x!==l.Z_STREAM_END&&(R.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=o.utf8border(R.output,R.next_out),E=R.next_out-_,S=o.buf2string(R.output,_),R.next_out=E,R.avail_out=Z-E,E&&i.arraySet(R.output,R.output,_,E,0),this.onData(S)):this.onData(i.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(O=!0)}while((0<R.avail_in||R.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(x=a.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=m,n.inflate=g,n.inflateRaw=function(b,y){return(y=y||{}).raw=!0,g(b,y)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,n){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(l[h]=f[h])}}return l},n.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var i={arraySet:function(l,d,f,h,v){if(d.subarray&&l.subarray)l.set(d.subarray(f,f+h),v);else for(var m=0;m<h;m++)l[v+m]=d[f+m]},flattenChunks:function(l){var d,f,h,v,m,g;for(d=h=0,f=l.length;d<f;d++)h+=l[d].length;for(g=new Uint8Array(h),d=v=0,f=l.length;d<f;d++)m=l[d],g.set(m,v),v+=m.length;return g}},o={arraySet:function(l,d,f,h,v){for(var m=0;m<h;m++)l[v+m]=d[f+m]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(a)},{}],42:[function(e,s,n){var a=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new a.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(h,v){if(v<65537&&(h.subarray&&o||!h.subarray&&i))return String.fromCharCode.apply(null,a.shrinkBuf(h,v));for(var m="",g=0;g<v;g++)m+=String.fromCharCode(h[g]);return m}l[254]=l[254]=1,n.string2buf=function(h){var v,m,g,b,y,x=h.length,w=0;for(b=0;b<x;b++)(64512&(m=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(g=h.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),b++),w+=m<128?1:m<2048?2:m<65536?3:4;for(v=new a.Buf8(w),b=y=0;y<w;b++)(64512&(m=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(g=h.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),b++),m<128?v[y++]=m:(m<2048?v[y++]=192|m>>>6:(m<65536?v[y++]=224|m>>>12:(v[y++]=240|m>>>18,v[y++]=128|m>>>12&63),v[y++]=128|m>>>6&63),v[y++]=128|63&m);return v},n.buf2binstring=function(h){return f(h,h.length)},n.binstring2buf=function(h){for(var v=new a.Buf8(h.length),m=0,g=v.length;m<g;m++)v[m]=h.charCodeAt(m);return v},n.buf2string=function(h,v){var m,g,b,y,x=v||h.length,w=new Array(2*x);for(m=g=0;m<x;)if((b=h[m++])<128)w[g++]=b;else if(4<(y=l[b]))w[g++]=65533,m+=y-1;else{for(b&=y===2?31:y===3?15:7;1<y&&m<x;)b=b<<6|63&h[m++],y--;1<y?w[g++]=65533:b<65536?w[g++]=b:(b-=65536,w[g++]=55296|b>>10&1023,w[g++]=56320|1023&b)}return f(w,g)},n.utf8border=function(h,v){var m;for((v=v||h.length)>h.length&&(v=h.length),m=v-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?v:m+l[h[m]]>v?m:v}},{"./common":41}],43:[function(e,s,n){s.exports=function(a,i,o,l){for(var d=65535&a|0,f=a>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;f=f+(d=d+i[l++]|0)|0,--h;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(e,s,n){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,n){var a=function(){for(var i,o=[],l=0;l<256;l++){i=l;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;o[l]=i}return o}();s.exports=function(i,o,l,d){var f=a,h=d+l;i^=-1;for(var v=d;v<h;v++)i=i>>>8^f[255&(i^o[v])];return-1^i}},{}],46:[function(e,s,n){var a,i=e("../utils/common"),o=e("./trees"),l=e("./adler32"),d=e("./crc32"),f=e("./messages"),h=0,v=4,m=0,g=-2,b=-1,y=4,x=2,w=8,_=9,E=286,S=30,F=19,R=2*E+1,Z=15,L=3,O=258,N=O+L+1,k=42,A=113,u=1,D=2,H=3,W=4;function ee(p,V){return p.msg=f[V],V}function B(p){return(p<<1)-(4<p?9:0)}function U(p){for(var V=p.length;0<=--V;)p[V]=0}function z(p){var V=p.state,M=V.pending;M>p.avail_out&&(M=p.avail_out),M!==0&&(i.arraySet(p.output,V.pending_buf,V.pending_out,M,p.next_out),p.next_out+=M,V.pending_out+=M,p.total_out+=M,p.avail_out-=M,V.pending-=M,V.pending===0&&(V.pending_out=0))}function P(p,V){o._tr_flush_block(p,0<=p.block_start?p.block_start:-1,p.strstart-p.block_start,V),p.block_start=p.strstart,z(p.strm)}function re(p,V){p.pending_buf[p.pending++]=V}function X(p,V){p.pending_buf[p.pending++]=V>>>8&255,p.pending_buf[p.pending++]=255&V}function Y(p,V){var M,j,$=p.max_chain_length,T=p.strstart,K=p.prev_length,J=p.nice_match,I=p.strstart>p.w_size-N?p.strstart-(p.w_size-N):0,G=p.window,Q=p.w_mask,q=p.prev,te=p.strstart+O,le=G[T+K-1],ae=G[T+K];p.prev_length>=p.good_match&&($>>=2),J>p.lookahead&&(J=p.lookahead);do if(G[(M=V)+K]===ae&&G[M+K-1]===le&&G[M]===G[T]&&G[++M]===G[T+1]){T+=2,M++;do;while(G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&G[++T]===G[++M]&&T<te);if(j=O-(te-T),T=te-O,K<j){if(p.match_start=V,J<=(K=j))break;le=G[T+K-1],ae=G[T+K]}}while((V=q[V&Q])>I&&--$!=0);return K<=p.lookahead?K:p.lookahead}function fe(p){var V,M,j,$,T,K,J,I,G,Q,q=p.w_size;do{if($=p.window_size-p.lookahead-p.strstart,p.strstart>=q+(q-N)){for(i.arraySet(p.window,p.window,q,q,0),p.match_start-=q,p.strstart-=q,p.block_start-=q,V=M=p.hash_size;j=p.head[--V],p.head[V]=q<=j?j-q:0,--M;);for(V=M=q;j=p.prev[--V],p.prev[V]=q<=j?j-q:0,--M;);$+=q}if(p.strm.avail_in===0)break;if(K=p.strm,J=p.window,I=p.strstart+p.lookahead,G=$,Q=void 0,Q=K.avail_in,G<Q&&(Q=G),M=Q===0?0:(K.avail_in-=Q,i.arraySet(J,K.input,K.next_in,Q,I),K.state.wrap===1?K.adler=l(K.adler,J,Q,I):K.state.wrap===2&&(K.adler=d(K.adler,J,Q,I)),K.next_in+=Q,K.total_in+=Q,Q),p.lookahead+=M,p.lookahead+p.insert>=L)for(T=p.strstart-p.insert,p.ins_h=p.window[T],p.ins_h=(p.ins_h<<p.hash_shift^p.window[T+1])&p.hash_mask;p.insert&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[T+L-1])&p.hash_mask,p.prev[T&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=T,T++,p.insert--,!(p.lookahead+p.insert<L)););}while(p.lookahead<N&&p.strm.avail_in!==0)}function xe(p,V){for(var M,j;;){if(p.lookahead<N){if(fe(p),p.lookahead<N&&V===h)return u;if(p.lookahead===0)break}if(M=0,p.lookahead>=L&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,M=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),M!==0&&p.strstart-M<=p.w_size-N&&(p.match_length=Y(p,M)),p.match_length>=L)if(j=o._tr_tally(p,p.strstart-p.match_start,p.match_length-L),p.lookahead-=p.match_length,p.match_length<=p.max_lazy_match&&p.lookahead>=L){for(p.match_length--;p.strstart++,p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,M=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart,--p.match_length!=0;);p.strstart++}else p.strstart+=p.match_length,p.match_length=0,p.ins_h=p.window[p.strstart],p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+1])&p.hash_mask;else j=o._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++;if(j&&(P(p,!1),p.strm.avail_out===0))return u}return p.insert=p.strstart<L-1?p.strstart:L-1,V===v?(P(p,!0),p.strm.avail_out===0?H:W):p.last_lit&&(P(p,!1),p.strm.avail_out===0)?u:D}function ne(p,V){for(var M,j,$;;){if(p.lookahead<N){if(fe(p),p.lookahead<N&&V===h)return u;if(p.lookahead===0)break}if(M=0,p.lookahead>=L&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,M=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),p.prev_length=p.match_length,p.prev_match=p.match_start,p.match_length=L-1,M!==0&&p.prev_length<p.max_lazy_match&&p.strstart-M<=p.w_size-N&&(p.match_length=Y(p,M),p.match_length<=5&&(p.strategy===1||p.match_length===L&&4096<p.strstart-p.match_start)&&(p.match_length=L-1)),p.prev_length>=L&&p.match_length<=p.prev_length){for($=p.strstart+p.lookahead-L,j=o._tr_tally(p,p.strstart-1-p.prev_match,p.prev_length-L),p.lookahead-=p.prev_length-1,p.prev_length-=2;++p.strstart<=$&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,M=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),--p.prev_length!=0;);if(p.match_available=0,p.match_length=L-1,p.strstart++,j&&(P(p,!1),p.strm.avail_out===0))return u}else if(p.match_available){if((j=o._tr_tally(p,0,p.window[p.strstart-1]))&&P(p,!1),p.strstart++,p.lookahead--,p.strm.avail_out===0)return u}else p.match_available=1,p.strstart++,p.lookahead--}return p.match_available&&(j=o._tr_tally(p,0,p.window[p.strstart-1]),p.match_available=0),p.insert=p.strstart<L-1?p.strstart:L-1,V===v?(P(p,!0),p.strm.avail_out===0?H:W):p.last_lit&&(P(p,!1),p.strm.avail_out===0)?u:D}function se(p,V,M,j,$){this.good_length=p,this.max_lazy=V,this.nice_length=M,this.max_chain=j,this.func=$}function be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*S+1)),this.bl_tree=new i.Buf16(2*(2*F+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Z+1),this.heap=new i.Buf16(2*E+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(p){var V;return p&&p.state?(p.total_in=p.total_out=0,p.data_type=x,(V=p.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?k:A,p.adler=V.wrap===2?0:1,V.last_flush=h,o._tr_init(V),m):ee(p,g)}function Le(p){var V=he(p);return V===m&&function(M){M.window_size=2*M.w_size,U(M.head),M.max_lazy_match=a[M.level].max_lazy,M.good_match=a[M.level].good_length,M.nice_match=a[M.level].nice_length,M.max_chain_length=a[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=L-1,M.match_available=0,M.ins_h=0}(p.state),V}function Ne(p,V,M,j,$,T){if(!p)return g;var K=1;if(V===b&&(V=6),j<0?(K=0,j=-j):15<j&&(K=2,j-=16),$<1||_<$||M!==w||j<8||15<j||V<0||9<V||T<0||y<T)return ee(p,g);j===8&&(j=9);var J=new be;return(p.state=J).strm=p,J.wrap=K,J.gzhead=null,J.w_bits=j,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=$+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+L-1)/L),J.window=new i.Buf8(2*J.w_size),J.head=new i.Buf16(J.hash_size),J.prev=new i.Buf16(J.w_size),J.lit_bufsize=1<<$+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new i.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=V,J.strategy=T,J.method=M,Le(p)}a=[new se(0,0,0,0,function(p,V){var M=65535;for(M>p.pending_buf_size-5&&(M=p.pending_buf_size-5);;){if(p.lookahead<=1){if(fe(p),p.lookahead===0&&V===h)return u;if(p.lookahead===0)break}p.strstart+=p.lookahead,p.lookahead=0;var j=p.block_start+M;if((p.strstart===0||p.strstart>=j)&&(p.lookahead=p.strstart-j,p.strstart=j,P(p,!1),p.strm.avail_out===0)||p.strstart-p.block_start>=p.w_size-N&&(P(p,!1),p.strm.avail_out===0))return u}return p.insert=0,V===v?(P(p,!0),p.strm.avail_out===0?H:W):(p.strstart>p.block_start&&(P(p,!1),p.strm.avail_out),u)}),new se(4,4,8,4,xe),new se(4,5,16,8,xe),new se(4,6,32,32,xe),new se(4,4,16,16,ne),new se(8,16,32,32,ne),new se(8,16,128,128,ne),new se(8,32,128,256,ne),new se(32,128,258,1024,ne),new se(32,258,258,4096,ne)],n.deflateInit=function(p,V){return Ne(p,V,w,15,8,0)},n.deflateInit2=Ne,n.deflateReset=Le,n.deflateResetKeep=he,n.deflateSetHeader=function(p,V){return p&&p.state?p.state.wrap!==2?g:(p.state.gzhead=V,m):g},n.deflate=function(p,V){var M,j,$,T;if(!p||!p.state||5<V||V<0)return p?ee(p,g):g;if(j=p.state,!p.output||!p.input&&p.avail_in!==0||j.status===666&&V!==v)return ee(p,p.avail_out===0?-5:g);if(j.strm=p,M=j.last_flush,j.last_flush=V,j.status===k)if(j.wrap===2)p.adler=0,re(j,31),re(j,139),re(j,8),j.gzhead?(re(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),re(j,255&j.gzhead.time),re(j,j.gzhead.time>>8&255),re(j,j.gzhead.time>>16&255),re(j,j.gzhead.time>>24&255),re(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),re(j,255&j.gzhead.os),j.gzhead.extra&&j.gzhead.extra.length&&(re(j,255&j.gzhead.extra.length),re(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(p.adler=d(p.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=69):(re(j,0),re(j,0),re(j,0),re(j,0),re(j,0),re(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),re(j,3),j.status=A);else{var K=w+(j.w_bits-8<<4)<<8;K|=(2<=j.strategy||j.level<2?0:j.level<6?1:j.level===6?2:3)<<6,j.strstart!==0&&(K|=32),K+=31-K%31,j.status=A,X(j,K),j.strstart!==0&&(X(j,p.adler>>>16),X(j,65535&p.adler)),p.adler=1}if(j.status===69)if(j.gzhead.extra){for($=j.pending;j.gzindex<(65535&j.gzhead.extra.length)&&(j.pending!==j.pending_buf_size||(j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),z(p),$=j.pending,j.pending!==j.pending_buf_size));)re(j,255&j.gzhead.extra[j.gzindex]),j.gzindex++;j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=73)}else j.status=73;if(j.status===73)if(j.gzhead.name){$=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),z(p),$=j.pending,j.pending===j.pending_buf_size)){T=1;break}T=j.gzindex<j.gzhead.name.length?255&j.gzhead.name.charCodeAt(j.gzindex++):0,re(j,T)}while(T!==0);j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),T===0&&(j.gzindex=0,j.status=91)}else j.status=91;if(j.status===91)if(j.gzhead.comment){$=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),z(p),$=j.pending,j.pending===j.pending_buf_size)){T=1;break}T=j.gzindex<j.gzhead.comment.length?255&j.gzhead.comment.charCodeAt(j.gzindex++):0,re(j,T)}while(T!==0);j.gzhead.hcrc&&j.pending>$&&(p.adler=d(p.adler,j.pending_buf,j.pending-$,$)),T===0&&(j.status=103)}else j.status=103;if(j.status===103&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&z(p),j.pending+2<=j.pending_buf_size&&(re(j,255&p.adler),re(j,p.adler>>8&255),p.adler=0,j.status=A)):j.status=A),j.pending!==0){if(z(p),p.avail_out===0)return j.last_flush=-1,m}else if(p.avail_in===0&&B(V)<=B(M)&&V!==v)return ee(p,-5);if(j.status===666&&p.avail_in!==0)return ee(p,-5);if(p.avail_in!==0||j.lookahead!==0||V!==h&&j.status!==666){var J=j.strategy===2?function(I,G){for(var Q;;){if(I.lookahead===0&&(fe(I),I.lookahead===0)){if(G===h)return u;break}if(I.match_length=0,Q=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,Q&&(P(I,!1),I.strm.avail_out===0))return u}return I.insert=0,G===v?(P(I,!0),I.strm.avail_out===0?H:W):I.last_lit&&(P(I,!1),I.strm.avail_out===0)?u:D}(j,V):j.strategy===3?function(I,G){for(var Q,q,te,le,ae=I.window;;){if(I.lookahead<=O){if(fe(I),I.lookahead<=O&&G===h)return u;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=L&&0<I.strstart&&(q=ae[te=I.strstart-1])===ae[++te]&&q===ae[++te]&&q===ae[++te]){le=I.strstart+O;do;while(q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&q===ae[++te]&&te<le);I.match_length=O-(le-te),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=L?(Q=o._tr_tally(I,1,I.match_length-L),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(Q=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),Q&&(P(I,!1),I.strm.avail_out===0))return u}return I.insert=0,G===v?(P(I,!0),I.strm.avail_out===0?H:W):I.last_lit&&(P(I,!1),I.strm.avail_out===0)?u:D}(j,V):a[j.level].func(j,V);if(J!==H&&J!==W||(j.status=666),J===u||J===H)return p.avail_out===0&&(j.last_flush=-1),m;if(J===D&&(V===1?o._tr_align(j):V!==5&&(o._tr_stored_block(j,0,0,!1),V===3&&(U(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),z(p),p.avail_out===0))return j.last_flush=-1,m}return V!==v?m:j.wrap<=0?1:(j.wrap===2?(re(j,255&p.adler),re(j,p.adler>>8&255),re(j,p.adler>>16&255),re(j,p.adler>>24&255),re(j,255&p.total_in),re(j,p.total_in>>8&255),re(j,p.total_in>>16&255),re(j,p.total_in>>24&255)):(X(j,p.adler>>>16),X(j,65535&p.adler)),z(p),0<j.wrap&&(j.wrap=-j.wrap),j.pending!==0?m:1)},n.deflateEnd=function(p){var V;return p&&p.state?(V=p.state.status)!==k&&V!==69&&V!==73&&V!==91&&V!==103&&V!==A&&V!==666?ee(p,g):(p.state=null,V===A?ee(p,-3):m):g},n.deflateSetDictionary=function(p,V){var M,j,$,T,K,J,I,G,Q=V.length;if(!p||!p.state||(T=(M=p.state).wrap)===2||T===1&&M.status!==k||M.lookahead)return g;for(T===1&&(p.adler=l(p.adler,V,Q,0)),M.wrap=0,Q>=M.w_size&&(T===0&&(U(M.head),M.strstart=0,M.block_start=0,M.insert=0),G=new i.Buf8(M.w_size),i.arraySet(G,V,Q-M.w_size,M.w_size,0),V=G,Q=M.w_size),K=p.avail_in,J=p.next_in,I=p.input,p.avail_in=Q,p.next_in=0,p.input=V,fe(M);M.lookahead>=L;){for(j=M.strstart,$=M.lookahead-(L-1);M.ins_h=(M.ins_h<<M.hash_shift^M.window[j+L-1])&M.hash_mask,M.prev[j&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=j,j++,--$;);M.strstart=j,M.lookahead=L-1,fe(M)}return M.strstart+=M.lookahead,M.block_start=M.strstart,M.insert=M.lookahead,M.lookahead=0,M.match_length=M.prev_length=L-1,M.match_available=0,p.next_in=J,p.input=I,p.avail_in=K,M.wrap=T,m},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,n){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,n){s.exports=function(a,i){var o,l,d,f,h,v,m,g,b,y,x,w,_,E,S,F,R,Z,L,O,N,k,A,u,D;o=a.state,l=a.next_in,u=a.input,d=l+(a.avail_in-5),f=a.next_out,D=a.output,h=f-(i-a.avail_out),v=f+(a.avail_out-257),m=o.dmax,g=o.wsize,b=o.whave,y=o.wnext,x=o.window,w=o.hold,_=o.bits,E=o.lencode,S=o.distcode,F=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{_<15&&(w+=u[l++]<<_,_+=8,w+=u[l++]<<_,_+=8),Z=E[w&F];t:for(;;){if(w>>>=L=Z>>>24,_-=L,(L=Z>>>16&255)===0)D[f++]=65535&Z;else{if(!(16&L)){if(!(64&L)){Z=E[(65535&Z)+(w&(1<<L)-1)];continue t}if(32&L){o.mode=12;break e}a.msg="invalid literal/length code",o.mode=30;break e}O=65535&Z,(L&=15)&&(_<L&&(w+=u[l++]<<_,_+=8),O+=w&(1<<L)-1,w>>>=L,_-=L),_<15&&(w+=u[l++]<<_,_+=8,w+=u[l++]<<_,_+=8),Z=S[w&R];r:for(;;){if(w>>>=L=Z>>>24,_-=L,!(16&(L=Z>>>16&255))){if(!(64&L)){Z=S[(65535&Z)+(w&(1<<L)-1)];continue r}a.msg="invalid distance code",o.mode=30;break e}if(N=65535&Z,_<(L&=15)&&(w+=u[l++]<<_,(_+=8)<L&&(w+=u[l++]<<_,_+=8)),m<(N+=w&(1<<L)-1)){a.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=L,_-=L,(L=f-h)<N){if(b<(L=N-L)&&o.sane){a.msg="invalid distance too far back",o.mode=30;break e}if(A=x,(k=0)===y){if(k+=g-L,L<O){for(O-=L;D[f++]=x[k++],--L;);k=f-N,A=D}}else if(y<L){if(k+=g+y-L,(L-=y)<O){for(O-=L;D[f++]=x[k++],--L;);if(k=0,y<O){for(O-=L=y;D[f++]=x[k++],--L;);k=f-N,A=D}}}else if(k+=y-L,L<O){for(O-=L;D[f++]=x[k++],--L;);k=f-N,A=D}for(;2<O;)D[f++]=A[k++],D[f++]=A[k++],D[f++]=A[k++],O-=3;O&&(D[f++]=A[k++],1<O&&(D[f++]=A[k++]))}else{for(k=f-N;D[f++]=D[k++],D[f++]=D[k++],D[f++]=D[k++],2<(O-=3););O&&(D[f++]=D[k++],1<O&&(D[f++]=D[k++]))}break}}break}}while(l<d&&f<v);l-=O=_>>3,w&=(1<<(_-=O<<3))-1,a.next_in=l,a.next_out=f,a.avail_in=l<d?d-l+5:5-(l-d),a.avail_out=f<v?v-f+257:257-(f-v),o.hold=w,o.bits=_}},{}],49:[function(e,s,n){var a=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),l=e("./inffast"),d=e("./inftrees"),f=1,h=2,v=0,m=-2,g=1,b=852,y=592;function x(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(k){var A;return k&&k.state?(A=k.state,k.total_in=k.total_out=A.total=0,k.msg="",A.wrap&&(k.adler=1&A.wrap),A.mode=g,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new a.Buf32(b),A.distcode=A.distdyn=new a.Buf32(y),A.sane=1,A.back=-1,v):m}function E(k){var A;return k&&k.state?((A=k.state).wsize=0,A.whave=0,A.wnext=0,_(k)):m}function S(k,A){var u,D;return k&&k.state?(D=k.state,A<0?(u=0,A=-A):(u=1+(A>>4),A<48&&(A&=15)),A&&(A<8||15<A)?m:(D.window!==null&&D.wbits!==A&&(D.window=null),D.wrap=u,D.wbits=A,E(k))):m}function F(k,A){var u,D;return k?(D=new w,(k.state=D).window=null,(u=S(k,A))!==v&&(k.state=null),u):m}var R,Z,L=!0;function O(k){if(L){var A;for(R=new a.Buf32(512),Z=new a.Buf32(32),A=0;A<144;)k.lens[A++]=8;for(;A<256;)k.lens[A++]=9;for(;A<280;)k.lens[A++]=7;for(;A<288;)k.lens[A++]=8;for(d(f,k.lens,0,288,R,0,k.work,{bits:9}),A=0;A<32;)k.lens[A++]=5;d(h,k.lens,0,32,Z,0,k.work,{bits:5}),L=!1}k.lencode=R,k.lenbits=9,k.distcode=Z,k.distbits=5}function N(k,A,u,D){var H,W=k.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new a.Buf8(W.wsize)),D>=W.wsize?(a.arraySet(W.window,A,u-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(D<(H=W.wsize-W.wnext)&&(H=D),a.arraySet(W.window,A,u-D,H,W.wnext),(D-=H)?(a.arraySet(W.window,A,u-D,D,0),W.wnext=D,W.whave=W.wsize):(W.wnext+=H,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=H))),0}n.inflateReset=E,n.inflateReset2=S,n.inflateResetKeep=_,n.inflateInit=function(k){return F(k,15)},n.inflateInit2=F,n.inflate=function(k,A){var u,D,H,W,ee,B,U,z,P,re,X,Y,fe,xe,ne,se,be,he,Le,Ne,p,V,M,j,$=0,T=new a.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return m;(u=k.state).mode===12&&(u.mode=13),ee=k.next_out,H=k.output,U=k.avail_out,W=k.next_in,D=k.input,B=k.avail_in,z=u.hold,P=u.bits,re=B,X=U,V=v;e:for(;;)switch(u.mode){case g:if(u.wrap===0){u.mode=13;break}for(;P<16;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(2&u.wrap&&z===35615){T[u.check=0]=255&z,T[1]=z>>>8&255,u.check=o(u.check,T,2,0),P=z=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&z)<<8)+(z>>8))%31){k.msg="incorrect header check",u.mode=30;break}if((15&z)!=8){k.msg="unknown compression method",u.mode=30;break}if(P-=4,p=8+(15&(z>>>=4)),u.wbits===0)u.wbits=p;else if(p>u.wbits){k.msg="invalid window size",u.mode=30;break}u.dmax=1<<p,k.adler=u.check=1,u.mode=512&z?10:12,P=z=0;break;case 2:for(;P<16;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(u.flags=z,(255&u.flags)!=8){k.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){k.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=z>>8&1),512&u.flags&&(T[0]=255&z,T[1]=z>>>8&255,u.check=o(u.check,T,2,0)),P=z=0,u.mode=3;case 3:for(;P<32;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.head&&(u.head.time=z),512&u.flags&&(T[0]=255&z,T[1]=z>>>8&255,T[2]=z>>>16&255,T[3]=z>>>24&255,u.check=o(u.check,T,4,0)),P=z=0,u.mode=4;case 4:for(;P<16;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.head&&(u.head.xflags=255&z,u.head.os=z>>8),512&u.flags&&(T[0]=255&z,T[1]=z>>>8&255,u.check=o(u.check,T,2,0)),P=z=0,u.mode=5;case 5:if(1024&u.flags){for(;P<16;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.length=z,u.head&&(u.head.extra_len=z),512&u.flags&&(T[0]=255&z,T[1]=z>>>8&255,u.check=o(u.check,T,2,0)),P=z=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&(B<(Y=u.length)&&(Y=B),Y&&(u.head&&(p=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),a.arraySet(u.head.extra,D,W,Y,p)),512&u.flags&&(u.check=o(u.check,D,Y,W)),B-=Y,W+=Y,u.length-=Y),u.length))break e;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(B===0)break e;for(Y=0;p=D[W+Y++],u.head&&p&&u.length<65536&&(u.head.name+=String.fromCharCode(p)),p&&Y<B;);if(512&u.flags&&(u.check=o(u.check,D,Y,W)),B-=Y,W+=Y,p)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(B===0)break e;for(Y=0;p=D[W+Y++],u.head&&p&&u.length<65536&&(u.head.comment+=String.fromCharCode(p)),p&&Y<B;);if(512&u.flags&&(u.check=o(u.check,D,Y,W)),B-=Y,W+=Y,p)break e}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;P<16;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(z!==(65535&u.check)){k.msg="header crc mismatch",u.mode=30;break}P=z=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),k.adler=u.check=0,u.mode=12;break;case 10:for(;P<32;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}k.adler=u.check=x(z),P=z=0,u.mode=11;case 11:if(u.havedict===0)return k.next_out=ee,k.avail_out=U,k.next_in=W,k.avail_in=B,u.hold=z,u.bits=P,2;k.adler=u.check=1,u.mode=12;case 12:if(A===5||A===6)break e;case 13:if(u.last){z>>>=7&P,P-=7&P,u.mode=27;break}for(;P<3;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}switch(u.last=1&z,P-=1,3&(z>>>=1)){case 0:u.mode=14;break;case 1:if(O(u),u.mode=20,A!==6)break;z>>>=2,P-=2;break e;case 2:u.mode=17;break;case 3:k.msg="invalid block type",u.mode=30}z>>>=2,P-=2;break;case 14:for(z>>>=7&P,P-=7&P;P<32;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if((65535&z)!=(z>>>16^65535)){k.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&z,P=z=0,u.mode=15,A===6)break e;case 15:u.mode=16;case 16:if(Y=u.length){if(B<Y&&(Y=B),U<Y&&(Y=U),Y===0)break e;a.arraySet(H,D,W,Y,ee),B-=Y,W+=Y,U-=Y,ee+=Y,u.length-=Y;break}u.mode=12;break;case 17:for(;P<14;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(u.nlen=257+(31&z),z>>>=5,P-=5,u.ndist=1+(31&z),z>>>=5,P-=5,u.ncode=4+(15&z),z>>>=4,P-=4,286<u.nlen||30<u.ndist){k.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;P<3;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.lens[K[u.have++]]=7&z,z>>>=3,P-=3}for(;u.have<19;)u.lens[K[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,M={bits:u.lenbits},V=d(0,u.lens,0,19,u.lencode,0,u.work,M),u.lenbits=M.bits,V){k.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;se=($=u.lencode[z&(1<<u.lenbits)-1])>>>16&255,be=65535&$,!((ne=$>>>24)<=P);){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(be<16)z>>>=ne,P-=ne,u.lens[u.have++]=be;else{if(be===16){for(j=ne+2;P<j;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(z>>>=ne,P-=ne,u.have===0){k.msg="invalid bit length repeat",u.mode=30;break}p=u.lens[u.have-1],Y=3+(3&z),z>>>=2,P-=2}else if(be===17){for(j=ne+3;P<j;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}P-=ne,p=0,Y=3+(7&(z>>>=ne)),z>>>=3,P-=3}else{for(j=ne+7;P<j;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}P-=ne,p=0,Y=11+(127&(z>>>=ne)),z>>>=7,P-=7}if(u.have+Y>u.nlen+u.ndist){k.msg="invalid bit length repeat",u.mode=30;break}for(;Y--;)u.lens[u.have++]=p}}if(u.mode===30)break;if(u.lens[256]===0){k.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,M={bits:u.lenbits},V=d(f,u.lens,0,u.nlen,u.lencode,0,u.work,M),u.lenbits=M.bits,V){k.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,M={bits:u.distbits},V=d(h,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,M),u.distbits=M.bits,V){k.msg="invalid distances set",u.mode=30;break}if(u.mode=20,A===6)break e;case 20:u.mode=21;case 21:if(6<=B&&258<=U){k.next_out=ee,k.avail_out=U,k.next_in=W,k.avail_in=B,u.hold=z,u.bits=P,l(k,X),ee=k.next_out,H=k.output,U=k.avail_out,W=k.next_in,D=k.input,B=k.avail_in,z=u.hold,P=u.bits,u.mode===12&&(u.back=-1);break}for(u.back=0;se=($=u.lencode[z&(1<<u.lenbits)-1])>>>16&255,be=65535&$,!((ne=$>>>24)<=P);){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(se&&!(240&se)){for(he=ne,Le=se,Ne=be;se=($=u.lencode[Ne+((z&(1<<he+Le)-1)>>he)])>>>16&255,be=65535&$,!(he+(ne=$>>>24)<=P);){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}z>>>=he,P-=he,u.back+=he}if(z>>>=ne,P-=ne,u.back+=ne,u.length=be,se===0){u.mode=26;break}if(32&se){u.back=-1,u.mode=12;break}if(64&se){k.msg="invalid literal/length code",u.mode=30;break}u.extra=15&se,u.mode=22;case 22:if(u.extra){for(j=u.extra;P<j;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.length+=z&(1<<u.extra)-1,z>>>=u.extra,P-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;se=($=u.distcode[z&(1<<u.distbits)-1])>>>16&255,be=65535&$,!((ne=$>>>24)<=P);){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(!(240&se)){for(he=ne,Le=se,Ne=be;se=($=u.distcode[Ne+((z&(1<<he+Le)-1)>>he)])>>>16&255,be=65535&$,!(he+(ne=$>>>24)<=P);){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}z>>>=he,P-=he,u.back+=he}if(z>>>=ne,P-=ne,u.back+=ne,64&se){k.msg="invalid distance code",u.mode=30;break}u.offset=be,u.extra=15&se,u.mode=24;case 24:if(u.extra){for(j=u.extra;P<j;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}u.offset+=z&(1<<u.extra)-1,z>>>=u.extra,P-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){k.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(U===0)break e;if(Y=X-U,u.offset>Y){if((Y=u.offset-Y)>u.whave&&u.sane){k.msg="invalid distance too far back",u.mode=30;break}fe=Y>u.wnext?(Y-=u.wnext,u.wsize-Y):u.wnext-Y,Y>u.length&&(Y=u.length),xe=u.window}else xe=H,fe=ee-u.offset,Y=u.length;for(U<Y&&(Y=U),U-=Y,u.length-=Y;H[ee++]=xe[fe++],--Y;);u.length===0&&(u.mode=21);break;case 26:if(U===0)break e;H[ee++]=u.length,U--,u.mode=21;break;case 27:if(u.wrap){for(;P<32;){if(B===0)break e;B--,z|=D[W++]<<P,P+=8}if(X-=U,k.total_out+=X,u.total+=X,X&&(k.adler=u.check=u.flags?o(u.check,H,X,ee-X):i(u.check,H,X,ee-X)),X=U,(u.flags?z:x(z))!==u.check){k.msg="incorrect data check",u.mode=30;break}P=z=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;P<32;){if(B===0)break e;B--,z+=D[W++]<<P,P+=8}if(z!==(4294967295&u.total)){k.msg="incorrect length check",u.mode=30;break}P=z=0}u.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return m}return k.next_out=ee,k.avail_out=U,k.next_in=W,k.avail_in=B,u.hold=z,u.bits=P,(u.wsize||X!==k.avail_out&&u.mode<30&&(u.mode<27||A!==4))&&N(k,k.output,k.next_out,X-k.avail_out)?(u.mode=31,-4):(re-=k.avail_in,X-=k.avail_out,k.total_in+=re,k.total_out+=X,u.total+=X,u.wrap&&X&&(k.adler=u.check=u.flags?o(u.check,H,X,k.next_out-X):i(u.check,H,X,k.next_out-X)),k.data_type=u.bits+(u.last?64:0)+(u.mode===12?128:0)+(u.mode===20||u.mode===15?256:0),(re==0&&X===0||A===4)&&V===v&&(V=-5),V)},n.inflateEnd=function(k){if(!k||!k.state)return m;var A=k.state;return A.window&&(A.window=null),k.state=null,v},n.inflateGetHeader=function(k,A){var u;return k&&k.state&&2&(u=k.state).wrap?((u.head=A).done=!1,v):m},n.inflateSetDictionary=function(k,A){var u,D=A.length;return k&&k.state?(u=k.state).wrap!==0&&u.mode!==11?m:u.mode===11&&i(1,A,D,0)!==u.check?-3:N(k,A,D,D)?(u.mode=31,-4):(u.havedict=1,v):m},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,n){var a=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(f,h,v,m,g,b,y,x){var w,_,E,S,F,R,Z,L,O,N=x.bits,k=0,A=0,u=0,D=0,H=0,W=0,ee=0,B=0,U=0,z=0,P=null,re=0,X=new a.Buf16(16),Y=new a.Buf16(16),fe=null,xe=0;for(k=0;k<=15;k++)X[k]=0;for(A=0;A<m;A++)X[h[v+A]]++;for(H=N,D=15;1<=D&&X[D]===0;D--);if(D<H&&(H=D),D===0)return g[b++]=20971520,g[b++]=20971520,x.bits=1,0;for(u=1;u<D&&X[u]===0;u++);for(H<u&&(H=u),k=B=1;k<=15;k++)if(B<<=1,(B-=X[k])<0)return-1;if(0<B&&(f===0||D!==1))return-1;for(Y[1]=0,k=1;k<15;k++)Y[k+1]=Y[k]+X[k];for(A=0;A<m;A++)h[v+A]!==0&&(y[Y[h[v+A]]++]=A);if(R=f===0?(P=fe=y,19):f===1?(P=i,re-=257,fe=o,xe-=257,256):(P=l,fe=d,-1),k=u,F=b,ee=A=z=0,E=-1,S=(U=1<<(W=H))-1,f===1&&852<U||f===2&&592<U)return 1;for(;;){for(Z=k-ee,O=y[A]<R?(L=0,y[A]):y[A]>R?(L=fe[xe+y[A]],P[re+y[A]]):(L=96,0),w=1<<k-ee,u=_=1<<W;g[F+(z>>ee)+(_-=w)]=Z<<24|L<<16|O|0,_!==0;);for(w=1<<k-1;z&w;)w>>=1;if(w!==0?(z&=w-1,z+=w):z=0,A++,--X[k]==0){if(k===D)break;k=h[v+y[A]]}if(H<k&&(z&S)!==E){for(ee===0&&(ee=H),F+=u,B=1<<(W=k-ee);W+ee<D&&!((B-=X[W+ee])<=0);)W++,B<<=1;if(U+=1<<W,f===1&&852<U||f===2&&592<U)return 1;g[E=z&S]=H<<24|W<<16|F-b|0}}return z!==0&&(g[F+z]=k-ee<<24|64<<16|0),x.bits=H,0}},{"../utils/common":41}],51:[function(e,s,n){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,n){var a=e("../utils/common"),i=0,o=1;function l($){for(var T=$.length;0<=--T;)$[T]=0}var d=0,f=29,h=256,v=h+1+f,m=30,g=19,b=2*v+1,y=15,x=16,w=7,_=256,E=16,S=17,F=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=new Array(2*(v+2));l(N);var k=new Array(2*m);l(k);var A=new Array(512);l(A);var u=new Array(256);l(u);var D=new Array(f);l(D);var H,W,ee,B=new Array(m);function U($,T,K,J,I){this.static_tree=$,this.extra_bits=T,this.extra_base=K,this.elems=J,this.max_length=I,this.has_stree=$&&$.length}function z($,T){this.dyn_tree=$,this.max_code=0,this.stat_desc=T}function P($){return $<256?A[$]:A[256+($>>>7)]}function re($,T){$.pending_buf[$.pending++]=255&T,$.pending_buf[$.pending++]=T>>>8&255}function X($,T,K){$.bi_valid>x-K?($.bi_buf|=T<<$.bi_valid&65535,re($,$.bi_buf),$.bi_buf=T>>x-$.bi_valid,$.bi_valid+=K-x):($.bi_buf|=T<<$.bi_valid&65535,$.bi_valid+=K)}function Y($,T,K){X($,K[2*T],K[2*T+1])}function fe($,T){for(var K=0;K|=1&$,$>>>=1,K<<=1,0<--T;);return K>>>1}function xe($,T,K){var J,I,G=new Array(y+1),Q=0;for(J=1;J<=y;J++)G[J]=Q=Q+K[J-1]<<1;for(I=0;I<=T;I++){var q=$[2*I+1];q!==0&&($[2*I]=fe(G[q]++,q))}}function ne($){var T;for(T=0;T<v;T++)$.dyn_ltree[2*T]=0;for(T=0;T<m;T++)$.dyn_dtree[2*T]=0;for(T=0;T<g;T++)$.bl_tree[2*T]=0;$.dyn_ltree[2*_]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function se($){8<$.bi_valid?re($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function be($,T,K,J){var I=2*T,G=2*K;return $[I]<$[G]||$[I]===$[G]&&J[T]<=J[K]}function he($,T,K){for(var J=$.heap[K],I=K<<1;I<=$.heap_len&&(I<$.heap_len&&be(T,$.heap[I+1],$.heap[I],$.depth)&&I++,!be(T,J,$.heap[I],$.depth));)$.heap[K]=$.heap[I],K=I,I<<=1;$.heap[K]=J}function Le($,T,K){var J,I,G,Q,q=0;if($.last_lit!==0)for(;J=$.pending_buf[$.d_buf+2*q]<<8|$.pending_buf[$.d_buf+2*q+1],I=$.pending_buf[$.l_buf+q],q++,J===0?Y($,I,T):(Y($,(G=u[I])+h+1,T),(Q=R[G])!==0&&X($,I-=D[G],Q),Y($,G=P(--J),K),(Q=Z[G])!==0&&X($,J-=B[G],Q)),q<$.last_lit;);Y($,_,T)}function Ne($,T){var K,J,I,G=T.dyn_tree,Q=T.stat_desc.static_tree,q=T.stat_desc.has_stree,te=T.stat_desc.elems,le=-1;for($.heap_len=0,$.heap_max=b,K=0;K<te;K++)G[2*K]!==0?($.heap[++$.heap_len]=le=K,$.depth[K]=0):G[2*K+1]=0;for(;$.heap_len<2;)G[2*(I=$.heap[++$.heap_len]=le<2?++le:0)]=1,$.depth[I]=0,$.opt_len--,q&&($.static_len-=Q[2*I+1]);for(T.max_code=le,K=$.heap_len>>1;1<=K;K--)he($,G,K);for(I=te;K=$.heap[1],$.heap[1]=$.heap[$.heap_len--],he($,G,1),J=$.heap[1],$.heap[--$.heap_max]=K,$.heap[--$.heap_max]=J,G[2*I]=G[2*K]+G[2*J],$.depth[I]=($.depth[K]>=$.depth[J]?$.depth[K]:$.depth[J])+1,G[2*K+1]=G[2*J+1]=I,$.heap[1]=I++,he($,G,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(ae,Ee){var tt,Ae,rt,me,ut,Ot,De=Ee.dyn_tree,xr=Ee.max_code,$n=Ee.stat_desc.static_tree,_n=Ee.stat_desc.has_stree,jn=Ee.stat_desc.extra_bits,wr=Ee.stat_desc.extra_base,nt=Ee.stat_desc.max_length,ft=0;for(me=0;me<=y;me++)ae.bl_count[me]=0;for(De[2*ae.heap[ae.heap_max]+1]=0,tt=ae.heap_max+1;tt<b;tt++)nt<(me=De[2*De[2*(Ae=ae.heap[tt])+1]+1]+1)&&(me=nt,ft++),De[2*Ae+1]=me,xr<Ae||(ae.bl_count[me]++,ut=0,wr<=Ae&&(ut=jn[Ae-wr]),Ot=De[2*Ae],ae.opt_len+=Ot*(me+ut),_n&&(ae.static_len+=Ot*($n[2*Ae+1]+ut)));if(ft!==0){do{for(me=nt-1;ae.bl_count[me]===0;)me--;ae.bl_count[me]--,ae.bl_count[me+1]+=2,ae.bl_count[nt]--,ft-=2}while(0<ft);for(me=nt;me!==0;me--)for(Ae=ae.bl_count[me];Ae!==0;)xr<(rt=ae.heap[--tt])||(De[2*rt+1]!==me&&(ae.opt_len+=(me-De[2*rt+1])*De[2*rt],De[2*rt+1]=me),Ae--)}}($,T),xe(G,le,$.bl_count)}function p($,T,K){var J,I,G=-1,Q=T[1],q=0,te=7,le=4;for(Q===0&&(te=138,le=3),T[2*(K+1)+1]=65535,J=0;J<=K;J++)I=Q,Q=T[2*(J+1)+1],++q<te&&I===Q||(q<le?$.bl_tree[2*I]+=q:I!==0?(I!==G&&$.bl_tree[2*I]++,$.bl_tree[2*E]++):q<=10?$.bl_tree[2*S]++:$.bl_tree[2*F]++,G=I,le=(q=0)===Q?(te=138,3):I===Q?(te=6,3):(te=7,4))}function V($,T,K){var J,I,G=-1,Q=T[1],q=0,te=7,le=4;for(Q===0&&(te=138,le=3),J=0;J<=K;J++)if(I=Q,Q=T[2*(J+1)+1],!(++q<te&&I===Q)){if(q<le)for(;Y($,I,$.bl_tree),--q!=0;);else I!==0?(I!==G&&(Y($,I,$.bl_tree),q--),Y($,E,$.bl_tree),X($,q-3,2)):q<=10?(Y($,S,$.bl_tree),X($,q-3,3)):(Y($,F,$.bl_tree),X($,q-11,7));G=I,le=(q=0)===Q?(te=138,3):I===Q?(te=6,3):(te=7,4)}}l(B);var M=!1;function j($,T,K,J){X($,(d<<1)+(J?1:0),3),function(I,G,Q,q){se(I),re(I,Q),re(I,~Q),a.arraySet(I.pending_buf,I.window,G,Q,I.pending),I.pending+=Q}($,T,K)}n._tr_init=function($){M||(function(){var T,K,J,I,G,Q=new Array(y+1);for(I=J=0;I<f-1;I++)for(D[I]=J,T=0;T<1<<R[I];T++)u[J++]=I;for(u[J-1]=I,I=G=0;I<16;I++)for(B[I]=G,T=0;T<1<<Z[I];T++)A[G++]=I;for(G>>=7;I<m;I++)for(B[I]=G<<7,T=0;T<1<<Z[I]-7;T++)A[256+G++]=I;for(K=0;K<=y;K++)Q[K]=0;for(T=0;T<=143;)N[2*T+1]=8,T++,Q[8]++;for(;T<=255;)N[2*T+1]=9,T++,Q[9]++;for(;T<=279;)N[2*T+1]=7,T++,Q[7]++;for(;T<=287;)N[2*T+1]=8,T++,Q[8]++;for(xe(N,v+1,Q),T=0;T<m;T++)k[2*T+1]=5,k[2*T]=fe(T,5);H=new U(N,R,h+1,v,y),W=new U(k,Z,0,m,y),ee=new U(new Array(0),L,0,g,w)}(),M=!0),$.l_desc=new z($.dyn_ltree,H),$.d_desc=new z($.dyn_dtree,W),$.bl_desc=new z($.bl_tree,ee),$.bi_buf=0,$.bi_valid=0,ne($)},n._tr_stored_block=j,n._tr_flush_block=function($,T,K,J){var I,G,Q=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(q){var te,le=4093624447;for(te=0;te<=31;te++,le>>>=1)if(1&le&&q.dyn_ltree[2*te]!==0)return i;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(te=32;te<h;te++)if(q.dyn_ltree[2*te]!==0)return o;return i}($)),Ne($,$.l_desc),Ne($,$.d_desc),Q=function(q){var te;for(p(q,q.dyn_ltree,q.l_desc.max_code),p(q,q.dyn_dtree,q.d_desc.max_code),Ne(q,q.bl_desc),te=g-1;3<=te&&q.bl_tree[2*O[te]+1]===0;te--);return q.opt_len+=3*(te+1)+5+5+4,te}($),I=$.opt_len+3+7>>>3,(G=$.static_len+3+7>>>3)<=I&&(I=G)):I=G=K+5,K+4<=I&&T!==-1?j($,T,K,J):$.strategy===4||G===I?(X($,2+(J?1:0),3),Le($,N,k)):(X($,4+(J?1:0),3),function(q,te,le,ae){var Ee;for(X(q,te-257,5),X(q,le-1,5),X(q,ae-4,4),Ee=0;Ee<ae;Ee++)X(q,q.bl_tree[2*O[Ee]+1],3);V(q,q.dyn_ltree,te-1),V(q,q.dyn_dtree,le-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,Q+1),Le($,$.dyn_ltree,$.dyn_dtree)),ne($),J&&se($)},n._tr_tally=function($,T,K){return $.pending_buf[$.d_buf+2*$.last_lit]=T>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&T,$.pending_buf[$.l_buf+$.last_lit]=255&K,$.last_lit++,T===0?$.dyn_ltree[2*K]++:($.matches++,T--,$.dyn_ltree[2*(u[K]+h+1)]++,$.dyn_dtree[2*P(T)]++),$.last_lit===$.lit_bufsize-1},n._tr_align=function($){X($,2,3),Y($,_,N),function(T){T.bi_valid===16?(re(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(e,s,n){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,n){(function(a){(function(i,o){if(!i.setImmediate){var l,d,f,h,v=1,m={},g=!1,b=i.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(i);y=y&&y.setTimeout?y:i,l={}.toString.call(i.process)==="[object process]"?function(E){process.nextTick(function(){w(E)})}:function(){if(i.postMessage&&!i.importScripts){var E=!0,S=i.onmessage;return i.onmessage=function(){E=!1},i.postMessage("","*"),i.onmessage=S,E}}()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",_,!1):i.attachEvent("onmessage",_),function(E){i.postMessage(h+E,"*")}):i.MessageChannel?((f=new MessageChannel).port1.onmessage=function(E){w(E.data)},function(E){f.port2.postMessage(E)}):b&&"onreadystatechange"in b.createElement("script")?(d=b.documentElement,function(E){var S=b.createElement("script");S.onreadystatechange=function(){w(E),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}):function(E){setTimeout(w,0,E)},y.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var S=new Array(arguments.length-1),F=0;F<S.length;F++)S[F]=arguments[F+1];var R={callback:E,args:S};return m[v]=R,l(v),v++},y.clearImmediate=x}function x(E){delete m[E]}function w(E){if(g)setTimeout(w,0,E);else{var S=m[E];if(S){g=!0;try{(function(F){var R=F.callback,Z=F.args;switch(Z.length){case 0:R();break;case 1:R(Z[0]);break;case 2:R(Z[0],Z[1]);break;case 3:R(Z[0],Z[1],Z[2]);break;default:R.apply(o,Z)}})(S)}finally{x(E),g=!1}}}}function _(E){E.source===i&&typeof E.data=="string"&&E.data.indexOf(h)===0&&w(+E.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Mr);var Mn=Mr.exports;const _r=Cn(Mn),Fn="PenAndPaperDB",Bn=1,at="audio",it="images",ze="data";class de{static async openDB(){return new Promise((r,e)=>{const s=indexedDB.open(Fn,Bn);s.onerror=n=>{e(new Error("Failed to open IndexedDB"))},s.onsuccess=n=>{r(s.result)},s.onupgradeneeded=n=>{const a=s.result;a.objectStoreNames.contains(at)||a.createObjectStore(at,{keyPath:"name"}),a.objectStoreNames.contains(it)||a.createObjectStore(it,{keyPath:"name"}),a.objectStoreNames.contains(ze)||a.createObjectStore(ze,{keyPath:"name"})}})}static async processZipFile(r){try{const s=await new _r().loadAsync(r,{createFolders:!0,checkCRC32:!1}),n=[],a=[],i=[],o=async(d,f,h)=>{const v=s.folder(d);if(!v){console.warn(`Folder '${d}' not found in the zip file.`);return}const m=Object.keys(v.files).filter(b=>!v.files[b].dir&&b.startsWith(`${d}/`)),g=5;for(let b=0;b<m.length;b+=g){const y=m.slice(b,b+g);await Promise.all(y.map(async x=>{const w=x.split("/").pop()||"";if(w)try{const _=await v.files[x].async("base64"),E=this.getMimeType(w);h.push({name:w,data:_,type:E,lastModified:Date.now()})}catch(_){console.error(`Error processing file ${w}:`,_)}})),await new Promise(x=>setTimeout(x,10))}};if(await o("audio","audio",n),await o("images","images",a),await o("data","data",i),n.length===0&&a.length===0&&i.length===0)return{success:!1,message:"The zip file does not contain any recognized files in the required folders (audio, images, data)."};const l=await this.openDB();return n.length>0&&await this.storeAssetsInBatches(l,at,n),a.length>0&&await this.storeAssetsInBatches(l,it,a),i.length>0&&await this.storeAssetsInBatches(l,ze,i),l.close(),{success:!0,message:`Successfully imported ${n.length} audio files, ${a.length} image files, and ${i.length} data files.`}}catch(e){return console.error("Error processing zip file:",e),{success:!1,message:`Error processing zip file: ${e instanceof Error?e.message:String(e)}`}}}static async storeAssetsInBatches(r,e,s){await this.clearStore(r,e);const n=10;for(let a=0;a<s.length;a+=n){const i=s.slice(a,a+n);await new Promise((o,l)=>{const d=r.transaction(e,"readwrite"),f=d.objectStore(e);d.oncomplete=()=>o(),d.onerror=h=>l(new Error("Transaction failed")),i.forEach(h=>{f.add(h)})}),await new Promise(o=>setTimeout(o,10))}}static async storeAssets(r,e,s){return new Promise((n,a)=>{const i=r.transaction(e,"readwrite"),o=i.objectStore(e);i.oncomplete=()=>n(),i.onerror=d=>a(new Error("Transaction failed"));const l=o.clear();l.onsuccess=()=>{s.forEach(d=>{o.add(d)})}})}static async getAssets(r){try{const e=await this.openDB(),s=this.getStoreName(r);return new Promise((n,a)=>{const l=e.transaction(s,"readonly").objectStore(s).getAll();l.onsuccess=()=>{e.close(),n(l.result||[])},l.onerror=()=>{e.close(),a(new Error(`Failed to get assets from ${s}`))}})}catch(e){return console.error("Error getting assets:",e),[]}}static async hasAssets(r){try{return(await this.getAssets(r)).length>0}catch(e){return console.error("Error checking for assets:",e),!1}}static async getAssetByName(r,e){if(!e)return null;try{const s=await this.openDB(),n=this.getStoreName(r);return new Promise((a,i)=>{const d=s.transaction(n,"readonly").objectStore(n).get(e);d.onsuccess=()=>{s.close(),a(d.result||null)},d.onerror=f=>{console.error(`[AssetManager DEBUG] IndexedDB GET request failed for type=${r}, name=${e}`,f),s.close(),a(null)}})}catch(s){return console.error(`[AssetManager DEBUG] Error opening DB in getAssetByName for ${e}:`,s),null}}static async clearAllAssets(){try{const r=await this.openDB();await Promise.all([this.clearStore(r,at),this.clearStore(r,it),this.clearStore(r,ze)]),r.close()}catch(r){console.error("Error clearing assets:",r)}}static clearStore(r,e){return new Promise((s,n)=>{const o=r.transaction(e,"readwrite").objectStore(e).clear();o.onsuccess=()=>s(),o.onerror=()=>n(new Error(`Failed to clear ${e}`))})}static getStoreName(r){switch(r){case"audio":return at;case"images":return it;case"data":return ze}}static getMimeType(r){var s;switch(((s=r.split(".").pop())==null?void 0:s.toLowerCase())||""){case"mp3":return"audio/mpeg";case"wav":return"audio/wav";case"ogg":return"audio/ogg";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"svg":return"image/svg+xml";case"json":return"application/json";case"txt":return"text/plain";case"pdf":return"application/pdf";default:return"application/octet-stream"}}static async getAssetUrl(r,e){if(!e)return"";try{const s=e.toLowerCase().endsWith(".pdf"),n=await this.getAssetByName(r,e);if(n){if(s)try{const a=n.data.split(";base64,");let i=n.type,o=n.data;a.length===2?(i=a[0].split(":")[1],o=a[1]):o=n.data;const l=atob(o),d=new Uint8Array(l.length);for(let h=0;h<l.length;h++)d[h]=l.charCodeAt(h);const f=new Blob([d],{type:i});return URL.createObjectURL(f)}catch(a){console.error("Error creating blob URL for PDF:",a)}return`data:${n.type};base64,${n.data}`}if(s){const a=e.startsWith("/")?e:`/${e}`;return window.location.origin+a}return""}catch(s){return console.error(`Error getting asset URL for ${e}:`,s),""}}static encodeUnicode(r){return window.btoa(unescape(encodeURIComponent(r)))}static decodeUnicode(r){try{return decodeURIComponent(escape(window.atob(r)))}catch{console.warn("Failed to decode with Unicode method, trying direct decode");try{return window.atob(r)}catch{return console.warn("Direct decode failed too, returning as-is"),r}}}static async saveDataObject(r,e){try{const s=JSON.stringify(e,null,2),n={name:r,data:s,type:"application/json",lastModified:Date.now()},a=await this.openDB(),i=ze;return new Promise((o,l)=>{const d=a.transaction(i,"readwrite"),f=d.objectStore(i);d.oncomplete=()=>{a.close(),o({success:!0,message:`Successfully saved ${r} data.`})},d.onerror=h=>{a.close(),l(new Error(`Failed to save data ${r}`))},f.put(n)})}catch(s){return console.error(`Error saving data object ${r}:`,s),{success:!1,message:`Error saving data: ${s instanceof Error?s.message:String(s)}`}}}static async getDataObject(r){if(!r)return null;try{const e=await this.getAssetByName("data",r);if(!e)return null;try{if(typeof e.data=="string"&&(e.data.startsWith("{")||e.data.startsWith("[")))return JSON.parse(e.data);const s=this.decodeUnicode(e.data);return JSON.parse(s)}catch(s){console.warn(`JSON parse failed for ${r}:`,s);try{const n=window.atob(e.data);return JSON.parse(n)}catch{return console.error(`All parsing methods failed for ${r}`),null}}}catch(e){return console.error(`Error getting data object ${r}:`,e),null}}static async exportToZip(){try{const r=new _r,e=r.folder("audio"),s=r.folder("images"),n=r.folder("data");if(!e||!s||!n)throw new Error("Failed to create folders in the zip file");const a=await this.getAssets("audio"),i=await this.getAssets("images"),o=await this.getAssets("data");for(const f of a)e.file(f.name,f.data,{base64:!0});for(const f of i)s.file(f.name,f.data,{base64:!0});for(const f of o)f.type==="application/json"&&typeof f.data=="string"&&(f.data.startsWith("{")||f.data.startsWith("["))?n.file(f.name,f.data):n.file(f.name,f.data,{base64:!0});const l=await r.generateAsync({type:"blob"}),d=URL.createObjectURL(l);return{success:!0,message:`Successfully exported ${a.length} audio files, ${i.length} image files, and ${o.length} data files.`,zipBlob:l,url:d}}catch(r){return console.error("Error exporting assets to zip:",r),{success:!1,message:`Error exporting assets: ${r instanceof Error?r.message:String(r)}`}}}static async addAsset(r,e){try{if(r==="data"&&e.name.endsWith(".json"))return this.addJsonAsset(e);const s=new FileReader,a=await new Promise((f,h)=>{s.onload=()=>{const v=s.result.split(",")[1];f(v)},s.onerror=()=>h(new Error("Failed to read file")),s.readAsDataURL(e)}),i=this.getMimeType(e.name),o={name:e.name,data:a,type:i,lastModified:Date.now()},l=await this.openDB(),d=this.getStoreName(r);return new Promise((f,h)=>{const v=l.transaction(d,"readwrite"),m=v.objectStore(d);v.oncomplete=()=>{l.close(),f({success:!0,message:`Successfully added ${e.name} to ${r} assets.`})},v.onerror=g=>{l.close(),h(new Error(`Failed to add asset ${e.name} to ${d}`))},m.put(o)})}catch(s){return console.error(`Error adding asset ${e.name}:`,s),{success:!1,message:`Error adding asset: ${s instanceof Error?s.message:String(s)}`}}}static async addJsonAsset(r){try{const e=new FileReader,n=await new Promise((l,d)=>{e.onload=()=>{l(e.result)},e.onerror=()=>d(new Error("Failed to read JSON file")),e.readAsText(r)});try{JSON.parse(n)}catch{return{success:!1,message:`The file ${r.name} contains invalid JSON.`}}const a={name:r.name,data:n,type:"application/json",lastModified:Date.now()},i=await this.openDB(),o=ze;return new Promise((l,d)=>{const f=i.transaction(o,"readwrite"),h=f.objectStore(o);f.oncomplete=()=>{i.close(),l({success:!0,message:`Successfully added ${r.name} to data assets.`})},f.onerror=v=>{i.close(),d(new Error(`Failed to add JSON asset ${r.name}`))},h.put(a)})}catch(e){return console.error(`Error adding JSON asset ${r.name}:`,e),{success:!1,message:`Error adding JSON asset: ${e instanceof Error?e.message:String(e)}`}}}static async deleteAsset(r,e){try{const s=await this.openDB(),n=this.getStoreName(r);return new Promise((a,i)=>{const o=s.transaction(n,"readwrite"),l=o.objectStore(n);o.oncomplete=()=>{s.close(),a({success:!0,message:`Successfully deleted ${e} from ${r} assets.`})},o.onerror=d=>{s.close(),i(new Error(`Failed to delete asset ${e} from ${n}`))},l.delete(e)})}catch(s){return console.error(`Error deleting asset ${e}:`,s),{success:!1,message:`Error deleting asset: ${s instanceof Error?s.message:String(s)}`}}}static async loadExampleData(){try{const r=[],e=await this.openDB(),s=e.transaction(ze,"readwrite").objectStore(ze),n=JSON.stringify(r,null,2);return s.add({name:"locations.json",data:n,type:"application/json",lastModified:Date.now()}),e.close(),{success:!0,message:"Created empty locations data. You can now start adding your own locations."}}catch(r){return console.error("Error creating example data:",r),{success:!1,message:`Error creating example data: ${r instanceof Error?r.message:String(r)}`}}}static base64ToBlob(r,e){const s=atob(r),n=new Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);const a=new Uint8Array(n);return new Blob([a],{type:e})}}const Wn=(t,r)=>({locations:[],isLoading:!1,error:null,addLocation:e=>{const s={id:Wt(),...e};t(n=>({locations:[...n.locations,s]}))},updateLocation:(e,s)=>{t(n=>({locations:n.locations.map(a=>a.id===e?{...a,...s}:a)}))},deleteLocation:e=>{const s=i=>{const o=r().locations.filter(f=>f.parentLocationId===i),l=o.map(f=>f.id),d=o.flatMap(f=>s(f.id));return[...l,...d]},n=s(e),a=[e,...n];t(i=>({locations:i.locations.filter(o=>!a.includes(o.id))}))},getAllTopLevelLocations:()=>r().locations.filter(e=>!e.parentLocationId),getSublocationsByParentId:e=>r().locations.filter(s=>s.parentLocationId===e),fetchLocations:async()=>{try{t({isLoading:!0,error:null});const e=await de.getDataObject("locations.json");t({locations:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch locations: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}}}),Un=(t,r)=>({characters:[],isLoading:!1,error:null,addCharacter:e=>{const s={id:Wt(),...e};t(n=>({characters:[...n.characters,s]}))},updateCharacter:(e,s)=>{t(n=>({characters:n.characters.map(a=>a.id===e?{...a,...s}:a)}))},deleteCharacter:e=>{t(s=>({characters:s.characters.filter(n=>n.id!==e)}))},addItemToCharacter:(e,s)=>{const n={id:Wt(),...s};t(a=>({characters:a.characters.map(i=>i.id!==e?i:{...i,inventory:[...i.inventory||[],n]})}))},updateCharacterItem:(e,s,n)=>{t(a=>({characters:a.characters.map(i=>i.id!==e||!i.inventory?i:{...i,inventory:i.inventory.map(o=>o.id===s?{...o,...n}:o)})}))},deleteCharacterItem:(e,s)=>{t(n=>({characters:n.characters.map(a=>a.id!==e||!a.inventory?a:{...a,inventory:a.inventory.filter(i=>i.id!==s)})}))},fetchCharacters:async()=>{try{t({isLoading:!0,error:null});const e=await de.getDataObject("characters.json");t({characters:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch characters: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}}}),Vn=(t,r)=>({audioAssets:[],imageAssets:[],dataAssets:[],hasAssets:!1,isLoading:!1,refreshAssets:async()=>{try{t({isLoading:!0});const e=await de.hasAssets("audio"),s=await de.hasAssets("images"),n=await de.hasAssets("data"),a=e||s||n,i=await de.getAssets("audio"),o=await de.getAssets("images"),l=await de.getAssets("data");t({hasAssets:a,audioAssets:i.map(d=>d.name),imageAssets:o.map(d=>d.name),dataAssets:l.map(d=>d.name),isLoading:!1})}catch(e){console.error("Error refreshing assets:",e),t({isLoading:!1})}},saveDataToIndexedDB:async()=>{try{t({isLoading:!0});const e={success:!0,message:"Data saved successfully"};return await r().refreshAssets(),t({isLoading:!1}),e}catch(e){return console.error("Error saving data:",e),t({isLoading:!1}),{success:!1,message:`Error saving data: ${e instanceof Error?e.message:String(e)}`}}},exportToZip:async()=>{try{t({isLoading:!0});const e=await de.exportToZip();return t({isLoading:!1}),e}catch(e){return console.error("Error exporting to ZIP:",e),t({isLoading:!1}),{success:!1,message:`Error exporting data: ${e instanceof Error?e.message:String(e)}`}}}});function Vt(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}const Hn=(t,r)=>({combats:[],activeCombatId:null,initiativeOrder:[],currentRound:1,currentTurnIndex:0,isLoading:!1,error:null,fetchCombats:async()=>{try{t({isLoading:!0,error:null});const e=await de.getDataObject("combats.json");t({combats:e||[],isLoading:!1})}catch(e){t({error:`Failed to fetch combats: ${e instanceof Error?e.message:String(e)}`,isLoading:!1})}},addCombat:async e=>{try{t({isLoading:!0,error:null});const s={...e,id:Vt(),status:e.status||"planned",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n=[...r().combats,s];return await de.saveDataObject("combats.json",n),t({combats:n,isLoading:!1}),s}catch(s){throw t({error:`Failed to add combat: ${s instanceof Error?s.message:String(s)}`,isLoading:!1}),s}},updateCombat:async(e,s)=>{try{t({isLoading:!0,error:null});const n=r().combats,a=n.findIndex(l=>l.id===e);if(a===-1)return t({error:`Combat with ID ${e} not found`,isLoading:!1}),null;const i={...n[a],...s,updatedAt:new Date().toISOString()},o=[...n.slice(0,a),i,...n.slice(a+1)];return await de.saveDataObject("combats.json",o),t({combats:o,isLoading:!1}),i}catch(n){throw t({error:`Failed to update combat: ${n instanceof Error?n.message:String(n)}`,isLoading:!1}),n}},deleteCombat:async e=>{try{t({isLoading:!0,error:null});const s=r().combats.filter(n=>n.id!==e);return await de.saveDataObject("combats.json",s),t({combats:s,isLoading:!1}),!0}catch(s){return t({error:`Failed to delete combat: ${s instanceof Error?s.message:String(s)}`,isLoading:!1}),!1}},startCombatSession:async e=>{try{return r().combats.find(n=>n.id===e)?(await r().updateCombat(e,{status:"active",round:1,turn:0}),t({activeCombatId:e,currentRound:1,currentTurnIndex:0,initiativeOrder:[]}),!0):(t({error:`Combat with ID ${e} not found`}),!1)}catch(s){return t({error:`Failed to start combat session: ${s instanceof Error?s.message:String(s)}`}),!1}},endCombatSession:()=>{const{activeCombatId:e,updateCombat:s}=r();e&&s(e,{status:"completed"}).catch(n=>{console.error("Failed to update combat status:",n)}),t({activeCombatId:null,initiativeOrder:[],currentRound:1,currentTurnIndex:0})},setupInitiative:e=>{const s=[...e].sort((n,a)=>a.initiative-n.initiative);t({initiativeOrder:s,currentTurnIndex:0})},nextTurn:()=>{const{initiativeOrder:e,currentTurnIndex:s}=r();if(e.length===0)return;const n=(s+1)%e.length;n===0&&r().nextRound(),t({currentTurnIndex:n})},nextRound:()=>{t(e=>({currentRound:e.currentRound+1}))},updateInitiativeEntry:(e,s)=>{const{initiativeOrder:n}=r(),a=n.map(i=>i.entityId===e?{...i,...s}:i);t({initiativeOrder:a})},addRewards:async(e,s)=>{try{const n=r().combats.find(l=>l.id===e);if(!n)return t({error:`Combat with ID ${e} not found`}),null;const a=n.rewards||[],i=s.map(l=>({...l,description:l.description||""})),o=[...a,...i];return await r().updateCombat(e,{rewards:o})}catch(n){return t({error:`Failed to add rewards: ${n instanceof Error?n.message:String(n)}`}),null}}}),Zn=(t,r)=>({audioTracks:[],activeTracks:[],volume:.7,isPlaying:!1,initializedCombatAudio:{},addAudioTrack:e=>{if(r().audioTracks.find(a=>a.url===e.url))return;const n={...e,id:Vt(),howl:new kr.Howl({src:[e.url],html5:!0})};t(a=>({audioTracks:[...a.audioTracks,n]}))},playTrack:async(e,s={})=>{const{replace:n=!0,locationId:a="global",loop:i=!1}=s;console.log(`audioSlice.playTrack: Called with url=${e}, replace=${n}, locationId=${a}, loop=${i}`);let o=e;if(e.includes("/")&&(o=e.split("/").pop()||""),!o){console.error("audioSlice.playTrack: Invalid URL, could not extract asset name:",e);return}const l=r().activeTracks,d=l.find(v=>v.name===o&&v.locationId===a);if(d){console.log(`audioSlice.playTrack: Track ${o} already playing at ${a}. Ensuring unmuted.`),d.isMuted&&(d.howl.mute(!1),t(v=>({activeTracks:v.activeTracks.map(m=>m.id===d.id?{...m,isMuted:!1}:m)})));return}let f=[],h=[...l];n&&a!=="global"&&(console.log(`audioSlice.playTrack: Replace=true. Checking for tracks with locationId=${a} to stop.`),f=l.filter(v=>v.locationId===a),f.length>0&&(console.log(`audioSlice.playTrack: Found ${f.length} tracks to stop.`),h=l.filter(v=>v.locationId!==a))),f.length>0&&(f.forEach(v=>{console.log(`audioSlice.playTrack: Stopping track ${v.name} (id: ${v.id})`),v.howl.stop()}),t({activeTracks:h}));try{console.log(`audioSlice.playTrack: Attempting to get asset URL for name: ${o}`);const v=await de.getAssetUrl("audio",o);if(!v){console.error(`audioSlice.playTrack: AssetManager failed to find URL for: ${o}`);return}console.log(`audioSlice.playTrack: Creating and playing new Howl for ${o} at ${a}`);const m=new kr.Howl({src:[v],loop:i,volume:r().volume,html5:!0}),g={id:Vt(),howl:m,name:o,volume:r().volume,isMuted:!1,locationId:a,loop:i};t(b=>({activeTracks:[...b.activeTracks,g],isPlaying:!0})),m.play()}catch(v){console.error(`audioSlice.playTrack: Error during Howl creation/play for ${o}:`,v)}},stopAllTracks:()=>{console.log("audioSlice.stopAllTracks: Stopping all tracks"),r().activeTracks.forEach(s=>{s.howl.stop()}),t({activeTracks:[],isPlaying:!1})},stopTrack:e=>{const s=r().activeTracks,n=s.find(i=>i.id===e);if(!n){console.log(`audioSlice.stopTrack: Track ${e} not found.`);return}console.log(`audioSlice.stopTrack: Stopping track ${n.name} (id: ${e})`),n.howl.stop();const a=s.filter(i=>i.id!==e);t({activeTracks:a,isPlaying:a.length>0})},stopTracksByLocationPrefix:e=>{if(!e)return;console.log(`audioSlice.stopTracksByLocationPrefix: Stopping tracks with prefix: ${e}`);const s=r().activeTracks,n=s.filter(i=>i.locationId&&i.locationId.startsWith(e)),a=s.filter(i=>!i.locationId||!i.locationId.startsWith(e));n.length>0?(n.forEach(i=>{console.log(`Stopping track ${i.name} (locId: ${i.locationId})`),i.howl.stop()}),t({activeTracks:a,isPlaying:a.length>0})):console.log(`No tracks found with prefix: ${e}`)},setVolume:e=>{const s=Math.max(0,Math.min(1,e));console.log(`audioSlice.setVolume: Setting master volume to ${s}`),r().activeTracks.forEach(n=>{n.isMuted||n.howl.volume(s)}),t({volume:s})},toggleMuteTrack:e=>{const s=r().activeTracks.find(a=>a.id===e);if(!s)return;const n=!s.isMuted;console.log(`audioSlice.toggleMuteTrack: Toggling mute for ${s.name} to ${n}`),s.howl.mute(n),t(a=>({activeTracks:a.activeTracks.map(i=>i.id===e?{...i,isMuted:n}:i)}))},setTrackVolume:(e,s)=>{const n=r().activeTracks.find(i=>i.id===e);if(!n)return;const a=Math.max(0,Math.min(1,s));console.log(`audioSlice.setTrackVolume: Setting volume for ${n.name} to ${a}`),n.isMuted||n.howl.volume(a),t(i=>({activeTracks:i.activeTracks.map(o=>o.id===e?{...o,volume:a}:o)}))},markCombatAudioInitialized:e=>{console.log(`audioSlice.markCombatAudioInitialized: Marking combat ${e} as initialized`),t(s=>({initializedCombatAudio:{...s.initializedCombatAudio,[e]:!0}}))},isCombatAudioInitialized:e=>!!r().initializedCombatAudio[e],resetCombatAudioInitialized:e=>{console.log(`audioSlice.resetCombatAudioInitialized: Resetting combat ${e} initialization status`),t(s=>{const{[e]:n,...a}=s.initializedCombatAudio;return{initializedCombatAudio:a}})}}),Kn=(t,r)=>({mapConfig:{worldWidth:1920,worldHeight:1080},selectedLocationId:null,currentLocation:void 0,isLoading:!1,error:null,setSelectedLocationId:e=>{t({selectedLocationId:e})},setCurrentLocationById:e=>{const s=r().locations,n=s==null?void 0:s.find(a=>a.id===e);t({currentLocation:n})},updateMapConfig:e=>{t(s=>({mapConfig:{...s.mapConfig,...e}}))}}),Qe=An()((t,r,e)=>({...Wn(t,r),...Un(t),...Vn(t,r),...Hn(t,r),...Kn(t,r),...Zn(t,r),initializeStore:async()=>{try{t({isLoading:!0}),await r().refreshAssets(),await Promise.all([r().fetchLocations(),r().fetchCharacters(),r().fetchCombats()]),t({isLoading:!1})}catch(s){console.error("Error initializing store:",s),t({isLoading:!1})}}})),Jn=()=>{const[t,r]=C.useState(!1),e=Sn(),[s,n]=C.useState(window.innerWidth<768),[a,i]=C.useState(!1),{saveDataToIndexedDB:o,exportToZip:l}=Qe();C.useEffect(()=>{const g=()=>{n(window.innerWidth<768)},b=()=>{i(window.scrollY>10)};return window.addEventListener("resize",g),window.addEventListener("scroll",b),()=>{window.removeEventListener("resize",g),window.removeEventListener("scroll",b)}},[]);const d=async()=>{try{const g=await o();alert(g.message)}catch(g){alert(`Error saving data: ${g instanceof Error?g.message:String(g)}`)}},f=async()=>{try{const g=await l();if(g.success&&g.url){const b=document.createElement("a");b.href=g.url,b.download="campaign-data.zip",document.body.appendChild(b),b.click(),document.body.removeChild(b)}else alert(g.message)}catch(g){alert(`Error exporting data: ${g instanceof Error?g.message:String(g)}`)}},h=()=>{r(!t)},v=g=>e.pathname===g,m=[{path:"/",label:"Dashboard",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{path:"/map",label:"Map View",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{path:"/locations",label:"Locations",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})},{path:"/characters",label:"Characters",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{path:"/combats",label:"Combats",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}];return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-40 
        transition-all duration-300 ease-in-out
        ${a?"bg-slate-900/90 backdrop-blur-lg":"bg-transparent"} 
        border-b ${a?"border-slate-700/30":"border-transparent"}
      `,children:c.jsxs("div",{className:"container max-w-full mx-auto px-4 flex items-center justify-between h-16",children:[s&&c.jsx("button",{className:"text-slate-50 p-2 rounded-lg hover:bg-white/5 active:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all","aria-label":"menu",onClick:h,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsx("h1",{className:"text-xl font-bold font-[var(--font-display)] tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-indigo-500 to-indigo-600 mr-2",children:"Campaign Organizer"}),!s&&c.jsx("nav",{className:"flex items-center space-x-2 mx-6 flex-1 justify-center",children:m.map(g=>c.jsxs(yr,{to:g.path,className:`
                    px-4 py-2 rounded-[var(--radius-md)] transition-all duration-200 flex items-center space-x-2.5 overflow-hidden
                    ${v(g.path)?"text-white font-medium bg-white/10 backdrop-blur-sm shadow-sm border border-white/5":"text-slate-300 hover:text-indigo-400 hover:bg-white/5"}
                  `,children:[v(g.path)&&c.jsx("div",{className:"absolute inset-0 opacity-20",children:c.jsx("div",{className:"absolute inset-x-0 -top-6 h-10 bg-gradient-to-r from-indigo-500/20 via-indigo-600/40 to-indigo-700/20 blur-md"})}),c.jsx("span",{className:"relative z-10",children:g.icon}),c.jsx("span",{className:"relative z-10",children:g.label})]},g.path))}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{className:"p-2 rounded-[var(--radius-md)] hover:bg-white/5 active:bg-white/10 text-slate-300 hover:text-indigo-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all",onClick:d,title:"Save Campaign",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),c.jsx("button",{className:"p-2 rounded-[var(--radius-md)] hover:bg-white/5 active:bg-white/10 text-slate-300 hover:text-indigo-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 transition-all",onClick:f,title:"Export Campaign",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]})}),c.jsxs("div",{className:`
          fixed inset-0 z-50 overflow-hidden pointer-events-none
          transition-all duration-300 ease-in-out
          ${!t&&"opacity-0"}
        `,children:[c.jsx("div",{className:`
            absolute inset-0 bg-slate-950/70 backdrop-blur-md 
            transition-opacity duration-300 
            ${t?"opacity-100 pointer-events-auto":"opacity-0"}
          `,onClick:h}),c.jsx("div",{className:`
            absolute inset-y-0 left-0 max-w-xs w-full bg-slate-900/90 backdrop-blur-xl
            shadow-2xl border-r border-white/5 pointer-events-auto
            transition-transform duration-300 ease-out
            ${t?"translate-x-0":"-translate-x-full"}
          `,children:c.jsxs("nav",{className:"h-full flex flex-col py-5 overflow-y-auto",children:[c.jsxs("div",{className:"px-5 mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-indigo-500 to-indigo-600 font-[var(--font-display)]",children:"Campaign Organizer"}),c.jsx("button",{className:"p-2 rounded-lg hover:bg-white/5 active:bg-white/10 text-slate-400 hover:text-white transition-colors",onClick:h,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"mt-2 px-3 space-y-1.5",children:m.map(g=>c.jsxs(yr,{to:g.path,onClick:h,className:`
                    flex items-center space-x-3 px-4 py-3 rounded-[var(--radius-md)] 
                    transition-all duration-200
                    ${v(g.path)?"bg-indigo-500/20 text-white font-medium":"hover:bg-white/5 text-slate-300 hover:text-white"}
                  `,children:[c.jsx("span",{className:"text-indigo-400",children:g.icon}),c.jsx("span",{children:g.label})]},g.path))}),c.jsxs("div",{className:"mt-auto px-3 pt-5 border-t border-slate-800/50",children:[c.jsx("div",{className:"flex items-center space-x-2 px-3 py-2",children:c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 w-full rounded-[var(--radius-md)] bg-white/5 hover:bg-white/10 text-slate-300 transition-colors",onClick:()=>{h(),d()},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),c.jsx("span",{children:"Save Campaign"})]})}),c.jsx("div",{className:"flex items-center space-x-2 px-3 py-2",children:c.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 w-full rounded-[var(--radius-md)] bg-white/5 hover:bg-white/10 text-slate-300 transition-colors",onClick:()=>{h(),f()},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{children:"Export Data"})]})})]})]})})]})]})},oe=({children:t,className:r="",size:e=24,color:s,sx:n={}})=>{const a={};n.fontSize&&(a.fontSize=n.fontSize),n.filter&&(a.filter=n.filter),n.transform&&(a.transform=n.transform);let i="";return s==="primary"?i="text-blue-500":s==="secondary"?i="text-purple-500":s==="error"&&(i="text-red-500"),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`inline-block ${i} ${r}`,style:a,children:t})},Ts=t=>c.jsxs(oe,{...t,children:[c.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),c.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),Ls=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),c.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),As=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Is=t=>c.jsxs(oe,{...t,children:[c.jsx("circle",{cx:"5",cy:"6",r:"3"}),c.jsx("path",{d:"M9 6h5l3 5.063V16h-2"}),c.jsx("path",{d:"M8 16l-2-6.063L12 7"}),c.jsx("path",{d:"M18 19c0 1.105-3.134 2-7 2s-7-.895-7-2"}),c.jsx("path",{d:"M10 12l2 7"})]}),nr=t=>c.jsxs(oe,{...t,children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Ps=t=>c.jsx(oe,{...t,children:c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Gn=t=>c.jsx(oe,{...t,children:c.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Fr=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M3 6h18"}),c.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),c.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),ar=t=>c.jsxs(oe,{...t,children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),qn=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Yn=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),pt=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),Ds=t=>c.jsxs(oe,{...t,children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),zs=t=>c.jsxs(oe,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),c.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Xn=t=>c.jsxs(oe,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),c.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Rs=t=>c.jsxs(oe,{...t,children:[c.jsx("path",{d:"M9 18V5l12-2v13"}),c.jsx("circle",{cx:"6",cy:"18",r:"3"}),c.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),Qn=t=>c.jsx(oe,{...t,children:c.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),ea=t=>c.jsxs(oe,{...t,children:[c.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),c.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),Os=t=>c.jsxs(oe,{...t,children:[c.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),c.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),c.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),jr=t=>c.jsx(oe,{...t,children:c.jsx("polyline",{points:"6 9 12 15 18 9"})}),Ms=t=>c.jsx(oe,{...t,children:c.jsx("polyline",{points:"18 15 12 9 6 15"})}),ta=t=>c.jsxs(oe,{...t,children:[c.jsx("polyline",{points:"16 16 12 12 8 16"}),c.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),c.jsx("path",{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"}),c.jsx("polyline",{points:"16 16 12 12 8 16"})]}),Fs=t=>c.jsxs(oe,{...t,children:[c.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),c.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Bs=t=>c.jsxs(oe,{...t,children:[c.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),c.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Ws=t=>c.jsxs(oe,{...t,children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Us=t=>c.jsxs(oe,{...t,children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21"})]}),Vs=t=>c.jsxs(oe,{...t,children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M15 9l-6 6"}),c.jsx("path",{d:"M9 9l6 6"})]}),Br=()=>{const{audioTracks:t,activeTracks:r,addAudioTrack:e,playTrack:s,stopAllTracks:n,stopTrack:a,stopTracksByLocationPrefix:i,setVolume:o,setTrackVolume:l,toggleMuteTrack:d,volume:f}=Qe(),h=C.useCallback((w,_)=>{let E=w;w.includes("/")&&(E=w.split("/").pop()||"",E.includes("/")&&(E=E.substring(E.lastIndexOf("/")+1)));const S=`/audio/${E}`;console.log(`useAudioPlayer.play: Calling slice playTrack with url=${S}, options=`,_),s(S,_)},[s]),v=C.useCallback(()=>{console.log("useAudioPlayer.stopAll: Calling slice stopAllTracks"),n()},[n]),m=C.useCallback(w=>{console.log(`useAudioPlayer.stop: Calling slice stopTrack for id=${w}`),a(w)},[a]),g=C.useCallback(w=>{console.log(`useAudioPlayer.stopLocationTracks: Calling slice stopTracksByLocationPrefix for prefix=${w}`),i(w)},[i]),b=C.useCallback(w=>{o(Math.max(0,Math.min(1,w)))},[o]),y=C.useCallback((w,_)=>{l(w,Math.max(0,Math.min(1,_)))},[l]),x=C.useCallback(w=>{d(w)},[d]);return{tracks:t,activeTracks:r,masterVolume:f,play:h,stop:m,stopAll:v,stopLocationTracks:g,setMasterVolume:b,adjustTrackVolume:y,toggleMute:x,addTrack:e}},ra=()=>{const[t,r]=C.useState(!1),[e,s]=C.useState([]),[n,a]=C.useState(!1),[i,o]=C.useState(""),[l,d]=C.useState(!0),{play:f,activeTracks:h}=Br();C.useEffect(()=>{t&&v()},[t]);const v=async()=>{a(!0);try{const w=await de.getAssets("audio");s(w.map(_=>_.name))}catch(w){console.error("Error loading audio assets:",w)}finally{a(!1)}},m=()=>{r(!0)},g=()=>{r(!1)},b=w=>{const _=`/audio/${w}`;f(_,{replace:!1,locationId:"",loop:l,name:w}),g()},y=w=>h.some(_=>_.name===w),x=e.filter(w=>w.toLowerCase().includes(i.toLowerCase()));return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"flex items-center px-3 py-1.5 bg-blue-600 text-white rounded text-sm mb-2 hover:bg-blue-700 transition-colors",onClick:m,children:[c.jsx(nr,{size:16,className:"mr-1"}),"Add Track"]}),t&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:g}),c.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[c.jsx("div",{className:"p-4 border-b border-slate-700",children:c.jsx("h2",{className:"text-lg font-medium text-white",children:"Select Audio Track"})}),c.jsxs("div",{className:"p-4 overflow-y-auto flex-grow",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-300 mb-2",children:"Select a track to play. You can choose whether to loop it or play it once."}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:"text",className:"w-full pl-9 pr-3 py-2 bg-slate-700 border border-slate-600 rounded text-white text-sm",placeholder:"Search tracks...",value:i,onChange:w=>o(w.target.value)}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:w=>d(w.target.checked)}),c.jsx("div",{className:"relative w-10 h-5 bg-slate-700 rounded-full peer peer-checked:bg-blue-600 peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5"}),c.jsx("span",{className:"ml-2 text-sm text-white",children:"Loop Track"})]})]}),c.jsx("div",{className:"h-px bg-slate-700 mb-3"}),n?c.jsx("p",{className:"text-white",children:"Loading audio assets..."}):e.length===0?c.jsx("p",{className:"text-white",children:"No audio assets found. Import some audio files first."}):c.jsx("ul",{className:"max-h-[300px] overflow-y-auto pr-1",children:x.map(w=>{const _=y(w);return c.jsxs("li",{className:"flex items-center justify-between py-2 border-b border-slate-700 last:border-none",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-white",children:w}),_&&c.jsx("p",{className:"text-xs text-blue-400",children:"Currently playing"})]}),c.jsxs("div",{className:"group relative",title:_?"Already playing":"Play track","data-disabled":_,"aria-disabled":_,children:[c.jsx("button",{className:`p-2 rounded-full ${_?"text-blue-400 cursor-not-allowed":"text-white hover:bg-slate-700"}`,onClick:()=>!_&&b(w),disabled:_,children:_?c.jsx(ea,{size:20}):c.jsx(Qn,{size:20})}),c.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 hidden group-hover:block bg-slate-900 text-xs text-white py-1 px-2 rounded whitespace-nowrap",children:_?"Already playing":"Play track"})]})]},w)})})]}),c.jsx("div",{className:"p-3 border-t border-slate-700 flex justify-end",children:c.jsx("button",{className:"px-4 py-2 bg-slate-700 text-white rounded hover:bg-slate-600 transition-colors",onClick:g,children:"Close"})})]})]})]})},na=()=>{const{activeTracks:t,toggleMute:r,stop:e,adjustTrackVolume:s,setMasterVolume:n,masterVolume:a}=Br(),i=a,[o,l]=C.useState(!1),[d,f]=C.useState(i||.7),[h,v]=C.useState({}),[m,g]=C.useState(!1);C.useEffect(()=>{!o&&i>0&&f(i)},[i,o]);const b=()=>{o?n(d):(i>0&&f(i),n(0)),l(!o)},y=E=>{const S=parseFloat(E.target.value);n(S),o&&S>0&&l(!1),S===0&&!o&&l(!0)},x=E=>S=>{s(E,parseFloat(S.target.value))},w=E=>{v(S=>({...S,[E]:!S[E]}))},_=()=>{g(!m)};return m?c.jsx("div",{className:"fixed bottom-5 left-5 bg-slate-800/90 text-white p-2 rounded-full shadow-lg z-50 hover:bg-slate-700/90 cursor-pointer",onClick:_,title:"Audio Controls",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}):c.jsxs("div",{className:"fixed bottom-5 left-5 p-4 max-w-xs max-h-[300px] overflow-y-auto bg-slate-800/90 z-50 rounded-lg shadow-lg hover:shadow-xl transition-shadow",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h2",{className:"text-lg font-medium text-white",children:"Audio Controls"}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:_,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})})]}),c.jsx(ra,{}),c.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:b,children:i===0?c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),c.jsx("span",{className:"text-sm text-white min-w-[80px]",children:"Master Volume"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:y,className:"w-full accent-blue-500","aria-label":"Master volume control"})]}),c.jsx("div",{className:"h-px bg-slate-600 my-3"}),c.jsx("h3",{className:"text-base font-medium text-white mb-2",children:"Active Tracks"}),t.length===0?c.jsx("p",{className:"text-sm text-slate-400 italic",children:'No tracks currently playing. Use the "Add Track" button to play some music.'}):c.jsx("ul",{className:"space-y-2",children:t.map(E=>c.jsxs(C.Fragment,{children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>r(E.id),children:E.isMuted?c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),c.jsx("span",{className:"flex-1 text-white text-sm cursor-pointer truncate",onClick:()=>w(E.id),children:E.name}),c.jsx("div",{className:`p-1 ${E.loop?"text-white":"text-white/30"}`,children:E.loop?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>w(E.id),children:h[E.id]?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),c.jsx("button",{className:"p-1 text-white/80 hover:text-white transition-colors",onClick:()=>e(E.id),children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h[E.id]&&c.jsxs("div",{className:"pl-8 pr-4 pb-2 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-white min-w-[60px]",children:"Volume"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:E.volume,onChange:x(E.id),className:"w-full accent-blue-500","aria-label":`Volume control for ${E.name}`})]})]},E.id))})]})},aa=({size:t="md",color:r="primary",text:e="",fullScreen:s=!1})=>{const n={sm:{container:"h-5 w-5",circle:"h-5 w-5 border-2",text:"text-xs mt-2"},md:{container:"h-8 w-8",circle:"h-8 w-8 border-2",text:"text-sm mt-3"},lg:{container:"h-12 w-12",circle:"h-12 w-12 border-3",text:"text-base mt-4"},xl:{container:"h-16 w-16",circle:"h-16 w-16 border-4",text:"text-lg mt-4"}},a={primary:{outer:"border-indigo-500/20",inner:"border-t-indigo-500"},secondary:{outer:"border-amber-500/20",inner:"border-t-amber-500"},white:{outer:"border-white/20",inner:"border-t-white"}},i=n[t],o=a[r],l=c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`rounded-full ${i.circle} border-solid ${o.outer}`}),c.jsx("div",{className:`
          absolute top-0 left-0 
          rounded-full ${i.circle} border-solid ${o.inner}
          animate-spin
        `}),c.jsx("div",{className:`
          absolute -inset-1.5
          bg-${r==="primary"?"indigo":r==="secondary"?"amber":"white"}-500/10
          rounded-full blur-sm opacity-0 animate-pulse-slow
        `})]}),e&&c.jsx("div",{className:`${i.text} text-slate-300 font-normal`,children:e})]});return s?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",children:l}):l},ia=()=>{const t=Qe(r=>r.initializeStore);return C.useEffect(()=>{t()},[t]),null},Wr=()=>{const[t,r]=C.useState(!1),[e,s]=C.useState(!1),[n,a]=C.useState(null),{audioAssets:i,imageAssets:o,dataAssets:l,hasAssets:d,isLoading:f,refreshAssets:h,saveDataToIndexedDB:v,exportToZip:m}=Qe(),g=async L=>{if(!L.name.toLowerCase().endsWith(".zip")){a({success:!1,message:"Please upload a .zip file containing audio, images, and data folders."});return}const O=L.size/(1024*1024);O>200&&(a({success:!0,message:`Warning: The file is ${O.toFixed(1)}MB, which is quite large. Processing may take some time and require sufficient memory.`}),await new Promise(k=>setTimeout(k,2e3))),r(!0),a({success:!0,message:"Processing zip file... This may take a few moments for large files."});try{const k=await de.processZipFile(L);a(k),k.success&&await h()}catch(k){console.error("Error processing file:",k),a({success:!1,message:`Error processing file: ${k instanceof Error?k.message:String(k)}`})}finally{r(!1)}};return{audioAssets:i,imageAssets:o,dataAssets:l,hasStoredAssets:d,isLoadingAssets:f,isProcessing:t,isDragging:e,result:n,processZipFile:g,addAsset:async(L,O)=>{r(!0);try{const N=await de.addAsset(L,O);return a(N),N.success&&await h(),N}catch(N){const k={success:!1,message:`Error adding asset: ${N instanceof Error?N.message:String(N)}`};return a(k),k}finally{r(!1)}},deleteAsset:async(L,O)=>{r(!0);try{const N=await de.deleteAsset(L,O);return a(N),N.success&&await h(),N}catch(N){const k={success:!1,message:`Error deleting asset: ${N instanceof Error?N.message:String(N)}`};return a(k),k}finally{r(!1)}},clearAllAssets:async()=>{r(!0);try{return await de.clearAllAssets(),a({success:!0,message:"All imported assets have been cleared."}),await h(),{success:!0,message:"All imported assets have been cleared."}}catch(L){const O={success:!1,message:`Error clearing assets: ${L instanceof Error?L.message:String(L)}`};return a(O),O}finally{r(!1)}},createSampleData:async()=>{r(!0),a(null);try{const L=await de.loadExampleData();return a(L),L.success&&await h(),L}catch(L){const O={success:!1,message:`Error creating sample data: ${L instanceof Error?L.message:String(L)}`};return a(O),O}finally{r(!1)}},exportData:async()=>{r(!0);try{await v();const L=await m();if(a({success:L.success,message:L.message}),L.success&&L.url){const O=document.createElement("a");O.href=L.url,O.download="campaign-data.zip",document.body.appendChild(O),O.click(),document.body.removeChild(O)}return L}catch(L){const O={success:!1,message:`Error exporting data: ${L instanceof Error?L.message:String(L)}`};return a(O),O}finally{r(!1)}},loadAssetLists:async()=>{await h()},handleDragOver:L=>{L.preventDefault(),s(!0)},handleDragLeave:L=>{L.preventDefault(),s(!1)},handleDrop:async L=>{L.preventDefault(),s(!1);const O=L.dataTransfer.files;if(O.length===0)return;const N=O[0];await g(N)},clearResult:()=>{a(null)}}},ir=()=>{const[t,r]=C.useState(!1),[e,s]=C.useState(""),[n,a]=C.useState(""),[i,o]=C.useState(!1),[l,d]=C.useState(null),[f,h]=C.useState(!1),[v,m]=C.useState(""),g=async x=>{o(!0),d(null);try{const w=await de.getAssetByName("data",x);if(!w)throw new Error(`JSON file ${x} not found`);if(typeof w.data=="string"&&(w.data.startsWith("{")||w.data.startsWith("["))){const _=JSON.parse(w.data);a(JSON.stringify(_,null,2))}else try{const _=atob(w.data),E=JSON.parse(_);a(JSON.stringify(E,null,2))}catch{throw new Error(`Failed to parse JSON data from ${x}`)}s(x),r(!0)}catch(w){console.error("Error loading JSON content:",w),d(`Error loading JSON content: ${w instanceof Error?w.message:String(w)}`)}finally{o(!1)}};return{isJsonEditorOpen:t,jsonFileToEdit:e,jsonContent:n,isLoading:i,error:l,isCreateJsonOpen:f,newJsonFileName:v,setIsJsonEditorOpen:r,setJsonFileToEdit:s,setJsonContent:a,setIsCreateJsonOpen:h,setNewJsonFileName:m,loadJsonContent:g,saveJsonContent:async()=>{o(!0),d(null);try{const x=JSON.parse(n),w=new Blob([JSON.stringify(x)],{type:"application/json"}),_=new File([w],e,{type:"application/json"}),E=await de.addAsset("data",_);if(!E.success)throw new Error(E.message);return r(!1),{success:!0,message:`JSON file ${e} saved successfully`}}catch(x){return console.error("Error saving JSON content:",x),d(`Error saving JSON content: ${x instanceof Error?x.message:String(x)}`),{success:!1,message:`Error saving JSON content: ${x instanceof Error?x.message:String(x)}`}}finally{o(!1)}},createNewJsonFile:async(x="{}")=>{o(!0),d(null);try{const w=v.endsWith(".json")?v:`${v}.json`,_=new Blob([x],{type:"application/json"}),E=new File([_],w,{type:"application/json"}),S=await de.addAsset("data",E);if(!S.success)throw new Error(S.message);return m(""),h(!1),await g(w),{success:!0,message:`New JSON file ${w} created successfully`}}catch(w){return console.error("Error creating JSON file:",w),d(`Error creating JSON file: ${w instanceof Error?w.message:String(w)}`),{success:!1,message:`Error creating JSON file: ${w instanceof Error?w.message:String(w)}`}}finally{o(!1)}}}},sr=({children:t,severity:r="info",onClose:e,variant:s="standard",className:n="",icon:a,title:i,action:o})=>{const[l,d]=C.useState(!0);C.useEffect(()=>{if(!l&&e){const v=setTimeout(()=>{e()},300);return()=>clearTimeout(v)}},[l,e]);const f=()=>({success:{standard:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300",filled:"bg-green-600 text-white",outlined:"border border-green-500 text-green-700 dark:text-green-400",soft:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},error:{standard:"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-300",filled:"bg-red-600 text-white",outlined:"border border-red-500 text-red-700 dark:text-red-400",soft:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300"},warning:{standard:"bg-amber-50 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300",filled:"bg-amber-600 text-white",outlined:"border border-amber-500 text-amber-700 dark:text-amber-400",soft:"bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300"},info:{standard:"bg-blue-50 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",filled:"bg-blue-600 text-white",outlined:"border border-blue-500 text-blue-700 dark:text-blue-400",soft:"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300"}})[r][s],h=()=>{if(a)return a;const m=s==="filled"?"text-white":{success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-amber-500 dark:text-amber-400",info:"text-blue-500 dark:text-blue-400"}[r];switch(r){case"success":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":default:return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${m}`,viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}};return c.jsx("div",{className:`
        rounded-lg overflow-hidden
        transition-all duration-300 ease-in-out
        ${l?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"}
        ${f()}
        shadow-sm
        ${n}
      `,role:"alert",children:c.jsxs("div",{className:"px-4 py-3 flex items-start",children:[c.jsx("div",{className:"flex-shrink-0 mr-3 pt-0.5",children:h()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[i&&c.jsx("div",{className:"text-sm font-medium mb-1",children:i}),c.jsx("div",{className:"text-sm",children:t})]}),o&&c.jsx("div",{className:"ml-3",children:o}),e&&c.jsx("button",{type:"button",className:`
              ml-3 flex-shrink-0 p-1 rounded-full 
              ${s==="filled"?"text-white/80 hover:text-white hover:bg-white/10":"text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700/50"}
              focus:outline-none transition-colors
            `,onClick:()=>d(!1),"aria-label":"Close",children:c.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Pe=C.forwardRef(({children:t,component:r="div",sx:e={},className:s="",...n},a)=>{const i={};let o="";e.display&&(typeof e.display=="object"?(e.display.xs&&(o+=` ${e.display.xs}`),e.display.sm&&(o+=` sm:${e.display.sm}`),e.display.md&&(o+=` md:${e.display.md}`),e.display.lg&&(o+=` lg:${e.display.lg}`),e.display.xl&&(o+=` xl:${e.display.xl}`)):o+=` ${e.display}`),e.flexDirection&&(typeof e.flexDirection=="object"?(e.flexDirection.xs&&(o+=` flex-${e.flexDirection.xs}`),e.flexDirection.sm&&(o+=` sm:flex-${e.flexDirection.sm}`),e.flexDirection.md&&(o+=` md:flex-${e.flexDirection.md}`),e.flexDirection.lg&&(o+=` lg:flex-${e.flexDirection.lg}`),e.flexDirection.xl&&(o+=` xl:flex-${e.flexDirection.xl}`)):o+=` flex-${e.flexDirection}`),e.justifyContent&&(o+=` justify-${e.justifyContent.replace("flex-","")}`),e.alignItems&&(o+=` items-${e.alignItems.replace("flex-","")}`),["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py"].forEach(f=>{if(e[f]!==void 0)if(typeof e[f]=="object")for(const h in e[f]){const v=e[f][h],g=`${h==="xs"?"":`${h}:`}${f}-${v}`;o+=` ${g}`}else{const h=e[f];f==="m"&&(i.margin=`${h*.25}rem`),f==="mt"&&(i.marginTop=`${h*.25}rem`),f==="mr"&&(i.marginRight=`${h*.25}rem`),f==="mb"&&(i.marginBottom=`${h*.25}rem`),f==="ml"&&(i.marginLeft=`${h*.25}rem`),f==="mx"&&(i.marginLeft=`${h*.25}rem`,i.marginRight=`${h*.25}rem`),f==="my"&&(i.marginTop=`${h*.25}rem`,i.marginBottom=`${h*.25}rem`),f==="p"&&(i.padding=`${h*.25}rem`),f==="pt"&&(i.paddingTop=`${h*.25}rem`),f==="pr"&&(i.paddingRight=`${h*.25}rem`),f==="pb"&&(i.paddingBottom=`${h*.25}rem`),f==="pl"&&(i.paddingLeft=`${h*.25}rem`),f==="px"&&(i.paddingLeft=`${h*.25}rem`,i.paddingRight=`${h*.25}rem`),f==="py"&&(i.paddingTop=`${h*.25}rem`,i.paddingBottom=`${h*.25}rem`)}}),e.width&&(i.width=typeof e.width=="number"?`${e.width}px`:e.width),e.minWidth&&(i.minWidth=typeof e.minWidth=="number"?`${e.minWidth}px`:e.minWidth),e.maxWidth&&(i.maxWidth=typeof e.maxWidth=="number"?`${e.maxWidth}px`:e.maxWidth),e.height&&(i.height=typeof e.height=="number"?`${e.height}px`:e.height),e.minHeight&&(i.minHeight=typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight),e.maxHeight&&(i.maxHeight=typeof e.maxHeight=="number"?`${e.maxHeight}px`:e.maxHeight),e.color&&(i.color=e.color),e.backgroundColor&&(i.backgroundColor=e.backgroundColor),e.border&&(i.border=e.border),e.borderTop&&(i.borderTop=e.borderTop),e.borderRight&&(i.borderRight=e.borderRight),e.borderBottom&&(i.borderBottom=e.borderBottom),e.borderLeft&&(i.borderLeft=e.borderLeft),e.borderRadius&&(i.borderRadius=e.borderRadius),e.borderColor&&(i.borderColor=e.borderColor),e.fontWeight&&(i.fontWeight=e.fontWeight),e.fontSize&&(i.fontSize=e.fontSize),e.textAlign&&(i.textAlign=e.textAlign);const d=`${s}${o}`.trim();return c.jsx(r,{ref:a,className:d,style:{...i,...n.style},...n,children:t})});Pe.displayName="Box";const or=C.forwardRef(({children:t,className:r="",disablePadding:e=!1,dense:s=!1,sx:n={},...a},i)=>{const o={};return n.width&&(o.width=n.width),n.maxWidth&&(o.maxWidth=n.maxWidth),n.maxHeight&&(o.maxHeight=n.maxHeight),n.overflowY&&(o.overflowY=n.overflowY),n.overflowX&&(o.overflowX=n.overflowX),n.flexGrow!==void 0&&(o.flexGrow=n.flexGrow),c.jsx("ul",{ref:i,className:`
        ${e?"":"py-2"}
        ${s?"space-y-0.5":"space-y-1"}
        ${r}
      `,style:{...a.style,...o},...a,children:t})});or.displayName="List";const Lt=C.forwardRef(({children:t,className:r="",selected:e=!1,disabled:s=!1,divider:n=!1,disablePadding:a=!1,onClick:i,sx:o={},secondaryAction:l,...d},f)=>{const h={},v=e?"bg-primary-600/20":"",m=s?"opacity-50 pointer-events-none":"",g=i?"cursor-pointer hover:bg-slate-800/80":"",b=n?"border-b border-slate-700/50":"",y=a?"":"px-4 py-2",x=ie.Children.map(t,w=>ie.isValidElement(w)&&(w.type===Lt||typeof w.type=="function"&&(w.type.displayName==="ListItem"||w.type.name==="ListItem"))?w.props.children:w);return l?c.jsxs("li",{ref:f,className:`
          ${y} transition-colors
          ${v}
          ${m}
          ${g}
          ${b}
          ${r}
          flex justify-between items-center
        `,onClick:s?void 0:i,style:{...d.style,...h},...d,children:[c.jsx("div",{className:"flex-grow",children:x}),c.jsx("div",{className:"ml-2",children:l})]}):c.jsx("li",{ref:f,className:`
        ${y} transition-colors
        ${v}
        ${m}
        ${g}
        ${b}
        ${r}
      `,onClick:s?void 0:i,style:{...d.style,...h},...d,children:x})});Lt.displayName="ListItem";const sa=C.forwardRef(({children:t,className:r="",selected:e=!1,disabled:s=!1,onClick:n,sx:a={},...i},o)=>{const l={},d=e?"bg-primary-600/20":"",f="flex items-center w-full px-4 py-2 text-left transition-colors",h="hover:bg-slate-800/80",v="active:bg-slate-700/50",m=s?"opacity-50 cursor-not-allowed":"cursor-pointer";return c.jsx("button",{ref:o,type:"button",role:"button","aria-disabled":s,disabled:s,className:`
        ${f}
        ${d}
        ${s?"":h} ${s?"":v}
        ${m}
        ${r}
      `,onClick:s?void 0:n,style:{...i.style,...l},...i,children:t})});sa.displayName="ListItemButton";const Hs=({primary:t,secondary:r,className:e="",sx:s={},primaryTypographyProps:n={},secondaryTypographyProps:a={},...i})=>{const o=`text-sm font-medium text-white 
    ${n.variant==="body2"?"text-xs":""}
    ${n.variant==="subtitle1"?"text-base font-semibold":""}
    ${n.variant==="subtitle2"?"text-sm font-semibold":""}
    ${n.className||""}
  `,l=`text-xs text-slate-400
    ${a.className||""}
  `;return c.jsxs("div",{className:`flex flex-col ${e}`,...i,children:[t&&c.jsx("div",{className:o,children:t}),r&&c.jsx("div",{className:l,children:r})]})},lr=C.forwardRef(({children:t,className:r="",elevation:e=1,variant:s="elevation",sx:n={},...a},i)=>{const o={};n.display&&(o.display=n.display),n.flexDirection&&(o.flexDirection=n.flexDirection),n.alignItems&&(o.alignItems=n.alignItems),n.justifyContent&&(o.justifyContent=n.justifyContent),n.flexGrow!==void 0&&(o.flexGrow=n.flexGrow),n.p&&(o.padding=typeof n.p=="number"?`${n.p*8}px`:n.p),n.width&&(o.width=n.width),n.height&&(o.height=n.height),n.minWidth&&(o.minWidth=n.minWidth),n.maxWidth&&(o.maxWidth=n.maxWidth),n.overflow&&(o.overflow=n.overflow),n.overflowX&&(o.overflowX=n.overflowX),n.overflowY&&(o.overflowY=n.overflowY),n.bgcolor&&(o.backgroundColor=n.bgcolor),n.zIndex!==void 0&&(o.zIndex=n.zIndex);let l="";if(s==="elevation")switch(e){case 0:l="";break;case 1:l="shadow-md";break;case 2:l="shadow-lg";break;case 3:l="shadow-xl";break;default:l="shadow-2xl"}const d=s==="outlined"?"border border-slate-700/50":"";return c.jsx("div",{ref:i,className:`paper glass-effect rounded-[var(--radius-md)] ${l} ${d} ${r}`,style:{...o,...a.style},...a,children:t})});lr.displayName="Paper";function oa(t,r){const{options:e,value:s,onChange:n,getOptionLabel:a,renderInput:i,isOptionEqualToValue:o,className:l="",sx:d={}}=t,[f,h]=C.useState(!1),[v,m]=C.useState(s?a(s):""),[g,b]=C.useState(-1),y=C.useRef(null),x=C.useRef(null),w=C.useRef(null);C.useEffect(()=>{if(s!==null&&a(s)!==v){const k=a(s);m(k),x.current&&(x.current.value=k)}},[s,a]);const _=e.filter(k=>{const A=a(k);return A&&typeof A=="string"&&typeof v=="string"&&A.toLowerCase().includes(v.toLowerCase())}),E=C.useCallback(k=>{if(y.current&&!y.current.contains(k.target)&&(h(!1),v)){const A=e.find(u=>a(u).toLowerCase()===v.toLowerCase());A?n(null,A):s&&m(a(s))}},[s,v,e,a,n]);C.useEffect(()=>(document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}),[E]);const S=(k,A)=>{m(k),h(!0),b(-1),k===""&&s!==null&&n(null,null)},F=()=>{h(!0)},R=k=>{const A=a(k);m(A),h(!1),n(null,k)},Z=k=>{if(!f){k.key==="ArrowDown"&&h(!0);return}switch(k.key){case"ArrowDown":k.preventDefault(),b(A=>A<_.length-1?A+1:0);break;case"ArrowUp":k.preventDefault(),b(A=>A>0?A-1:_.length-1);break;case"Enter":g>=0&&g<_.length&&R(_[g]);break;case"Escape":h(!1);break}};C.useEffect(()=>{if(f&&g>=0&&w.current){const k=w.current.children[g];k&&k.scrollIntoView({block:"nearest"})}},[g,f]);const L=k=>{b(k)},O=()=>({value:v,onChange:S,onFocus:F,onKeyDown:Z,ref:x,InputProps:{inputProps:{role:"combobox","aria-autocomplete":"list","aria-expanded":f,"aria-controls":f?"autocomplete-listbox":void 0,"aria-activedescendant":f&&g>=0?`option-${g}`:void 0,value:v}}}),N=(k,A)=>{const u=g===A,D=a(k);return c.jsx(Lt,{role:"option",id:`option-${A}`,"aria-selected":u,onClick:()=>R(k),onMouseEnter:()=>L(A),sx:{cursor:"pointer",bgcolor:u?"action.hover":"transparent","&:hover":{bgcolor:"action.hover"}},children:D},A)};return ie.useImperativeHandle(r,()=>y.current),ie.useLayoutEffect(()=>{x.current&&(x.current.value=v)},[v,f,g]),c.jsxs(Pe,{ref:y,className:`autocomplete ${l}`,sx:{position:"relative",...d},children:[i(O()),f&&_.length>0&&c.jsx(lr,{sx:{position:"absolute",zIndex:1e3,width:"100%",maxHeight:300,overflow:"auto",mt:1},children:c.jsx(or,{ref:w,role:"listbox",id:"autocomplete-listbox",children:_.map((k,A)=>N(k,A))})})]})}const Zs=ie.forwardRef(oa),ve=typeof document<"u"?ie.useLayoutEffect:()=>{};function ye(t){const r=C.useRef(null);return ve(()=>{r.current=t},[t]),C.useCallback((...e)=>{const s=r.current;return s==null?void 0:s(...e)},[])}function la(t){let[r,e]=C.useState(t),s=C.useRef(null),n=ye(()=>{if(!s.current)return;let i=s.current.next();if(i.done){s.current=null;return}r===i.value?n():e(i.value)});ve(()=>{s.current&&n()});let a=ye(i=>{s.current=i(r),n()});return[r,a]}const Ur={prefix:String(Math.round(Math.random()*1e10)),current:0},Vr=ie.createContext(Ur),ca=ie.createContext(!1);let Mt=new WeakMap;function da(t=!1){let r=C.useContext(Vr),e=C.useRef(null);if(e.current===null&&!t){var s,n;let a=(n=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(s=n.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(a){let i=Mt.get(a);i==null?Mt.set(a,{id:r.current,state:a.memoizedState}):a.memoizedState!==i.state&&(r.current=i.id,Mt.delete(a))}e.current=++r.current}return e.current}function ua(t){let r=C.useContext(Vr),e=da(!!t),s=`react-aria${r.prefix}`;return t||`${s}-${e}`}function fa(t){let r=ie.useId(),[e]=C.useState(ba()),s=e?"react-aria":`react-aria${Ur.prefix}`;return t||`${s}-${r}`}const ha=typeof ie.useId=="function"?fa:ua;function ma(){return!1}function pa(){return!0}function ga(t){return()=>{}}function ba(){return typeof ie.useSyncExternalStore=="function"?ie.useSyncExternalStore(ga,ma,pa):C.useContext(ca)}let va=!!(typeof window<"u"&&window.document&&window.document.createElement),Je=new Map,ot;typeof FinalizationRegistry<"u"&&(ot=new FinalizationRegistry(t=>{Je.delete(t)}));function kt(t){let[r,e]=C.useState(t),s=C.useRef(null),n=ha(r),a=C.useRef(null);if(ot&&ot.register(a,n),va){const i=Je.get(n);i&&!i.includes(s)?i.push(s):Je.set(n,[s])}return ve(()=>{let i=n;return()=>{ot&&ot.unregister(a),Je.delete(i)}},[n]),C.useEffect(()=>{let i=s.current;return i&&e(i),()=>{i&&(s.current=null)}}),n}function xa(t,r){if(t===r)return t;let e=Je.get(t);if(e)return e.forEach(n=>n.current=r),r;let s=Je.get(r);return s?(s.forEach(n=>n.current=t),t):r}function Ht(t=[]){let r=kt(),[e,s]=la(r),n=C.useCallback(()=>{s(function*(){yield r,yield document.getElementById(r)?r:void 0})},[r,s]);return ve(n,[r,n,...t]),e}function Hr(...t){return(...r)=>{for(let e of t)typeof e=="function"&&e(...r)}}const ue=t=>{var r;return(r=t==null?void 0:t.ownerDocument)!==null&&r!==void 0?r:document},$e=t=>t&&"window"in t&&t.window===t?t:ue(t).defaultView||window;function wa(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function ya(t){return wa(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let ka=!1;function At(){return ka}function je(t,r){if(!At())return r&&t?t.contains(r):!1;if(!t||!r)return!1;let e=r;for(;e!==null;){if(e===t)return!0;e.tagName==="SLOT"&&e.assignedSlot?e=e.assignedSlot.parentNode:ya(e)?e=e.host:e=e.parentNode}return!1}const _e=(t=document)=>{var r;if(!At())return t.activeElement;let e=t.activeElement;for(;e&&"shadowRoot"in e&&(!((r=e.shadowRoot)===null||r===void 0)&&r.activeElement);)e=e.shadowRoot.activeElement;return e};function pe(t){return At()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}class $a{get currentNode(){return this._currentNode}set currentNode(r){if(!je(this.root,r))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const e=[];let s=r,n=r;for(this._currentNode=r;s&&s!==this.root;)if(s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const i=s,o=this._doc.createTreeWalker(i,this.whatToShow,{acceptNode:this._acceptNode});e.push(o),o.currentNode=n,this._currentSetFor.add(o),s=n=i.host}else s=s.parentNode;const a=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});e.push(a),a.currentNode=n,this._currentSetFor.add(a),this._walkerStack=e}get doc(){return this._doc}firstChild(){let r=this.currentNode,e=this.nextNode();return je(r,e)?(e&&(this.currentNode=e),e):(this.currentNode=r,null)}lastChild(){let e=this._walkerStack[0].lastChild();return e&&(this.currentNode=e),e}nextNode(){const r=this._walkerStack[0].nextNode();if(r){if(r.shadowRoot){var e;let n;if(typeof this.filter=="function"?n=this.filter(r):!((e=this.filter)===null||e===void 0)&&e.acceptNode&&(n=this.filter.acceptNode(r)),n===NodeFilter.FILTER_ACCEPT)return this.currentNode=r,r;let a=this.nextNode();return a&&(this.currentNode=a),a}return r&&(this.currentNode=r),r}else if(this._walkerStack.length>1){this._walkerStack.shift();let s=this.nextNode();return s&&(this.currentNode=s),s}else return null}previousNode(){const r=this._walkerStack[0];if(r.currentNode===r.root){if(this._currentSetFor.has(r))if(this._currentSetFor.delete(r),this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null;return null}const e=r.previousNode();if(e){if(e.shadowRoot){var s;let a;if(typeof this.filter=="function"?a=this.filter(e):!((s=this.filter)===null||s===void 0)&&s.acceptNode&&(a=this.filter.acceptNode(e)),a===NodeFilter.FILTER_ACCEPT)return e&&(this.currentNode=e),e;let i=this.lastChild();return i&&(this.currentNode=i),i}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.previousNode();return n&&(this.currentNode=n),n}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(r,e,s,n){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=i=>{if(i.nodeType===Node.ELEMENT_NODE){const l=i.shadowRoot;if(l){const d=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(d),NodeFilter.FILTER_ACCEPT}else{var o;if(typeof this.filter=="function")return this.filter(i);if(!((o=this.filter)===null||o===void 0)&&o.acceptNode)return this.filter.acceptNode(i);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=r,this.root=e,this.filter=n??null,this.whatToShow=s??NodeFilter.SHOW_ALL,this._currentNode=e,this._walkerStack.unshift(r.createTreeWalker(e,s,this._acceptNode));const a=e.shadowRoot;if(a){const i=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(i)}}}function _a(t,r,e,s){return At()?new $a(t,r,e,s):t.createTreeWalker(r,e,s)}function Zr(t){var r,e,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(e=Zr(t[r]))&&(s&&(s+=" "),s+=e)}else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function ja(){for(var t,r,e=0,s="",n=arguments.length;e<n;e++)(t=arguments[e])&&(r=Zr(t))&&(s&&(s+=" "),s+=r);return s}function Ce(...t){let r={...t[0]};for(let e=1;e<t.length;e++){let s=t[e];for(let n in s){let a=r[n],i=s[n];typeof a=="function"&&typeof i=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?r[n]=Hr(a,i):(n==="className"||n==="UNSAFE_className")&&typeof a=="string"&&typeof i=="string"?r[n]=ja(a,i):n==="id"&&a&&i?r.id=xa(a,i):r[n]=i!==void 0?i:a}}return r}const Ea=new Set(["id"]),Ca=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Sa=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),Na=/^(data-.*)$/;function It(t,r={}){let{labelable:e,isLink:s,propNames:n}=r,a={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Ea.has(i)||e&&Ca.has(i)||s&&Sa.has(i)||n!=null&&n.has(i)||Na.test(i))&&(a[i]=t[i]);return a}function qe(t){if(Ta())t.focus({preventScroll:!0});else{let r=La(t);t.focus(),Aa(r)}}let gt=null;function Ta(){if(gt==null){gt=!1;try{document.createElement("div").focus({get preventScroll(){return gt=!0,!0}})}catch{}}return gt}function La(t){let r=t.parentNode,e=[],s=document.scrollingElement||document.documentElement;for(;r instanceof HTMLElement&&r!==s;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&e.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),r=r.parentNode;return s instanceof HTMLElement&&e.push({element:s,scrollTop:s.scrollTop,scrollLeft:s.scrollLeft}),e}function Aa(t){for(let{element:r,scrollTop:e,scrollLeft:s}of t)r.scrollTop=e,r.scrollLeft=s}function Pt(t){var r;return typeof window>"u"||window.navigator==null?!1:((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.brands.some(e=>t.test(e.brand)))||t.test(window.navigator.userAgent)}function cr(t){var r;return typeof window<"u"&&window.navigator!=null?t.test(((r=window.navigator.userAgentData)===null||r===void 0?void 0:r.platform)||window.navigator.platform):!1}function Oe(t){let r=null;return()=>(r==null&&(r=t()),r)}const Ye=Oe(function(){return cr(/^Mac/i)}),Ia=Oe(function(){return cr(/^iPhone/i)}),Kr=Oe(function(){return cr(/^iPad/i)||Ye()&&navigator.maxTouchPoints>1}),dr=Oe(function(){return Ia()||Kr()}),Ks=Oe(function(){return Ye()||dr()}),Pa=Oe(function(){return Pt(/AppleWebKit/i)&&!Jr()}),Jr=Oe(function(){return Pt(/Chrome/i)}),ur=Oe(function(){return Pt(/Android/i)}),Da=Oe(function(){return Pt(/Firefox/i)}),za=C.createContext({isNative:!0,open:Ma,useHref:t=>t});function Ra(){return C.useContext(za)}function Xe(t,r,e=!0){var s,n;let{metaKey:a,ctrlKey:i,altKey:o,shiftKey:l}=r;Da()&&(!((n=window.event)===null||n===void 0||(s=n.type)===null||s===void 0)&&s.startsWith("key"))&&t.target==="_blank"&&(Ye()?a=!0:i=!0);let d=Pa()&&Ye()&&!Kr()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:i,altKey:o,shiftKey:l}):new MouseEvent("click",{metaKey:a,ctrlKey:i,altKey:o,shiftKey:l,bubbles:!0,cancelable:!0});Xe.isOpening=e,qe(t),t.dispatchEvent(d),Xe.isOpening=!1}Xe.isOpening=!1;function Oa(t,r){if(t instanceof HTMLAnchorElement)r(t);else if(t.hasAttribute("data-href")){let e=document.createElement("a");e.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(e.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(e.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(e.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(e.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(e.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(e),r(e),t.removeChild(e)}}function Ma(t,r){Oa(t,e=>Xe(e,r))}function Js(t){let r=Ra();var e;const s=r.useHref((e=t==null?void 0:t.href)!==null&&e!==void 0?e:"");return{href:t!=null&&t.href?s:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}let Ze=new Map,Zt=new Set;function Er(){if(typeof window>"u")return;function t(s){return"propertyName"in s}let r=s=>{if(!t(s)||!s.target)return;let n=Ze.get(s.target);n||(n=new Set,Ze.set(s.target,n),s.target.addEventListener("transitioncancel",e,{once:!0})),n.add(s.propertyName)},e=s=>{if(!t(s)||!s.target)return;let n=Ze.get(s.target);if(n&&(n.delete(s.propertyName),n.size===0&&(s.target.removeEventListener("transitioncancel",e),Ze.delete(s.target)),Ze.size===0)){for(let a of Zt)a();Zt.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?Er():document.addEventListener("DOMContentLoaded",Er));function Gr(t){requestAnimationFrame(()=>{Ze.size===0?t():Zt.add(t)})}function qr(){let t=C.useRef(new Map),r=C.useCallback((n,a,i,o)=>{let l=o!=null&&o.once?(...d)=>{t.current.delete(i),i(...d)}:i;t.current.set(i,{type:a,eventTarget:n,fn:l,options:o}),n.addEventListener(a,l,o)},[]),e=C.useCallback((n,a,i,o)=>{var l;let d=((l=t.current.get(i))===null||l===void 0?void 0:l.fn)||i;n.removeEventListener(a,d,o),t.current.delete(i)},[]),s=C.useCallback(()=>{t.current.forEach((n,a)=>{e(n.eventTarget,n.type,a,n.options)})},[e]);return C.useEffect(()=>s,[s]),{addGlobalListener:r,removeGlobalListener:e,removeAllGlobalListeners:s}}function Fa(t,r){let{id:e,"aria-label":s,"aria-labelledby":n}=t;return e=kt(e),n&&s?n=[...new Set([e,...n.trim().split(/\s+/)])].join(" "):n&&(n=n.trim().split(/\s+/).join(" ")),!s&&!n&&r&&(s=r),{id:e,"aria-label":s,"aria-labelledby":n}}function Yr(t,r){ve(()=>{if(t&&t.ref&&r)return t.ref.current=r.current,()=>{t.ref&&(t.ref.current=null)}})}function Xr(t){return t.mozInputSource===0&&t.isTrusted?!0:ur()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function Ba(t){return!ur()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"}function Qr(t,r,e){let s=C.useRef(r),n=ye(()=>{e&&e(s.current)});C.useEffect(()=>{var a;let i=t==null||(a=t.current)===null||a===void 0?void 0:a.form;return i==null||i.addEventListener("reset",n),()=>{i==null||i.removeEventListener("reset",n)}},[t,n])}const fr=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],Wa=fr.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";fr.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Ua=fr.join(':not([hidden]):not([tabindex="-1"]),');function en(t){return t.matches(Wa)}function Va(t){return t.matches(Ua)}function tn(t,r,e){let[s,n]=C.useState(t||r),a=C.useRef(t!==void 0),i=t!==void 0;C.useEffect(()=>{a.current,a.current=i},[i]);let o=i?t:s,l=C.useCallback((d,...f)=>{let h=(v,...m)=>{e&&(Object.is(o,v)||e(v,...m)),i||(o=v)};typeof d=="function"?n((m,...g)=>{let b=d(i?o:m,...g);return h(b,...f),i?m:b}):(i||n(d),h(d,...f))},[i,o,e]);return[o,l]}function hr(t){let r=t;return r.nativeEvent=t,r.isDefaultPrevented=()=>r.defaultPrevented,r.isPropagationStopped=()=>r.cancelBubble,r.persist=()=>{},r}function rn(t,r){Object.defineProperty(t,"target",{value:r}),Object.defineProperty(t,"currentTarget",{value:r})}function nn(t){let r=C.useRef({isFocused:!1,observer:null});ve(()=>{const s=r.current;return()=>{s.observer&&(s.observer.disconnect(),s.observer=null)}},[]);let e=ye(s=>{t==null||t(s)});return C.useCallback(s=>{if(s.target instanceof HTMLButtonElement||s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement){r.current.isFocused=!0;let n=s.target,a=i=>{if(r.current.isFocused=!1,n.disabled){let o=hr(i);e(o)}r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};n.addEventListener("focusout",a,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&n.disabled){var i;(i=r.current.observer)===null||i===void 0||i.disconnect();let o=n===document.activeElement?null:document.activeElement;n.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),r.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let $t=!1;function Ha(t){for(;t&&!en(t);)t=t.parentElement;let r=$e(t),e=r.document.activeElement;if(!e||e===t)return;$t=!0;let s=!1,n=f=>{(f.target===e||s)&&f.stopImmediatePropagation()},a=f=>{(f.target===e||s)&&(f.stopImmediatePropagation(),!t&&!s&&(s=!0,qe(e),l()))},i=f=>{(f.target===t||s)&&f.stopImmediatePropagation()},o=f=>{(f.target===t||s)&&(f.stopImmediatePropagation(),s||(s=!0,qe(e),l()))};r.addEventListener("blur",n,!0),r.addEventListener("focusout",a,!0),r.addEventListener("focusin",o,!0),r.addEventListener("focus",i,!0);let l=()=>{cancelAnimationFrame(d),r.removeEventListener("blur",n,!0),r.removeEventListener("focusout",a,!0),r.removeEventListener("focusin",o,!0),r.removeEventListener("focus",i,!0),$t=!1,s=!1},d=requestAnimationFrame(l);return l}let Ke="default",Kt="",xt=new WeakMap;function Za(t){if(dr()){if(Ke==="default"){const r=ue(t);Kt=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}Ke="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let r="userSelect"in t.style?"userSelect":"webkitUserSelect";xt.set(t,t.style[r]),t.style[r]="none"}}function Cr(t){if(dr()){if(Ke!=="disabled")return;Ke="restoring",setTimeout(()=>{Gr(()=>{if(Ke==="restoring"){const r=ue(t);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=Kt||""),Kt="",Ke="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&xt.has(t)){let r=xt.get(t),e="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[e]==="none"&&(t.style[e]=r),t.getAttribute("style")===""&&t.removeAttribute("style"),xt.delete(t)}}const an=ie.createContext({register:()=>{}});an.displayName="PressResponderContext";function Ka(t,r){return r.get?r.get.call(t):r.value}function sn(t,r,e){if(!r.has(t))throw new TypeError("attempted to "+e+" private field on non-instance");return r.get(t)}function Ja(t,r){var e=sn(t,r,"get");return Ka(t,e)}function Ga(t,r){if(r.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qa(t,r,e){Ga(t,r),r.set(t,e)}function Ya(t,r,e){if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}}function Sr(t,r,e){var s=sn(t,r,"set");return Ya(t,s,e),e}function Xa(t){let r=C.useContext(an);if(r){let{register:e,...s}=r;t=Ce(s,t),e()}return Yr(r,t.ref),t}var bt=new WeakMap;class vt{continuePropagation(){Sr(this,bt,!1)}get shouldStopPropagation(){return Ja(this,bt)}constructor(r,e,s,n){qa(this,bt,{writable:!0,value:void 0}),Sr(this,bt,!0);var a;let i=(a=n==null?void 0:n.target)!==null&&a!==void 0?a:s.currentTarget;const o=i==null?void 0:i.getBoundingClientRect();let l,d=0,f,h=null;s.clientX!=null&&s.clientY!=null&&(f=s.clientX,h=s.clientY),o&&(f!=null&&h!=null?(l=f-o.left,d=h-o.top):(l=o.width/2,d=o.height/2)),this.type=r,this.pointerType=e,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=l,this.y=d}}const Nr=Symbol("linkClicked");function _t(t){let{onPress:r,onPressChange:e,onPressStart:s,onPressEnd:n,onPressUp:a,onClick:i,isDisabled:o,isPressed:l,preventFocusOnPress:d,shouldCancelOnPointerExit:f,allowTextSelectionOnPress:h,ref:v,...m}=Xa(t),[g,b]=C.useState(!1),y=C.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:w}=qr(),_=ye((N,k)=>{let A=y.current;if(o||A.didFirePressStart)return!1;let u=!0;if(A.isTriggeringEvent=!0,s){let D=new vt("pressstart",k,N);s(D),u=D.shouldStopPropagation}return e&&e(!0),A.isTriggeringEvent=!1,A.didFirePressStart=!0,b(!0),u}),E=ye((N,k,A=!0)=>{let u=y.current;if(!u.didFirePressStart)return!1;u.didFirePressStart=!1,u.isTriggeringEvent=!0;let D=!0;if(n){let H=new vt("pressend",k,N);n(H),D=H.shouldStopPropagation}if(e&&e(!1),b(!1),r&&A&&!o){let H=new vt("press",k,N);r(H),D&&(D=H.shouldStopPropagation)}return u.isTriggeringEvent=!1,D}),S=ye((N,k)=>{let A=y.current;if(o)return!1;if(a){A.isTriggeringEvent=!0;let u=new vt("pressup",k,N);return a(u),A.isTriggeringEvent=!1,u.shouldStopPropagation}return!0}),F=ye(N=>{let k=y.current;if(k.isPressed&&k.target){k.didFirePressStart&&k.pointerType!=null&&E(He(k.target,N),k.pointerType,!1),k.isPressed=!1,k.isOverTarget=!1,k.activePointerId=null,k.pointerType=null,w(),h||Cr(k.target);for(let A of k.disposables)A();k.disposables=[]}}),R=ye(N=>{f&&F(N)}),Z=ye(N=>{i==null||i(N)}),L=ye((N,k)=>{if(i){let A=new MouseEvent("click",N);rn(A,k),i(hr(A))}}),O=C.useMemo(()=>{let N=y.current,k={onKeyDown(u){if(Ft(u.nativeEvent,u.currentTarget)&&je(u.currentTarget,pe(u.nativeEvent))){var D;Tr(pe(u.nativeEvent),u.key)&&u.preventDefault();let H=!0;if(!N.isPressed&&!u.repeat){N.target=u.currentTarget,N.isPressed=!0,N.pointerType="keyboard",H=_(u,"keyboard");let W=u.currentTarget,ee=B=>{Ft(B,W)&&!B.repeat&&je(W,pe(B))&&N.target&&S(He(N.target,B),"keyboard")};x(ue(u.currentTarget),"keyup",Hr(ee,A),!0)}H&&u.stopPropagation(),u.metaKey&&Ye()&&((D=N.metaKeyEvents)===null||D===void 0||D.set(u.key,u.nativeEvent))}else u.key==="Meta"&&(N.metaKeyEvents=new Map)},onClick(u){if(!(u&&!je(u.currentTarget,pe(u.nativeEvent)))&&u&&u.button===0&&!N.isTriggeringEvent&&!Xe.isOpening){let D=!0;if(o&&u.preventDefault(),!N.ignoreEmulatedMouseEvents&&!N.isPressed&&(N.pointerType==="virtual"||Xr(u.nativeEvent))){let H=_(u,"virtual"),W=S(u,"virtual"),ee=E(u,"virtual");Z(u),D=H&&W&&ee}else if(N.isPressed&&N.pointerType!=="keyboard"){let H=N.pointerType||u.nativeEvent.pointerType||"virtual";D=E(He(u.currentTarget,u),H,!0),N.isOverTarget=!1,Z(u),F(u)}N.ignoreEmulatedMouseEvents=!1,D&&u.stopPropagation()}}},A=u=>{var D;if(N.isPressed&&N.target&&Ft(u,N.target)){var H;Tr(pe(u),u.key)&&u.preventDefault();let ee=pe(u),B=je(N.target,pe(u));E(He(N.target,u),"keyboard",B),B&&L(u,N.target),w(),u.key!=="Enter"&&mr(N.target)&&je(N.target,ee)&&!u[Nr]&&(u[Nr]=!0,Xe(N.target,u,!1)),N.isPressed=!1,(H=N.metaKeyEvents)===null||H===void 0||H.delete(u.key)}else if(u.key==="Meta"&&(!((D=N.metaKeyEvents)===null||D===void 0)&&D.size)){var W;let ee=N.metaKeyEvents;N.metaKeyEvents=void 0;for(let B of ee.values())(W=N.target)===null||W===void 0||W.dispatchEvent(new KeyboardEvent("keyup",B))}};if(typeof PointerEvent<"u"){k.onPointerDown=H=>{if(H.button!==0||!je(H.currentTarget,pe(H.nativeEvent)))return;if(Ba(H.nativeEvent)){N.pointerType="virtual";return}N.pointerType=H.pointerType;let W=!0;if(!N.isPressed){N.isPressed=!0,N.isOverTarget=!0,N.activePointerId=H.pointerId,N.target=H.currentTarget,h||Za(N.target),W=_(H,N.pointerType);let ee=pe(H.nativeEvent);"releasePointerCapture"in ee&&ee.releasePointerCapture(H.pointerId),x(ue(H.currentTarget),"pointerup",u,!1),x(ue(H.currentTarget),"pointercancel",D,!1)}W&&H.stopPropagation()},k.onMouseDown=H=>{if(je(H.currentTarget,pe(H.nativeEvent))&&H.button===0){if(d){let W=Ha(H.target);W&&N.disposables.push(W)}H.stopPropagation()}},k.onPointerUp=H=>{!je(H.currentTarget,pe(H.nativeEvent))||N.pointerType==="virtual"||H.button===0&&S(H,N.pointerType||H.pointerType)},k.onPointerEnter=H=>{H.pointerId===N.activePointerId&&N.target&&!N.isOverTarget&&N.pointerType!=null&&(N.isOverTarget=!0,_(He(N.target,H),N.pointerType))},k.onPointerLeave=H=>{H.pointerId===N.activePointerId&&N.target&&N.isOverTarget&&N.pointerType!=null&&(N.isOverTarget=!1,E(He(N.target,H),N.pointerType,!1),R(H))};let u=H=>{if(H.pointerId===N.activePointerId&&N.isPressed&&H.button===0&&N.target){if(je(N.target,pe(H))&&N.pointerType!=null){let W=!1,ee=setTimeout(()=>{N.isPressed&&N.target instanceof HTMLElement&&(W?F(H):(qe(N.target),N.target.click()))},80);x(H.currentTarget,"click",()=>W=!0,!0),N.disposables.push(()=>clearTimeout(ee))}else F(H);N.isOverTarget=!1}},D=H=>{F(H)};k.onDragStart=H=>{je(H.currentTarget,pe(H.nativeEvent))&&F(H)}}return k},[x,o,d,w,h,F,R,E,_,S,Z,L]);return C.useEffect(()=>{let N=v==null?void 0:v.current;N&&N instanceof $e(N).Element&&$e(N).getComputedStyle(N).touchAction==="auto"&&(N.style.touchAction="pan-x pan-y pinch-zoom")},[v]),C.useEffect(()=>{let N=y.current;return()=>{var k;h||Cr((k=N.target)!==null&&k!==void 0?k:void 0);for(let A of N.disposables)A();N.disposables=[]}},[h]),{isPressed:l||g,pressProps:Ce(m,O)}}function mr(t){return t.tagName==="A"&&t.hasAttribute("href")}function Ft(t,r){const{key:e,code:s}=t,n=r,a=n.getAttribute("role");return(e==="Enter"||e===" "||e==="Spacebar"||s==="Space")&&!(n instanceof $e(n).HTMLInputElement&&!on(n,e)||n instanceof $e(n).HTMLTextAreaElement||n.isContentEditable)&&!((a==="link"||!a&&mr(n))&&e!=="Enter")}function He(t,r){let e=r.clientX,s=r.clientY;return{currentTarget:t,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:e,clientY:s}}function Qa(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!mr(t)}function Tr(t,r){return t instanceof HTMLInputElement?!on(t,r):Qa(t)}const ei=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function on(t,r){return t.type==="checkbox"||t.type==="radio"?r===" ":ei.has(t.type)}let Ve=null,Jt=new Set,ct=new Map,Ue=!1,Gt=!1;const ti={Tab:!0,Escape:!0};function Dt(t,r){for(let e of Jt)e(t,r)}function ri(t){return!(t.metaKey||!Ye()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function jt(t){Ue=!0,ri(t)&&(Ve="keyboard",Dt("keyboard",t))}function Ge(t){Ve="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Ue=!0,Dt("pointer",t))}function ln(t){Xr(t)&&(Ue=!0,Ve="virtual")}function cn(t){t.target===window||t.target===document||$t||!t.isTrusted||(!Ue&&!Gt&&(Ve="virtual",Dt("virtual",t)),Ue=!1,Gt=!1)}function dn(){$t||(Ue=!1,Gt=!0)}function qt(t){if(typeof window>"u"||ct.get($e(t)))return;const r=$e(t),e=ue(t);let s=r.HTMLElement.prototype.focus;r.HTMLElement.prototype.focus=function(){Ue=!0,s.apply(this,arguments)},e.addEventListener("keydown",jt,!0),e.addEventListener("keyup",jt,!0),e.addEventListener("click",ln,!0),r.addEventListener("focus",cn,!0),r.addEventListener("blur",dn,!1),typeof PointerEvent<"u"&&(e.addEventListener("pointerdown",Ge,!0),e.addEventListener("pointermove",Ge,!0),e.addEventListener("pointerup",Ge,!0)),r.addEventListener("beforeunload",()=>{un(t)},{once:!0}),ct.set(r,{focus:s})}const un=(t,r)=>{const e=$e(t),s=ue(t);r&&s.removeEventListener("DOMContentLoaded",r),ct.has(e)&&(e.HTMLElement.prototype.focus=ct.get(e).focus,s.removeEventListener("keydown",jt,!0),s.removeEventListener("keyup",jt,!0),s.removeEventListener("click",ln,!0),e.removeEventListener("focus",cn,!0),e.removeEventListener("blur",dn,!1),typeof PointerEvent<"u"&&(s.removeEventListener("pointerdown",Ge,!0),s.removeEventListener("pointermove",Ge,!0),s.removeEventListener("pointerup",Ge,!0)),ct.delete(e))};function ni(t){const r=ue(t);let e;return r.readyState!=="loading"?qt(t):(e=()=>{qt(t)},r.addEventListener("DOMContentLoaded",e)),()=>un(t,e)}typeof document<"u"&&ni();function ai(){return Ve!=="pointer"}function fn(){return Ve}function ii(t){Ve=t,Dt(t,null)}const si=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function oi(t,r,e){let s=ue(e==null?void 0:e.target);const n=typeof window<"u"?$e(e==null?void 0:e.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?$e(e==null?void 0:e.target).HTMLTextAreaElement:HTMLTextAreaElement,i=typeof window<"u"?$e(e==null?void 0:e.target).HTMLElement:HTMLElement,o=typeof window<"u"?$e(e==null?void 0:e.target).KeyboardEvent:KeyboardEvent;return t=t||s.activeElement instanceof n&&!si.has(s.activeElement.type)||s.activeElement instanceof a||s.activeElement instanceof i&&s.activeElement.isContentEditable,!(t&&r==="keyboard"&&e instanceof o&&!ti[e.key])}function Gs(t,r,e){qt(),C.useEffect(()=>{let s=(n,a)=>{oi(!!(e!=null&&e.isTextInput),n,a)&&t(ai())};return Jt.add(s),()=>{Jt.delete(s)}},r)}function Et(t){const r=ue(t),e=_e(r);if(fn()==="virtual"){let s=e;Gr(()=>{_e(r)===s&&t.isConnected&&qe(t)})}else qe(t)}function li(t){let{isDisabled:r,onFocus:e,onBlur:s,onFocusChange:n}=t;const a=C.useCallback(l=>{if(l.target===l.currentTarget)return s&&s(l),n&&n(!1),!0},[s,n]),i=nn(a),o=C.useCallback(l=>{const d=ue(l.target),f=d?_e(d):_e();l.target===l.currentTarget&&f===pe(l.nativeEvent)&&(e&&e(l),n&&n(!0),i(l))},[n,e,i]);return{focusProps:{onFocus:!r&&(e||n||s)?o:void 0,onBlur:!r&&(s||n)?a:void 0}}}function Lr(t){if(!t)return;let r=!0;return e=>{let s={...e,preventDefault(){e.preventDefault()},isDefaultPrevented(){return e.isDefaultPrevented()},stopPropagation(){r=!0},continuePropagation(){r=!1},isPropagationStopped(){return r}};t(s),r&&e.stopPropagation()}}function ci(t){return{keyboardProps:t.isDisabled?{}:{onKeyDown:Lr(t.onKeyDown),onKeyUp:Lr(t.onKeyUp)}}}let di=ie.createContext(null);function ui(t){let r=C.useContext(di)||{};Yr(r,t);let{ref:e,...s}=r;return s}function pr(t,r){let{focusProps:e}=li(t),{keyboardProps:s}=ci(t),n=Ce(e,s),a=ui(r),i=t.isDisabled?{}:a,o=C.useRef(t.autoFocus);C.useEffect(()=>{o.current&&r.current&&Et(r.current),o.current=!1},[r]);let l=t.excludeFromTabOrder?-1:0;return t.isDisabled&&(l=void 0),{focusableProps:Ce({...n,tabIndex:l},i)}}function fi(t){let{isDisabled:r,onBlurWithin:e,onFocusWithin:s,onFocusWithinChange:n}=t,a=C.useRef({isFocusWithin:!1}),{addGlobalListener:i,removeAllGlobalListeners:o}=qr(),l=C.useCallback(h=>{h.currentTarget.contains(h.target)&&a.current.isFocusWithin&&!h.currentTarget.contains(h.relatedTarget)&&(a.current.isFocusWithin=!1,o(),e&&e(h),n&&n(!1))},[e,n,a,o]),d=nn(l),f=C.useCallback(h=>{if(!h.currentTarget.contains(h.target))return;const v=ue(h.target),m=_e(v);if(!a.current.isFocusWithin&&m===pe(h.nativeEvent)){s&&s(h),n&&n(!0),a.current.isFocusWithin=!0,d(h);let g=h.currentTarget;i(v,"focus",b=>{if(a.current.isFocusWithin&&!je(g,b.target)){let y=new v.defaultView.FocusEvent("blur",{relatedTarget:b.target});rn(y,g);let x=hr(y);l(x)}},{capture:!0})}},[s,n,d,i,l]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:l}}}function hi(t){let{ref:r,onInteractOutside:e,isDisabled:s,onInteractOutsideStart:n}=t,a=C.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),i=ye(l=>{e&&Ar(l,r)&&(n&&n(l),a.current.isPointerDown=!0)}),o=ye(l=>{e&&e(l)});C.useEffect(()=>{let l=a.current;if(s)return;const d=r.current,f=ue(d);if(typeof PointerEvent<"u"){let h=v=>{l.isPointerDown&&Ar(v,r)&&o(v),l.isPointerDown=!1};return f.addEventListener("pointerdown",i,!0),f.addEventListener("pointerup",h,!0),()=>{f.removeEventListener("pointerdown",i,!0),f.removeEventListener("pointerup",h,!0)}}},[r,s,i,o])}function Ar(t,r){if(t.button>0)return!1;if(t.target){const e=t.target.ownerDocument;if(!e||!e.documentElement.contains(t.target)||t.target.closest("[data-react-aria-top-layer]"))return!1}return r.current?!t.composedPath().includes(r.current):!1}function mi(t,r){let{elementType:e="button",isDisabled:s,onPress:n,onPressStart:a,onPressEnd:i,onPressUp:o,onPressChange:l,preventFocusOnPress:d,allowFocusWhenDisabled:f,onClick:h,href:v,target:m,rel:g,type:b="button"}=t,y;e==="button"?y={type:b,disabled:s}:y={role:"button",href:e==="a"&&!s?v:void 0,target:e==="a"?m:void 0,type:e==="input"?b:void 0,disabled:e==="input"?s:void 0,"aria-disabled":!s||e==="input"?void 0:s,rel:e==="a"?g:void 0};let{pressProps:x,isPressed:w}=_t({onPressStart:a,onPressEnd:i,onPressChange:l,onPress:n,onPressUp:o,onClick:h,isDisabled:s,preventFocusOnPress:d,ref:r}),{focusableProps:_}=pr(t,r);f&&(_.tabIndex=s?-1:_.tabIndex);let E=Ce(_,x,It(t,{labelable:!0}));return{isPressed:w,buttonProps:Ce(y,E,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"]})}}function pi(t){const r=$e(t);if(!(t instanceof r.HTMLElement)&&!(t instanceof r.SVGElement))return!1;let{display:e,visibility:s}=t.style,n=e!=="none"&&s!=="hidden"&&s!=="collapse";if(n){const{getComputedStyle:a}=t.ownerDocument.defaultView;let{display:i,visibility:o}=a(t);n=i!=="none"&&o!=="hidden"&&o!=="collapse"}return n}function gi(t,r){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&(t.nodeName==="DETAILS"&&r&&r.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function hn(t,r){return t.nodeName!=="#comment"&&pi(t)&&gi(t,r)&&(!t.parentElement||hn(t.parentElement,t))}const Ir=ie.createContext(null),Yt="react-aria-focus-scope-restore";let ce=null;function bi(t){let{children:r,contain:e,restoreFocus:s,autoFocus:n}=t,a=C.useRef(null),i=C.useRef(null),o=C.useRef([]),{parentNode:l}=C.useContext(Ir)||{},d=C.useMemo(()=>new Qt({scopeRef:o}),[o]);ve(()=>{let v=l||ge.root;if(ge.getTreeNode(v.scopeRef)&&ce&&!Ct(ce,v.scopeRef)){let m=ge.getTreeNode(ce);m&&(v=m)}v.addChild(d),ge.addNode(d)},[d,l]),ve(()=>{let v=ge.getTreeNode(o);v&&(v.contain=!!e)},[e]),ve(()=>{var v;let m=(v=a.current)===null||v===void 0?void 0:v.nextSibling,g=[],b=y=>y.stopPropagation();for(;m&&m!==i.current;)g.push(m),m.addEventListener(Yt,b),m=m.nextSibling;return o.current=g,()=>{for(let y of g)y.removeEventListener(Yt,b)}},[r]),ki(o,s,e),xi(o,e),$i(o,s,e),yi(o,n),C.useEffect(()=>{const v=_e(ue(o.current?o.current[0]:void 0));let m=null;if(Se(v,o.current)){for(let g of ge.traverse())g.scopeRef&&Se(v,g.scopeRef.current)&&(m=g);m===ge.getTreeNode(o)&&(ce=m.scopeRef)}},[o]),ve(()=>()=>{var v,m,g;let b=(g=(m=ge.getTreeNode(o))===null||m===void 0||(v=m.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&g!==void 0?g:null;(o===ce||Ct(o,ce))&&(!b||ge.getTreeNode(b))&&(ce=b),ge.removeTreeNode(o)},[o]);let f=C.useMemo(()=>vi(o),[]),h=C.useMemo(()=>({focusManager:f,parentNode:d}),[d,f]);return ie.createElement(Ir.Provider,{value:h},ie.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),r,ie.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:i}))}function vi(t){return{focusNext(r={}){let e=t.current,{from:s,tabbable:n,wrap:a,accept:i}=r;var o;let l=s||_e(ue((o=e[0])!==null&&o!==void 0?o:void 0)),d=e[0].previousElementSibling,f=We(e),h=Be(f,{tabbable:n,accept:i},e);h.currentNode=Se(l,e)?l:d;let v=h.nextNode();return!v&&a&&(h.currentNode=d,v=h.nextNode()),v&&Re(v,!0),v},focusPrevious(r={}){let e=t.current,{from:s,tabbable:n,wrap:a,accept:i}=r;var o;let l=s||_e(ue((o=e[0])!==null&&o!==void 0?o:void 0)),d=e[e.length-1].nextElementSibling,f=We(e),h=Be(f,{tabbable:n,accept:i},e);h.currentNode=Se(l,e)?l:d;let v=h.previousNode();return!v&&a&&(h.currentNode=d,v=h.previousNode()),v&&Re(v,!0),v},focusFirst(r={}){let e=t.current,{tabbable:s,accept:n}=r,a=We(e),i=Be(a,{tabbable:s,accept:n},e);i.currentNode=e[0].previousElementSibling;let o=i.nextNode();return o&&Re(o,!0),o},focusLast(r={}){let e=t.current,{tabbable:s,accept:n}=r,a=We(e),i=Be(a,{tabbable:s,accept:n},e);i.currentNode=e[e.length-1].nextElementSibling;let o=i.previousNode();return o&&Re(o,!0),o}}}function We(t){return t[0].parentElement}function lt(t){let r=ge.getTreeNode(ce);for(;r&&r.scopeRef!==t;){if(r.contain)return!1;r=r.parent}return!0}function xi(t,r){let e=C.useRef(void 0),s=C.useRef(void 0);ve(()=>{let n=t.current;if(!r){s.current&&(cancelAnimationFrame(s.current),s.current=void 0);return}const a=ue(n?n[0]:void 0);let i=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!lt(t)||d.isComposing)return;let f=_e(a),h=t.current;if(!h||!Se(f,h))return;let v=We(h),m=Be(v,{tabbable:!0},h);if(!f)return;m.currentNode=f;let g=d.shiftKey?m.previousNode():m.nextNode();g||(m.currentNode=d.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,g=d.shiftKey?m.previousNode():m.nextNode()),d.preventDefault(),g&&Re(g,!0)},o=d=>{(!ce||Ct(ce,t))&&Se(pe(d),t.current)?(ce=t,e.current=pe(d)):lt(t)&&!Fe(pe(d),t)?e.current?e.current.focus():ce&&ce.current&&Xt(ce.current):lt(t)&&(e.current=pe(d))},l=d=>{s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{let f=fn(),h=(f==="virtual"||f===null)&&ur()&&Jr(),v=_e(a);if(!h&&v&&lt(t)&&!Fe(v,t)){ce=t;let g=pe(d);if(g&&g.isConnected){var m;e.current=g,(m=e.current)===null||m===void 0||m.focus()}else ce.current&&Xt(ce.current)}})};return a.addEventListener("keydown",i,!1),a.addEventListener("focusin",o,!1),n==null||n.forEach(d=>d.addEventListener("focusin",o,!1)),n==null||n.forEach(d=>d.addEventListener("focusout",l,!1)),()=>{a.removeEventListener("keydown",i,!1),a.removeEventListener("focusin",o,!1),n==null||n.forEach(d=>d.removeEventListener("focusin",o,!1)),n==null||n.forEach(d=>d.removeEventListener("focusout",l,!1))}},[t,r]),ve(()=>()=>{s.current&&cancelAnimationFrame(s.current)},[s])}function mn(t){return Fe(t)}function Se(t,r){return!t||!r?!1:r.some(e=>e.contains(t))}function Fe(t,r=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of ge.traverse(ge.getTreeNode(r)))if(e&&Se(t,e.current))return!0;return!1}function wi(t){return Fe(t,ce)}function Ct(t,r){var e;let s=(e=ge.getTreeNode(r))===null||e===void 0?void 0:e.parent;for(;s;){if(s.scopeRef===t)return!0;s=s.parent}return!1}function Re(t,r=!1){if(t!=null&&!r)try{Et(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function pn(t,r=!0){let e=t[0].previousElementSibling,s=We(t),n=Be(s,{tabbable:r},t);n.currentNode=e;let a=n.nextNode();return r&&!a&&(s=We(t),n=Be(s,{tabbable:!1},t),n.currentNode=e,a=n.nextNode()),a}function Xt(t,r=!0){Re(pn(t,r))}function yi(t,r){const e=ie.useRef(r);C.useEffect(()=>{if(e.current){ce=t;const s=ue(t.current?t.current[0]:void 0);!Se(_e(s),ce.current)&&t.current&&Xt(t.current)}e.current=!1},[t])}function ki(t,r,e){ve(()=>{if(r||e)return;let s=t.current;const n=ue(s?s[0]:void 0);let a=i=>{let o=pe(i);Se(o,t.current)?ce=t:mn(o)||(ce=null)};return n.addEventListener("focusin",a,!1),s==null||s.forEach(i=>i.addEventListener("focusin",a,!1)),()=>{n.removeEventListener("focusin",a,!1),s==null||s.forEach(i=>i.removeEventListener("focusin",a,!1))}},[t,r,e])}function Pr(t){let r=ge.getTreeNode(ce);for(;r&&r.scopeRef!==t;){if(r.nodeToRestore)return!1;r=r.parent}return(r==null?void 0:r.scopeRef)===t}function $i(t,r,e){const s=C.useRef(typeof document<"u"?_e(ue(t.current?t.current[0]:void 0)):null);ve(()=>{let n=t.current;const a=ue(n?n[0]:void 0);if(!r||e)return;let i=()=>{(!ce||Ct(ce,t))&&Se(_e(a),t.current)&&(ce=t)};return a.addEventListener("focusin",i,!1),n==null||n.forEach(o=>o.addEventListener("focusin",i,!1)),()=>{a.removeEventListener("focusin",i,!1),n==null||n.forEach(o=>o.removeEventListener("focusin",i,!1))}},[t,e]),ve(()=>{const n=ue(t.current?t.current[0]:void 0);if(!r)return;let a=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey||!lt(t)||i.isComposing)return;let o=n.activeElement;if(!Fe(o,t)||!Pr(t))return;let l=ge.getTreeNode(t);if(!l)return;let d=l.nodeToRestore,f=Be(n.body,{tabbable:!0});f.currentNode=o;let h=i.shiftKey?f.previousNode():f.nextNode();if((!d||!d.isConnected||d===n.body)&&(d=void 0,l.nodeToRestore=void 0),(!h||!Fe(h,t))&&d){f.currentNode=d;do h=i.shiftKey?f.previousNode():f.nextNode();while(Fe(h,t));i.preventDefault(),i.stopPropagation(),h?Re(h,!0):mn(d)?Re(d,!0):o.blur()}};return e||n.addEventListener("keydown",a,!0),()=>{e||n.removeEventListener("keydown",a,!0)}},[t,r,e]),ve(()=>{const n=ue(t.current?t.current[0]:void 0);if(!r)return;let a=ge.getTreeNode(t);if(a){var i;return a.nodeToRestore=(i=s.current)!==null&&i!==void 0?i:void 0,()=>{let o=ge.getTreeNode(t);if(!o)return;let l=o.nodeToRestore,d=_e(n);if(r&&l&&(d&&Fe(d,t)||d===n.body&&Pr(t))){let f=ge.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let h=f.getTreeNode(t);for(;h;){if(h.nodeToRestore&&h.nodeToRestore.isConnected){Dr(h.nodeToRestore);return}h=h.parent}for(h=f.getTreeNode(t);h;){if(h.scopeRef&&h.scopeRef.current&&ge.getTreeNode(h.scopeRef)){let v=pn(h.scopeRef.current,!0);Dr(v);return}h=h.parent}}})}}}},[t,r])}function Dr(t){t.dispatchEvent(new CustomEvent(Yt,{bubbles:!0,cancelable:!0}))&&Re(t)}function Be(t,r,e){let s=r!=null&&r.tabbable?Va:en,n=(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null,a=ue(n),i=_a(a,t||a,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var l;return!(r==null||(l=r.from)===null||l===void 0)&&l.contains(o)?NodeFilter.FILTER_REJECT:s(o)&&hn(o)&&(!e||Se(o,e))&&(!(r!=null&&r.accept)||r.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return r!=null&&r.from&&(i.currentNode=r.from),i}class gr{get size(){return this.fastMap.size}getTreeNode(r){return this.fastMap.get(r)}addTreeNode(r,e,s){let n=this.fastMap.get(e??null);if(!n)return;let a=new Qt({scopeRef:r});n.addChild(a),a.parent=n,this.fastMap.set(r,a),s&&(a.nodeToRestore=s)}addNode(r){this.fastMap.set(r.scopeRef,r)}removeTreeNode(r){if(r===null)return;let e=this.fastMap.get(r);if(!e)return;let s=e.parent;for(let a of this.traverse())a!==e&&e.nodeToRestore&&a.nodeToRestore&&e.scopeRef&&e.scopeRef.current&&Se(a.nodeToRestore,e.scopeRef.current)&&(a.nodeToRestore=e.nodeToRestore);let n=e.children;s&&(s.removeChild(e),n.size>0&&n.forEach(a=>s&&s.addChild(a))),this.fastMap.delete(e.scopeRef)}*traverse(r=this.root){if(r.scopeRef!=null&&(yield r),r.children.size>0)for(let e of r.children)yield*this.traverse(e)}clone(){var r;let e=new gr;var s;for(let n of this.traverse())e.addTreeNode(n.scopeRef,(s=(r=n.parent)===null||r===void 0?void 0:r.scopeRef)!==null&&s!==void 0?s:null,n.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new Qt({scopeRef:null}),this.fastMap.set(null,this.root)}}class Qt{addChild(r){this.children.add(r),r.parent=this}removeChild(r){this.children.delete(r),r.parent=void 0}constructor(r){this.children=new Set,this.contain=!1,this.scopeRef=r.scopeRef}}let ge=new gr;const gn={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},bn={...gn,customError:!0,valid:!1},st={isInvalid:!1,validationDetails:gn,validationErrors:[]},_i=C.createContext({}),er="__formValidationState"+Date.now();function vn(t){if(t[er]){let{realtimeValidation:r,displayValidation:e,updateValidation:s,resetValidation:n,commitValidation:a}=t[er];return{realtimeValidation:r,displayValidation:e,updateValidation:s,resetValidation:n,commitValidation:a}}return ji(t)}function ji(t){let{isInvalid:r,validationState:e,name:s,value:n,builtinValidation:a,validate:i,validationBehavior:o="aria"}=t;e&&(r||(r=e==="invalid"));let l=r!==void 0?{isInvalid:r,validationErrors:[],validationDetails:bn}:null,d=C.useMemo(()=>{if(!i||n==null)return null;let O=Ei(i,n);return zr(O)},[i,n]);a!=null&&a.validationDetails.valid&&(a=void 0);let f=C.useContext(_i),h=C.useMemo(()=>s?Array.isArray(s)?s.flatMap(O=>tr(f[O])):tr(f[s]):[],[f,s]),[v,m]=C.useState(f),[g,b]=C.useState(!1);f!==v&&(m(f),b(!1));let y=C.useMemo(()=>zr(g?[]:h),[g,h]),x=C.useRef(st),[w,_]=C.useState(st),E=C.useRef(st),S=()=>{if(!F)return;R(!1);let O=d||a||x.current;Bt(O,E.current)||(E.current=O,_(O))},[F,R]=C.useState(!1);return C.useEffect(S),{realtimeValidation:l||y||d||a||st,displayValidation:o==="native"?l||y||w:l||y||d||a||w,updateValidation(O){o==="aria"&&!Bt(w,O)?_(O):x.current=O},resetValidation(){let O=st;Bt(O,E.current)||(E.current=O,_(O)),o==="native"&&R(!1),b(!0)},commitValidation(){o==="native"&&R(!0),b(!0)}}}function tr(t){return t?Array.isArray(t)?t:[t]:[]}function Ei(t,r){if(typeof t=="function"){let e=t(r);if(e&&typeof e!="boolean")return tr(e)}return[]}function zr(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:bn}:null}function Bt(t,r){return t===r?!0:!!t&&!!r&&t.isInvalid===r.isInvalid&&t.validationErrors.length===r.validationErrors.length&&t.validationErrors.every((e,s)=>e===r.validationErrors[s])&&Object.entries(t.validationDetails).every(([e,s])=>r.validationDetails[e]===s)}function xn(t,r,e){let{validationBehavior:s,focus:n}=t;ve(()=>{if(s==="native"&&(e!=null&&e.current)&&!e.current.disabled){let l=r.realtimeValidation.isInvalid?r.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";e.current.setCustomValidity(l),e.current.hasAttribute("title")||(e.current.title=""),r.realtimeValidation.isInvalid||r.updateValidation(Si(e.current))}});let a=ye(()=>{r.resetValidation()}),i=ye(l=>{var d;r.displayValidation.isInvalid||r.commitValidation();let f=e==null||(d=e.current)===null||d===void 0?void 0:d.form;if(!l.defaultPrevented&&e&&f&&Ni(f)===e.current){var h;n?n():(h=e.current)===null||h===void 0||h.focus(),ii("keyboard")}l.preventDefault()}),o=ye(()=>{r.commitValidation()});C.useEffect(()=>{let l=e==null?void 0:e.current;if(!l)return;let d=l.form;return l.addEventListener("invalid",i),l.addEventListener("change",o),d==null||d.addEventListener("reset",a),()=>{l.removeEventListener("invalid",i),l.removeEventListener("change",o),d==null||d.removeEventListener("reset",a)}},[e,i,o,a,s])}function Ci(t){let r=t.validity;return{badInput:r.badInput,customError:r.customError,patternMismatch:r.patternMismatch,rangeOverflow:r.rangeOverflow,rangeUnderflow:r.rangeUnderflow,stepMismatch:r.stepMismatch,tooLong:r.tooLong,tooShort:r.tooShort,typeMismatch:r.typeMismatch,valueMissing:r.valueMissing,valid:r.valid}}function Si(t){return{isInvalid:!t.validity.valid,validationDetails:Ci(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function Ni(t){for(let r=0;r<t.elements.length;r++){let e=t.elements[r];if(!e.validity.valid)return e}return null}function Ti(t,r,e){let{isDisabled:s=!1,isReadOnly:n=!1,value:a,name:i,children:o,"aria-label":l,"aria-labelledby":d,validationState:f="valid",isInvalid:h}=t,v=E=>{E.stopPropagation(),r.setSelected(E.target.checked)},{pressProps:m,isPressed:g}=_t({isDisabled:s}),{pressProps:b,isPressed:y}=_t({onPress(){var E;r.toggle(),(E=e.current)===null||E===void 0||E.focus()},isDisabled:s||n}),{focusableProps:x}=pr(t,e),w=Ce(m,x),_=It(t,{labelable:!0});return Qr(e,r.isSelected,r.setSelected),{labelProps:Ce(b,{onClick:E=>E.preventDefault()}),inputProps:Ce(_,{"aria-invalid":h||f==="invalid"||void 0,"aria-errormessage":t["aria-errormessage"],"aria-controls":t["aria-controls"],"aria-readonly":n||void 0,onChange:v,disabled:s,...a==null?{}:{value:a},name:i,type:"checkbox",...w}),isSelected:r.isSelected,isPressed:g||y,isDisabled:s,isReadOnly:n,isInvalid:h||f==="invalid"}}function Li(t,r,e){let s=vn({...t,value:r.isSelected}),{isInvalid:n,validationErrors:a,validationDetails:i}=s.displayValidation,{labelProps:o,inputProps:l,isSelected:d,isPressed:f,isDisabled:h,isReadOnly:v}=Ti({...t,isInvalid:n},r,e);xn(t,s,e);let{isIndeterminate:m,isRequired:g,validationBehavior:b="aria"}=t;C.useEffect(()=>{e.current&&(e.current.indeterminate=!!m)});let{pressProps:y}=_t({isDisabled:h||v,onPress(){let{[er]:x}=t,{commitValidation:w}=x||s;w()}});return{labelProps:Ce(o,y),inputProps:{...l,checked:d,"aria-required":g&&b==="aria"||void 0,required:g&&b==="native"},isSelected:d,isPressed:f,isDisabled:h,isReadOnly:v,isInvalid:n,validationErrors:a,validationDetails:i}}function Ai(t){let{id:r,label:e,"aria-labelledby":s,"aria-label":n,labelElementType:a="label"}=t;r=kt(r);let i=kt(),o={};e&&(s=s?`${i} ${s}`:i,o={id:i,htmlFor:a==="label"?r:void 0});let l=Fa({id:r,"aria-label":n,"aria-labelledby":s});return{labelProps:o,fieldProps:l}}function Ii(t){let{description:r,errorMessage:e,isInvalid:s,validationState:n}=t,{labelProps:a,fieldProps:i}=Ai(t),o=Ht([!!r,!!e,s,n]),l=Ht([!!r,!!e,s,n]);return i=Ce(i,{"aria-describedby":[o,l,t["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:a,fieldProps:i,descriptionProps:{id:o},errorMessageProps:{id:l}}}function Pi(t={}){let{isReadOnly:r}=t,[e,s]=tn(t.isSelected,t.defaultSelected||!1,t.onChange);function n(i){r||s(i)}function a(){r||s(!e)}return{isSelected:e,setSelected:n,toggle:a}}function Di(t,r){let{inputElementType:e="input",isDisabled:s=!1,isRequired:n=!1,isReadOnly:a=!1,type:i="text",validationBehavior:o="aria"}=t,[l,d]=tn(t.value,t.defaultValue||"",t.onChange),{focusableProps:f}=pr(t,r),h=vn({...t,value:l}),{isInvalid:v,validationErrors:m,validationDetails:g}=h.displayValidation,{labelProps:b,fieldProps:y,descriptionProps:x,errorMessageProps:w}=Ii({...t,isInvalid:v,errorMessage:t.errorMessage||m}),_=It(t,{labelable:!0});const E={type:i,pattern:t.pattern};return Qr(r,l,d),xn(t,h,r),C.useEffect(()=>{if(r.current instanceof $e(r.current).HTMLTextAreaElement){let S=r.current;Object.defineProperty(S,"defaultValue",{get:()=>S.value,set:()=>{},configurable:!0})}},[r]),{labelProps:b,inputProps:Ce(_,e==="input"?E:void 0,{disabled:s,readOnly:a,required:n&&o==="native","aria-required":n&&o==="aria"||void 0,"aria-invalid":v||void 0,"aria-errormessage":t["aria-errormessage"],"aria-activedescendant":t["aria-activedescendant"],"aria-autocomplete":t["aria-autocomplete"],"aria-haspopup":t["aria-haspopup"],"aria-controls":t["aria-controls"],value:l,onChange:S=>d(S.target.value),autoComplete:t.autoComplete,autoCapitalize:t.autoCapitalize,maxLength:t.maxLength,minLength:t.minLength,name:t.name,placeholder:t.placeholder,inputMode:t.inputMode,autoCorrect:t.autoCorrect,spellCheck:t.spellCheck,[parseInt(ie.version,10)>=17?"enterKeyHint":"enterkeyhint"]:t.enterKeyHint,onCopy:t.onCopy,onCut:t.onCut,onPaste:t.onPaste,onCompositionEnd:t.onCompositionEnd,onCompositionStart:t.onCompositionStart,onCompositionUpdate:t.onCompositionUpdate,onSelect:t.onSelect,onBeforeInput:t.onBeforeInput,onInput:t.onInput,...f,...y}),descriptionProps:x,errorMessageProps:w,isInvalid:v,validationErrors:m,validationDetails:g}}const Ie=[];function zi(t,r){let{onClose:e,shouldCloseOnBlur:s,isOpen:n,isDismissable:a=!1,isKeyboardDismissDisabled:i=!1,shouldCloseOnInteractOutside:o}=t;C.useEffect(()=>{if(n&&!Ie.includes(r))return Ie.push(r),()=>{let g=Ie.indexOf(r);g>=0&&Ie.splice(g,1)}},[n,r]);let l=()=>{Ie[Ie.length-1]===r&&e&&e()},d=g=>{(!o||o(g.target))&&Ie[Ie.length-1]===r&&(g.stopPropagation(),g.preventDefault())},f=g=>{(!o||o(g.target))&&(Ie[Ie.length-1]===r&&(g.stopPropagation(),g.preventDefault()),l())},h=g=>{g.key==="Escape"&&!i&&!g.nativeEvent.isComposing&&(g.stopPropagation(),g.preventDefault(),l())};hi({ref:r,onInteractOutside:a&&n?f:void 0,onInteractOutsideStart:d});let{focusWithinProps:v}=fi({isDisabled:!s,onBlurWithin:g=>{!g.relatedTarget||wi(g.relatedTarget)||(!o||o(g.relatedTarget))&&(e==null||e())}}),m=g=>{g.target===g.currentTarget&&g.preventDefault()};return{overlayProps:{onKeyDown:h,...v},underlayProps:{onPointerDown:m}}}const St=ie.createContext(null);function Ri(t){let{children:r}=t,e=C.useContext(St),[s,n]=C.useState(0),a=C.useMemo(()=>({parent:e,modalCount:s,addModal(){n(i=>i+1),e&&e.addModal()},removeModal(){n(i=>i-1),e&&e.removeModal()}}),[e,s]);return ie.createElement(St.Provider,{value:a},r)}function Oi(){let t=C.useContext(St);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function Mi(t){let{modalProviderProps:r}=Oi();return ie.createElement("div",{"data-overlay-container":!0,...t,...r})}function Fi(t){return ie.createElement(Ri,null,ie.createElement(Mi,t))}function Bi(t){let r=C.useContext(St);if(!r)throw new Error("Modal is not contained within a provider");return C.useEffect(()=>{if(!(!r||!r.parent))return r.parent.addModal(),()=>{r&&r.parent&&r.parent.removeModal()}},[r,r.parent,void 0]),{modalProps:{"data-ismodal":!0}}}const Wi=ie.createContext(null);function Ui(){let t=C.useContext(Wi),r=t==null?void 0:t.setContain;ve(()=>{r==null||r(!0)},[r])}function Vi(t,r){let{role:e="dialog"}=t,s=Ht();s=t["aria-label"]?void 0:s;let n=C.useRef(!1);return C.useEffect(()=>{if(r.current&&!r.current.contains(document.activeElement)){Et(r.current);let a=setTimeout(()=>{document.activeElement===r.current&&(n.current=!0,r.current&&(r.current.blur(),Et(r.current)),n.current=!1)},500);return()=>{clearTimeout(a)}}},[r]),Ui(),{dialogProps:{...It(t,{labelable:!0}),role:e,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||s,onBlur:a=>{n.current&&a.stopPropagation()}},titleProps:{id:s}}}const ke=C.forwardRef(({onPress:t,onPressChange:r,onPressStart:e,onPressEnd:s,onPressUp:n,isDisabled:a=!1,children:i,variant:o="contained",color:l="primary",size:d="medium",className:f="",startIcon:h,endIcon:v,fullWidth:m=!1,loading:g=!1,loadingText:b,disableElevation:y=!1,disableRipple:x=!1,rounded:w=!1,type:_="button",form:E,name:S,value:F,href:R,target:Z,rel:L,...O},N)=>{const k=C.useRef(null),A=R?"a":"button",u=a||g,D={...O,elementType:A,isDisabled:u,onPress:t,onPressChange:r,onPressStart:e,onPressEnd:s,onPressUp:n,href:R,target:Z,rel:L},{buttonProps:H,isPressed:W}=mi(D,k),ee="inline-flex items-center justify-center font-medium transition-all duration-150 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-slate-900",B={small:"px-3 py-1.5 text-xs",medium:"px-4 py-2 text-sm",large:"px-6 py-2.5 text-base"}[d];let U="";o==="contained"?(l==="primary"?U=u?"bg-indigo-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white shadow-md hover:shadow-lg":l==="secondary"?U=u?"bg-amber-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white shadow-md hover:shadow-lg":l==="success"?U=u?"bg-emerald-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 active:bg-emerald-800 text-white shadow-md hover:shadow-lg":l==="warning"?U=u?"bg-amber-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white shadow-md hover:shadow-lg":l==="error"?U=u?"bg-red-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white shadow-md hover:shadow-lg":l==="info"?U=u?"bg-sky-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-sky-600 hover:bg-sky-700 active:bg-sky-800 text-white shadow-md hover:shadow-lg":U=u?"bg-slate-600/40 text-white/60 shadow-none cursor-not-allowed":"bg-slate-700 hover:bg-slate-800 text-white shadow-md hover:shadow-lg",W&&!u&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-800":l==="secondary"?U+=" bg-amber-700":l==="success"?U+=" bg-emerald-800":l==="warning"?U+=" bg-amber-700":l==="error"?U+=" bg-red-800":l==="info"?U+=" bg-sky-800":U+=" bg-slate-900")):o==="outlined"?(l==="primary"?U=u?"border border-indigo-500/30 text-indigo-500/40 cursor-not-allowed":"border border-indigo-500/70 hover:border-indigo-500 text-indigo-500 hover:bg-indigo-500/10 active:bg-indigo-500/20":l==="secondary"?U=u?"border border-amber-500/30 text-amber-500/40 cursor-not-allowed":"border border-amber-500/70 hover:border-amber-500 text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="success"?U=u?"border border-emerald-500/30 text-emerald-500/40 cursor-not-allowed":"border border-emerald-500/70 hover:border-emerald-500 text-emerald-500 hover:bg-emerald-500/10 active:bg-emerald-500/20":l==="warning"?U=u?"border border-amber-500/30 text-amber-500/40 cursor-not-allowed":"border border-amber-500/70 hover:border-amber-500 text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="error"?U=u?"border border-red-500/30 text-red-500/40 cursor-not-allowed":"border border-red-500/70 hover:border-red-500 text-red-500 hover:bg-red-500/10 active:bg-red-500/20":l==="info"?U=u?"border border-sky-500/30 text-sky-500/40 cursor-not-allowed":"border border-sky-500/70 hover:border-sky-500 text-sky-500 hover:bg-sky-500/10 active:bg-sky-500/20":U=u?"border border-slate-400/30 text-slate-400/50 cursor-not-allowed":"border border-slate-400/70 hover:border-slate-300 text-slate-300 hover:bg-slate-300/10",W&&!u&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/20":l==="secondary"?U+=" bg-amber-500/20":l==="success"?U+=" bg-emerald-500/20":l==="warning"?U+=" bg-amber-500/20":l==="error"?U+=" bg-red-500/20":l==="info"?U+=" bg-sky-500/20":U+=" bg-slate-300/20")):o==="text"?(l==="primary"?U=u?"text-indigo-500/40 cursor-not-allowed":"text-indigo-500 hover:bg-indigo-500/10 active:bg-indigo-500/20":l==="secondary"?U=u?"text-amber-500/40 cursor-not-allowed":"text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="success"?U=u?"text-emerald-500/40 cursor-not-allowed":"text-emerald-500 hover:bg-emerald-500/10 active:bg-emerald-500/20":l==="warning"?U=u?"text-amber-500/40 cursor-not-allowed":"text-amber-500 hover:bg-amber-500/10 active:bg-amber-500/20":l==="error"?U=u?"text-red-500/40 cursor-not-allowed":"text-red-500 hover:bg-red-500/10 active:bg-red-500/20":l==="info"?U=u?"text-sky-500/40 cursor-not-allowed":"text-sky-500 hover:bg-sky-500/10 active:bg-sky-500/20":U=u?"text-slate-400/50 cursor-not-allowed":"text-slate-300 hover:bg-slate-300/10",W&&!u&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/20":l==="secondary"?U+=" bg-amber-500/20":l==="success"?U+=" bg-emerald-500/20":l==="warning"?U+=" bg-amber-500/20":l==="error"?U+=" bg-red-500/20":l==="info"?U+=" bg-sky-500/20":U+=" bg-slate-300/20")):o==="glass"?(l==="primary"?U=u?"bg-indigo-500/10 text-indigo-500/40 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-indigo-500/10 hover:bg-indigo-500/20 active:bg-indigo-500/30 text-indigo-400 border border-white/10 hover:border-white/20 backdrop-blur-md":l==="secondary"?U=u?"bg-amber-500/10 text-amber-500/40 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-amber-500/10 hover:bg-amber-500/20 active:bg-amber-500/30 text-amber-400 border border-white/10 hover:border-white/20 backdrop-blur-md":U=u?"bg-white/5 text-white/30 border border-white/5 backdrop-blur-md cursor-not-allowed":"bg-white/5 hover:bg-white/10 active:bg-white/15 text-white/80 border border-white/10 hover:border-white/20 backdrop-blur-md",W&&!u&&(U=U.replace(/active:bg-[^\\s]+/,""),l==="primary"?U+=" bg-indigo-500/30":l==="secondary"?U+=" bg-amber-500/30":U+=" bg-white/15")):o==="gradient"&&(l==="primary"?U=u?"bg-gradient-to-r from-indigo-500/40 to-purple-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-md hover:shadow-lg":l==="secondary"?U=u?"bg-gradient-to-r from-amber-500/40 to-orange-500/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white shadow-md hover:shadow-lg":U=u?"bg-gradient-to-r from-slate-700/40 to-slate-800/40 text-white/60 shadow-none cursor-not-allowed":"bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 text-white shadow-md hover:shadow-lg",W&&!u&&(l==="primary"?U+=" from-indigo-700 to-purple-700":l==="secondary"?U+=" from-amber-600 to-orange-600":U+=" from-slate-800 to-slate-900"));const X=`
    ${ee}
    ${B}
    ${U}
    ${w?"rounded-full":"rounded-[var(--radius-md)]"}
    ${y?"shadow-none hover:shadow-none":""}
    ${m?"w-full":""}
    ${f}
  `.trim(),Y=g?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b||i]}):c.jsxs(c.Fragment,{children:[h&&c.jsx("span",{className:"mr-2 -ml-1",children:h}),i,v&&c.jsx("span",{className:"ml-2 -mr-1",children:v})]});return ie.useImperativeHandle(N,()=>k.current),A==="a"?c.jsx("a",{...H,ref:k,className:X,children:Y}):c.jsx("button",{...H,ref:k,className:X,type:_,form:E,name:S,value:F,children:Y})});ke.displayName="Button";const wt=C.forwardRef(({children:t,className:r="",elevation:e=1,variant:s="elevation",hover:n=!1,sx:a={},...i},o)=>{const l={};a.width&&(l.width=a.width),a.minWidth&&(l.minWidth=a.minWidth),a.maxWidth&&(l.maxWidth=a.maxWidth),a.height&&(l.height=a.height),a.minHeight&&(l.minHeight=a.minHeight),a.maxHeight&&(l.maxHeight=a.maxHeight),a.mt&&(l.marginTop=`${a.mt*.25}rem`),a.mb&&(l.marginBottom=`${a.mb*.25}rem`),a.ml&&(l.marginLeft=`${a.ml*.25}rem`),a.mr&&(l.marginRight=`${a.mr*.25}rem`),a.mx&&(l.marginLeft=l.marginRight=`${a.mx*.25}rem`),a.my&&(l.marginTop=l.marginBottom=`${a.my*.25}rem`),a.m&&(l.margin=`${a.m*.25}rem`);const d=s==="elevation"?{0:"",1:"shadow-sm ring-1 ring-white/5 dark:ring-slate-800/50",2:"shadow ring-1 ring-white/10 dark:ring-slate-800/50",3:"shadow-md",4:"shadow-lg",5:"shadow-xl"}[e]:"";let f="";s==="outlined"?f="border border-white/10 dark:border-slate-700/50 bg-white/5 dark:bg-slate-900/30 backdrop-blur-sm":s==="filled"?f="bg-white/10 dark:bg-slate-800/70":s==="glass"?f="glass-effect":s==="frost"?f="frost-glass":f="bg-white/5 dark:bg-slate-900/70 backdrop-blur-sm";const h=n?"hover-lift":"";return c.jsx("div",{ref:o,className:`
        rounded-[var(--radius-lg)]
        overflow-hidden
        transition-all
        duration-200
        ${d}
        ${f}
        ${h}
        ${r}
      `,style:l,...i,children:t})});wt.displayName="Card";const rr=C.forwardRef(({title:t,subheader:r,avatar:e,action:s,divider:n=!0,className:a="",sx:i={},...o},l)=>{const d={},f=n?"border-b border-white/5 dark:border-slate-700/30":"";return c.jsxs("div",{ref:l,className:`
        flex items-center px-5 py-4 ${f}
        ${a}
      `,style:d,...o,children:[e&&c.jsx("div",{className:"mr-4 flex-shrink-0",children:e}),c.jsxs("div",{className:"flex-grow min-w-0",children:[t&&c.jsx("div",{className:"text-lg font-medium text-slate-50 dark:text-white truncate",children:t}),r&&c.jsx("div",{className:"text-sm text-slate-300 dark:text-slate-400 mt-0.5 truncate",children:r})]}),s&&c.jsx("div",{className:"ml-auto flex-shrink-0",children:s})]})});rr.displayName="CardHeader";const yt=C.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const a={};return c.jsx("div",{ref:n,className:`px-5 py-4 last:pb-6 text-slate-300 ${r}`,style:a,...s,children:t})});yt.displayName="CardContent";const Hi=C.forwardRef(({component:t="div",image:r,src:e,alt:s="",height:n,overlay:a,className:i="",sx:o={},...l},d)=>{const f={};n&&(f.height=typeof n=="number"?`${n}px`:n);const h=r||e;return t==="img"?c.jsxs("div",{className:"relative",children:[c.jsx("img",{ref:d,src:h,alt:s,className:`w-full object-cover ${i}`,style:f,...l}),a&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end",children:c.jsx("div",{className:"p-4 text-white w-full",children:a})})]}):c.jsx("div",{ref:d,className:`bg-cover bg-center relative ${i}`,style:{...f,backgroundImage:h?`url(${h})`:void 0},...l,children:a&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex items-end",children:c.jsx("div",{className:"p-4 text-white w-full",children:a})})})});Hi.displayName="CardMedia";const Zi=C.forwardRef(({children:t,className:r="",disableSpacing:e=!1,divider:s=!0,sx:n={},...a},i)=>{const o={},l=e?"":"space-x-2",d=s?"border-t border-white/5 dark:border-slate-700/30":"";return c.jsx("div",{ref:i,className:`
        flex items-center px-4 py-3 ${l} ${d}
        ${r}
      `,style:o,...a,children:t})});Zi.displayName="CardActions";const Ki=C.forwardRef(({color:t="primary",size:r="medium",className:e="",sx:s={},...n},a)=>{const i=Pi(n),o=C.useRef(null),{inputProps:l}=Li(n,i,o),d=r==="small"?"h-4 w-4":r==="large"?"h-6 w-6":"h-5 w-5";let f="";switch(t){case"primary":f="focus:ring-primary-500 text-primary-500";break;case"secondary":f="focus:ring-secondary-500 text-secondary-500";break;case"error":f="focus:ring-red-500 text-red-500";break;case"warning":f="focus:ring-yellow-500 text-yellow-500";break;case"info":f="focus:ring-blue-500 text-blue-500";break;case"success":f="focus:ring-green-500 text-green-500";break;default:f="focus:ring-slate-500 text-slate-500"}const h={};return s.margin&&(h.margin=s.margin),s.marginLeft&&(h.marginLeft=s.marginLeft),s.marginRight&&(h.marginRight=s.marginRight),s.marginTop&&(h.marginTop=s.marginTop),s.marginBottom&&(h.marginBottom=s.marginBottom),ie.useImperativeHandle(a,()=>o.current),c.jsx("input",{type:"checkbox",ref:o,...l,className:`
        ${d}
        ${f}
        bg-white dark:bg-slate-800 
        border-gray-300 dark:border-gray-600 
        rounded 
        focus:ring-2 focus:ring-offset-2 
        dark:focus:ring-offset-slate-900
        transition-colors
        ${e}
      `,style:h})});Ki.displayName="Checkbox";const Ji=C.forwardRef(({label:t,color:r="default",size:e="medium",variant:s="filled",icon:n,onClick:a,onDelete:i,className:o="",disabled:l=!1},d)=>{let f="inline-flex items-center rounded-full font-medium transition-colors";const h=a&&!l?"cursor-pointer hover:opacity-90 active:opacity-80":"",v={small:"text-xs px-2 py-0.5 h-6",medium:"text-sm px-3 py-1 h-8"}[e];let m="";s==="filled"?m={default:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200",primary:"bg-primary-600 text-white",secondary:"bg-secondary-600 text-white",success:"bg-green-600 text-white",error:"bg-red-600 text-white",warning:"bg-amber-600 text-white",info:"bg-blue-600 text-white"}[r]:s==="outlined"?m={default:"border border-slate-300 text-slate-700 dark:border-slate-700 dark:text-slate-300",primary:"border border-primary-600/70 text-primary-600 dark:text-primary-500",secondary:"border border-secondary-600/70 text-secondary-600 dark:text-secondary-500",success:"border border-green-600/70 text-green-600 dark:text-green-500",error:"border border-red-600/70 text-red-600 dark:text-red-500",warning:"border border-amber-600/70 text-amber-600 dark:text-amber-500",info:"border border-blue-600/70 text-blue-600 dark:text-blue-500"}[r]:s==="soft"&&(m={default:"bg-slate-100 text-slate-800 dark:bg-slate-800/60 dark:text-slate-300",primary:"bg-primary-100/20 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400",secondary:"bg-secondary-100/20 text-secondary-700 dark:bg-secondary-900/30 dark:text-secondary-400",success:"bg-green-100/20 text-green-700 dark:bg-green-900/30 dark:text-green-400",error:"bg-red-100/20 text-red-700 dark:bg-red-900/30 dark:text-red-400",warning:"bg-amber-100/20 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",info:"bg-blue-100/20 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}[r]),l&&(f+=" opacity-50 cursor-default pointer-events-none");const g=`
    ml-1 
    -mr-1
    rounded-full 
    h-5 
    w-5 
    inline-flex 
    items-center 
    justify-center 
    hover:bg-black/10
    dark:hover:bg-white/10 
    transition-colors
    ${e==="small"?"text-xs":"text-sm"}
  `;return c.jsxs("div",{ref:d,className:`${f} ${v} ${m} ${h} ${o}`,onClick:!l&&a?a:void 0,children:[n&&c.jsx("span",{className:"mr-1 -ml-0.5",children:n}),c.jsx("span",{className:"truncate",children:t}),i&&c.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),!l&&i&&i(b)},className:g,disabled:l,"aria-label":"Remove",children:c.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})});Ji.displayName="Chip";const dt=({size:t=40,color:r="primary",thickness:e=3.6,className:s="",sx:n={}})=>{const a={width:`${t}px`,height:`${t}px`,...n},i={primary:"border-blue-500",secondary:"border-purple-500",default:"border-slate-200"};return c.jsx("div",{className:`
        inline-block 
        rounded-full 
        border-solid 
        animate-spin 
        ${i[r]}
        ${s}
      `,style:{borderWidth:`${e}px`,borderTopColor:"transparent",borderRightColor:"transparent",...a},role:"progressbar"})},wn=C.createContext(null),br=({open:t,onClose:r,children:e,maxWidth:s="sm",fullWidth:n=!1,className:a="",title:i})=>{const o=C.useRef(null);C.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),zi({isOpen:t,onClose:r,isDismissable:!0},o);const{modalProps:l}=Bi(),d={role:"dialog",...i&&{"aria-label":i}},{dialogProps:f,titleProps:h}=Vi(d,o);if(!t)return null;const v=()=>{switch(s){case"xs":return"max-w-xs";case"sm":return"max-w-md";case"md":return"max-w-2xl";case"lg":return"max-w-4xl";case"xl":return"max-w-7xl";case"full":return"max-w-[calc(100%-2rem)]";default:return"max-w-md"}},m=c.jsx(wn.Provider,{value:h,children:c.jsxs("div",{className:"dialog-overlay fixed inset-0 z-[10000] overflow-hidden",children:[c.jsx("div",{className:"fixed inset-0 w-screen h-screen bg-black/70 backdrop-blur-md transition-opacity duration-300 ease-out",onClick:r}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:c.jsx(bi,{contain:!0,restoreFocus:!0,autoFocus:!0,children:c.jsx("div",{...l,...f,ref:o,className:`
                relative max-h-[90vh] overflow-hidden rounded-2xl 
                bg-white dark:bg-slate-900 
                text-left shadow-2xl transition-all duration-300 ease-out
                ${v()} ${n?"w-full":""}
                border border-slate-200 dark:border-slate-700
                animate-dialog-appear
                z-[10001]
                ${a}
              `,onClick:g=>g.stopPropagation(),children:e})})})]})});return Nn.createPortal(m,document.body)},zt=({children:t,onClose:r,className:e=""})=>{const s=C.useContext(wn);return c.jsxs("div",{className:`
      px-6 py-4 border-b border-slate-200 dark:border-slate-700
      bg-slate-50 dark:bg-slate-800
      flex items-center justify-between
      ${e}
    `,children:[c.jsx("h3",{...s,className:"text-lg font-semibold text-slate-900 dark:text-white",children:t}),r&&c.jsx("button",{type:"button",className:`rounded-full p-1.5 text-slate-400 hover:text-slate-500 dark:text-slate-500 dark:hover:text-slate-400
                     hover:bg-slate-100 dark:hover:bg-slate-700/60 focus:outline-none transition-colors`,onClick:r,"aria-label":"Close",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})};zt.displayName="DialogTitle";const vr=({children:t,className:r="",dividers:e=!1})=>c.jsx("div",{className:`
      px-6 py-4 overflow-y-auto
      ${e?"border-y border-slate-200 dark:border-slate-700":""}
      ${r}
    `,style:{maxHeight:"calc(70vh)",overflowY:"auto"},children:t}),yn=({children:t,className:r=""})=>c.jsx("div",{className:`
      px-6 py-3 flex items-center justify-end space-x-2
      bg-slate-50 dark:bg-slate-800
      border-t border-slate-200 dark:border-slate-700
      ${r}
    `,children:t}),Gi=C.forwardRef(({children:t,className:r="",fullWidth:e=!1,required:s=!1,disabled:n=!1,error:a=!1,sx:i={},...o},l)=>{const d={};return i.mb&&(d.marginBottom=`${i.mb*.25}rem`),i.mt&&(d.marginTop=`${i.mt*.25}rem`),i.mx&&(d.marginLeft=d.marginRight=`${i.mx*.25}rem`),i.my&&(d.marginTop=d.marginBottom=`${i.my*.25}rem`),c.jsx("div",{ref:l,className:`
        relative
        ${e?"w-full":""}
        ${n?"opacity-70 pointer-events-none":""}
        ${a?"text-red-500":""}
        ${r}
      `,"data-required":s,"data-disabled":n,"data-error":a,style:d,...o,children:t})});Gi.displayName="FormControl";const qi=C.forwardRef(({children:t,className:r="",required:e=!1,disabled:s=!1,error:n=!1,shrink:a=!1,...i},o)=>c.jsxs("label",{ref:o,className:`
        block mb-2 text-sm font-medium
        ${n?"text-red-500":"text-slate-900 dark:text-white"}
        ${s?"opacity-70 pointer-events-none":""}
        ${r}
      `,...i,children:[t,e&&c.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}));qi.displayName="InputLabel";const Yi=({control:t,label:r,className:e="",disabled:s=!1,labelPlacement:n="end",sx:a={},...i})=>{ie.useEffect(()=>{console.log("FormControlLabel component rendered",{label:r})},[r]);const o=ie.cloneElement(t,{disabled:s||t.props.disabled,onChange:t.props.onChange});let l="row";n==="top"&&(l="column-reverse"),n==="bottom"&&(l="column"),n==="start"&&(l="row-reverse");let d="ml-2";n==="start"&&(d="mr-2"),n==="top"&&(d="mb-1"),n==="bottom"&&(d="mt-1");const f={display:"inline-flex",flexDirection:l};return a.mt&&(f.marginTop=`${a.mt*.25}rem`),a.mb&&(f.marginBottom=`${a.mb*.25}rem`),a.ml&&(f.marginLeft=`${a.ml*.25}rem`),a.mr&&(f.marginRight=`${a.mr*.25}rem`),a.m&&(f.margin=`${a.m*.25}rem`),c.jsxs("label",{className:`inline-flex ${l==="row"||l==="row-reverse"?"items-center":"items-start"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${e}`,style:f,...i,children:[o,c.jsx("span",{className:`text-sm ${d} ${s?"text-gray-500":""}`,children:r})]})};Yi.displayName="FormControlLabel";const Nt=C.forwardRef(({children:t,color:r="default",size:e="medium",disabled:s=!1,edge:n=!1,className:a="",sx:i={},...o},l)=>{const d={};i.m&&(d.margin=typeof i.m=="number"?`${i.m*8}px`:i.m),i.ml&&(d.marginLeft=typeof i.ml=="number"?`${i.ml*8}px`:i.ml),i.mr&&(d.marginRight=typeof i.mr=="number"?`${i.mr*8}px`:i.mr),i.mt&&(d.marginTop=typeof i.mt=="number"?`${i.mt*8}px`:i.mt),i.mb&&(d.marginBottom=typeof i.mb=="number"?`${i.mb*8}px`:i.mb);const f={small:"p-1",medium:"p-2",large:"p-3"};let h="";switch(r){case"primary":h="text-primary-400 hover:bg-primary-900/30";break;case"secondary":h="text-secondary-500 hover:bg-secondary-900/30";break;case"error":h="text-red-500 hover:bg-red-900/30";break;case"info":h="text-blue-500 hover:bg-blue-900/30";break;case"success":h="text-green-500 hover:bg-green-900/30";break;case"warning":h="text-yellow-500 hover:bg-yellow-900/30";break;default:h="text-slate-300 hover:bg-slate-700/50"}const v={start:"-ml-2",end:"-mr-2",false:""};return c.jsx("button",{ref:l,type:"button",disabled:s,className:`
        rounded-full
        ${f[e]}
        ${h}
        ${n?v[n]:""}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/50
        ${a}
      `,style:d,...o,children:t})});Nt.displayName="IconButton";const Xi=C.forwardRef(({children:t,className:r="",position:e,...s},n)=>c.jsx("div",{ref:n,className:`
        flex items-center justify-center
        text-slate-500 dark:text-slate-400
        ${e==="start"?"mr-2":"ml-2"}
        ${r}
      `,...s,children:t}));Xi.displayName="InputAdornment";const Qi=C.forwardRef(({open:t,autoHideDuration:r=6e3,onClose:e,message:s,action:n,anchorOrigin:a={vertical:"bottom",horizontal:"left"},className:i="",sx:o={},children:l,...d},f)=>{const[h,v]=C.useState(!1);if(C.useEffect(()=>{if(t){if(v(!0),r&&e){const b=setTimeout(()=>{e()},r);return()=>clearTimeout(b)}}else{const b=setTimeout(()=>{v(!1)},300);return()=>clearTimeout(b)}},[t,r,e]),!t&&!h)return null;const m={};o.mt&&(m.marginTop=`${o.mt*.25}rem`),o.mb&&(m.marginBottom=`${o.mb*.25}rem`),o.ml&&(m.marginLeft=`${o.ml*.25}rem`),o.mr&&(m.marginRight=`${o.mr*.25}rem`);const g={position:"fixed",zIndex:1400,...m};return a.vertical==="top"?g.top="16px":g.bottom="16px",a.horizontal==="left"?g.left="16px":a.horizontal==="center"?(g.left="50%",g.transform="translateX(-50%)"):g.right="16px",c.jsx("div",{ref:f,className:`snackbar ${i}`,style:g,...d,children:c.jsxs(lr,{sx:{display:"flex",alignItems:"center",padding:"6px 16px",color:"white",backgroundColor:"rgba(50, 50, 50, 0.9)",borderRadius:"4px",minWidth:"288px",maxWidth:"500px",boxShadow:"0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12)",opacity:t?1:0,transform:`translateY(${t?0:"20px"})`,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1), transform 225ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[c.jsx("div",{style:{flexGrow:1,padding:"8px 0"},children:s||l}),n||e&&c.jsx(Nt,{onClick:e,sx:{marginLeft:"8px",color:"white"},size:"small",children:c.jsx(ar,{})})]})})});Qi.displayName="Snackbar";const es=C.forwardRef(({children:t,direction:r="column",spacing:e=0,alignItems:s,justifyContent:n,className:a="",sx:i={},...o},l)=>{i.width&&i.width,i.minWidth&&i.minWidth,i.maxWidth&&i.maxWidth,i.height&&i.height,i.minHeight&&i.minHeight,i.maxHeight&&i.maxHeight,i.mt&&i.mt*.25,i.mb&&i.mb*.25,i.ml&&i.ml*.25,i.mr&&i.mr*.25,i.mx&&i.mx*.25,i.my&&i.my*.25,i.m&&i.m*.25,i.p&&i.p*.25,i.pt&&i.pt*.25,i.pb&&i.pb*.25,i.pl&&i.pl*.25,i.pr&&i.pr*.25,i.px&&i.px*.25,i.py&&i.py*.25;const d=`${e*.25}rem`,f={display:"flex",flexDirection:r,gap:d,...s&&{alignItems:s},...n&&{justifyContent:n},...i};return c.jsx(Pe,{ref:l,className:`stack ${a}`,sx:f,...o,children:t})});es.displayName="Stack";const kn=C.forwardRef(({label:t,helperText:r,error:e=!1,fullWidth:s=!1,variant:n="outlined",multiline:a=!1,rows:i=3,InputProps:o,className:l="",disabled:d=!1,isRequired:f=!1,onChange:h,value:v,size:m="medium",...g},b)=>{const[y,x]=C.useState(v||""),w=C.useRef(null),_=C.useRef(null);C.useEffect(()=>{v!==void 0&&((o==null?void 0:o.inputProps)&&Object.keys(o.inputProps).some(D=>D.startsWith("aria-")&&D.includes("combobox"))?v!==""&&x(v):x(v))},[v,o]);const E=u=>{const D=u.target.value;v===void 0&&x(D),h&&h(D,u)},S=()=>({...a?{}:Z,...{value:v!==void 0?v:y,onChange:E},...(o==null?void 0:o.inputProps)||{}}),F={description:r,errorMessage:r,validationState:e?"invalid":"valid",isDisabled:d,label:t,"aria-label":!t&&!g["aria-label"]&&!g["aria-labelledby"]?g.placeholder||"text field":g["aria-label"]},{labelProps:R,inputProps:Z,descriptionProps:L,errorMessageProps:O}=a?{labelProps:{},inputProps:{},descriptionProps:{},errorMessageProps:{}}:Di(F,w),k=`
    ${{small:{container:"mb-3",label:"text-xs mb-1",input:"py-1.5 px-3 text-sm",helper:"text-xs mt-1",adornment:"h-4 w-4"},medium:{container:"mb-4",label:"text-sm mb-1.5",input:"py-2 px-3 text-sm",helper:"text-xs mt-1.5",adornment:"h-5 w-5"},large:{container:"mb-5",label:"text-base mb-2",input:"py-2.5 px-4 text-base",helper:"text-sm mt-1.5",adornment:"h-5 w-5"}}[m].container}
    ${s?"w-full":""}
    ${l}
  `.trim(),A=`
    block px-2.5 pb-2.5 pt-4 w-full text-base
    bg-background-input dark:bg-background-input-dark
    border ${e?"border-red-500":"border-border-primary dark:border-border-primary-dark"} 
    rounded-lg
    focus:outline-none focus:ring-0
    ${e?"focus:border-red-500":"focus:border-primary dark:focus:border-primary-light"}
    ${d?"opacity-50 cursor-not-allowed":""}
    transition-all duration-200
  `;return ie.useImperativeHandle(b,()=>a?_.current:w.current),a?c.jsxs("div",{className:k,children:[t&&c.jsxs("label",{className:`
              absolute text-sm text-text-secondary dark:text-text-secondary-dark z-10
              duration-300 transform -translate-y-4 scale-75 top-2 origin-[0] bg-background px-2 peer-focus:px-2 
              peer-focus:text-primary dark:peer-focus:text-primary-light
              ${e?"text-red-500 peer-focus:text-red-500":""}
              left-1
            `,children:[t," ",f&&c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{ref:_,className:A,rows:i,onChange:E,value:v!==void 0?v:y,disabled:d,"aria-label":!t&&!g["aria-label"]&&!g["aria-labelledby"]?g.placeholder||"text area":g["aria-label"],...g}),r&&c.jsx("p",{className:`mt-1 text-xs ${e?"text-red-500":"text-text-secondary dark:text-text-secondary-dark"}`,children:r})]}):c.jsxs("div",{className:k,children:[t&&c.jsxs("label",{...R,className:`
            absolute text-sm text-text-secondary dark:text-text-secondary-dark z-10
            duration-300 transform -translate-y-4 scale-75 top-2 origin-[0] bg-background px-2 peer-focus:px-2 
            peer-focus:text-primary dark:peer-focus:text-primary-light
            ${e?"text-red-500 peer-focus:text-red-500":""}
            left-1
          `,children:[t," ",f&&c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[(o==null?void 0:o.startAdornment)&&c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:o.startAdornment}),c.jsx("input",{ref:w,...S(),className:`
            ${A}
            ${o!=null&&o.startAdornment?"pl-10":""}
            ${o!=null&&o.endAdornment?"pr-10":""}
          `,disabled:d,...g}),(o==null?void 0:o.endAdornment)&&c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:o.endAdornment})]}),r&&c.jsx("p",{...e?O:L,className:`mt-1 text-xs ${e?"text-red-500":"text-text-secondary dark:text-text-secondary-dark"}`,children:r})]})});kn.displayName="TextField";const we=C.forwardRef(({children:t,className:r="",variant:e="body1",component:s,color:n,noWrap:a=!1,gutterBottom:i=!1,paragraph:o=!1,sx:l={},...d},f)=>{const h={};l.display&&(h.display=l.display),l.p&&(h.padding=typeof l.p=="number"?`${l.p*8}px`:l.p),l.m&&(h.margin=typeof l.m=="number"?`${l.m*8}px`:l.m),l.mt&&(h.marginTop=typeof l.mt=="number"?`${l.mt*8}px`:l.mt),l.mr&&(h.marginRight=typeof l.mr=="number"?`${l.mr*8}px`:l.mr),l.mb&&(h.marginBottom=typeof l.mb=="number"?`${l.mb*8}px`:l.mb),l.ml&&(h.marginLeft=typeof l.ml=="number"?`${l.ml*8}px`:l.ml);const v={h1:{element:"h1",classes:"text-4xl font-bold"},h2:{element:"h2",classes:"text-3xl font-bold"},h3:{element:"h3",classes:"text-2xl font-bold"},h4:{element:"h4",classes:"text-xl font-bold"},h5:{element:"h5",classes:"text-lg font-bold"},h6:{element:"h6",classes:"text-base font-bold"},subtitle1:{element:"h6",classes:"text-base font-medium"},subtitle2:{element:"h6",classes:"text-sm font-medium"},body1:{element:"p",classes:"text-base"},body2:{element:"p",classes:"text-sm"},caption:{element:"span",classes:"text-xs"},button:{element:"span",classes:"text-sm font-medium uppercase"},overline:{element:"span",classes:"text-xs font-medium uppercase tracking-wider"}},m=s||(o?"p":v[e].element),g=v[e].classes,b=a?"whitespace-nowrap overflow-hidden text-ellipsis":"",y=i?"mb-2":"",x=o?"mb-4":"";let w="";if(n)switch(n){case"primary":w="text-primary-400";break;case"secondary":w="text-secondary-500";break;case"error":w="text-red-500";break;case"warning":w="text-yellow-500";break;case"info":w="text-blue-500";break;case"success":w="text-green-500";break;default:h.color=n}return c.jsx(m,{ref:f,className:`typography ${g} ${b} ${y} ${x} ${w} ${r}`,style:{...d.style,...h},...d,children:t})});we.displayName="Typography";const ts=C.forwardRef(({children:t,container:r=!1,item:e=!1,xs:s,sm:n,md:a,lg:i,xl:o,spacing:l=0,className:d="",sx:f={},...h},v)=>{const m={};f.mt&&(m.marginTop=`${f.mt*.25}rem`),f.mb&&(m.marginBottom=`${f.mb*.25}rem`),f.ml&&(m.marginLeft=`${f.ml*.25}rem`),f.mr&&(m.marginRight=`${f.mr*.25}rem`),f.mx&&(m.marginLeft=m.marginRight=`${f.mx*.25}rem`),f.my&&(m.marginTop=m.marginBottom=`${f.my*.25}rem`),f.m&&(m.margin=`${f.m*.25}rem`);const g=r?"flex flex-wrap":"",b=r?{0:"",1:"-m-1",2:"-m-2",3:"-m-3",4:"-m-4",5:"-m-5",6:"-m-6",7:"-m-7",8:"-m-8",9:"-m-9",10:"-m-10"}[l]:e?{0:"",1:"p-1",2:"p-2",3:"p-3",4:"p-4",5:"p-5",6:"p-6",7:"p-7",8:"p-8",9:"p-9",10:"p-10"}[l]:"",y=(F,R)=>{if(R===!0)return`${F}:flex-grow`;if(R==="auto")return`${F}:w-auto`;const Z={1:"1/12",2:"2/12",3:"1/4",4:"1/3",5:"5/12",6:"1/2",7:"7/12",8:"2/3",9:"3/4",10:"10/12",11:"11/12",12:"full"};return R?`${F===""?"":`${F}:`}w-${Z[R]||"full"}`:""},x=y("",s),w=y("sm",n),_=y("md",a),E=y("lg",i),S=y("xl",o);return c.jsx("div",{ref:v,className:`
        ${g}
        ${b}
        ${e?x:""}
        ${e?w:""}
        ${e?_:""}
        ${e?E:""}
        ${e?S:""}
        ${d}
      `.trim(),style:{...m,...h.style},...h,children:t})});ts.displayName="Grid";const rs=C.forwardRef(({alt:t,src:r,children:e,variant:s="circular",size:n="medium",className:a="",sx:i={},...o},l)=>{const d={};i.mt&&(d.marginTop=`${i.mt*.25}rem`),i.mb&&(d.marginBottom=`${i.mb*.25}rem`),i.ml&&(d.marginLeft=`${i.ml*.25}rem`),i.mr&&(d.marginRight=`${i.mr*.25}rem`),i.mx&&(d.marginLeft=d.marginRight=`${i.mx*.25}rem`),i.my&&(d.marginTop=d.marginBottom=`${i.my*.25}rem`),i.m&&(d.margin=`${i.m*.25}rem`);const f={small:"w-8 h-8 text-xs",medium:"w-10 h-10 text-sm",large:"w-12 h-12 text-base"}[n],h={circular:"rounded-full",rounded:"rounded-md",square:"rounded-none"}[s],v=()=>{if(!t)return"";const m=t.split(" ");return m.length===1?m[0].substring(0,2).toUpperCase():(m[0][0]+m[m.length-1][0]).toUpperCase()};return c.jsx("div",{ref:l,className:`
        flex items-center justify-center
        overflow-hidden bg-gray-300 text-gray-600 font-medium
        ${f}
        ${h}
        ${a}
      `,"aria-label":t,style:d,...o,children:r?c.jsx("img",{src:r,alt:t||"avatar",className:"w-full h-full object-cover",onError:m=>{m.target.src=""}}):e||v()})});rs.displayName="Avatar";const ns=C.forwardRef(({checked:t,defaultChecked:r,disabled:e=!1,onChange:s,size:n="medium",color:a="primary",className:i="",edge:o,inputProps:l={},sx:d={},...f},h)=>{console.log("Switch rendering with checked=",t);const v=C.useCallback(E=>{console.log("Switch handleChange called with checked=",E.target.checked),s&&s(E)},[s]),m={};d.mt&&(m.marginTop=`${d.mt*.25}rem`),d.mb&&(m.marginBottom=`${d.mb*.25}rem`),d.ml&&(m.marginLeft=`${d.ml*.25}rem`),d.mr&&(m.marginRight=`${d.mr*.25}rem`),d.mx&&(m.marginLeft=m.marginRight=`${d.mx*.25}rem`),d.my&&(m.marginTop=m.marginBottom=`${d.my*.25}rem`),d.m&&(m.margin=`${d.m*.25}rem`);const g=n==="small"?"w-8":"w-10",b=n==="small"?"h-4":"h-5",y=n==="small"?"w-3 h-3":"w-4 h-4",x=n==="small"?"translate-x-4":"translate-x-5",w={primary:"bg-blue-500",secondary:"bg-purple-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-sky-500",success:"bg-green-500"},_={start:"-ml-2",end:"-mr-2"};return c.jsxs("label",{className:`
        inline-flex items-center relative
        ${o?_[o]:""}
        ${i}
      `,style:m,children:[c.jsx("input",{type:"checkbox",ref:h,checked:t,defaultChecked:r,disabled:e,onChange:v,className:"sr-only peer",...l,...f}),c.jsx("div",{className:`
          ${g} ${b} rounded-full
          flex items-center transition-colors duration-200 ease-in-out
          bg-gray-200 peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-offset-white
          peer-focus:ring-opacity-50
          peer-checked:${w[a]}
          ${e?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,children:c.jsx("span",{className:`
            ${y} bg-white rounded-full shadow transform
            transition-transform duration-200 ease-in-out
            peer-checked:${x}
            ml-0.5
          `})})]})});ns.displayName="Switch";const as=C.forwardRef(({children:t,className:r="",size:e="medium",stickyHeader:s=!1,sx:n={},...a},i)=>{const o={};n.width&&(o.width=n.width),n.minWidth&&(o.minWidth=n.minWidth),n.maxWidth&&(o.maxWidth=n.maxWidth),n.mt&&(o.marginTop=`${n.mt*.25}rem`),n.mb&&(o.marginBottom=`${n.mb*.25}rem`),n.ml&&(o.marginLeft=`${n.ml*.25}rem`),n.mr&&(o.marginRight=`${n.mr*.25}rem`),n.mx&&(o.marginLeft=o.marginRight=`${n.mx*.25}rem`),n.my&&(o.marginTop=o.marginBottom=`${n.my*.25}rem`),n.m&&(o.margin=`${n.m*.25}rem`);const l=e==="small"?"text-sm":"text-base";return c.jsx("div",{className:"w-full overflow-x-auto",children:c.jsx("table",{ref:i,className:`
          min-w-full divide-y divide-gray-200
          border-collapse border-spacing-0
          ${l}
          ${r}
        `,style:o,...a,children:t})})});as.displayName="Table";const is=C.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const a={};return c.jsx("thead",{ref:n,className:`bg-gray-50 ${r}`,style:a,...s,children:t})});is.displayName="TableHead";const ss=C.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const a={};return c.jsx("tbody",{ref:n,className:`bg-white divide-y divide-gray-200 ${r}`,style:a,...s,children:t})});ss.displayName="TableBody";const os=C.forwardRef(({children:t,className:r="",hover:e=!1,selected:s=!1,sx:n={},...a},i)=>{const o={};return c.jsx("tr",{ref:i,className:`
        ${e?"hover:bg-gray-50":""}
        ${s?"bg-blue-50":""}
        transition-colors
        ${r}
      `,style:o,...a,children:t})});os.displayName="TableRow";const ls=C.forwardRef(({children:t,className:r="",align:e="left",padding:s="normal",size:n="medium",variant:a="body",sx:i={},...o},l)=>{const d={},f={inherit:"",left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"}[e],h={normal:"px-4 py-3",checkbox:"px-1 py-3",none:"p-0"}[s],v=n==="small"?"text-sm":"text-base",m=a==="head"?"font-medium text-gray-700":a==="footer"?"font-medium bg-gray-50":"font-normal text-gray-500",g=a==="head"?"th":"td";return c.jsx(g,{ref:l,className:`
        ${f}
        ${h}
        ${v}
        ${m}
        ${r}
      `,style:d,...o,children:t})});ls.displayName="TableCell";const cs=C.forwardRef(({children:t,className:r="",sx:e={},...s},n)=>{const a={};return c.jsx("tfoot",{ref:n,className:`bg-gray-50 ${r}`,style:a,...s,children:t})});cs.displayName="TableFooter";const ds=C.forwardRef(({children:t,color:r="primary",size:e="medium",variant:s="circular",className:n="",sx:a={},...i},o)=>{const l={};a.width&&(l.width=a.width),a.minWidth&&(l.minWidth=a.minWidth),a.maxWidth&&(l.maxWidth=a.maxWidth),a.height&&(l.height=a.height),a.minHeight&&(l.minHeight=a.minHeight),a.maxHeight&&(l.maxHeight=a.maxHeight),a.mt&&(l.marginTop=`${a.mt*.25}rem`),a.mb&&(l.marginBottom=`${a.mb*.25}rem`),a.ml&&(l.marginLeft=`${a.ml*.25}rem`),a.mr&&(l.marginRight=`${a.mr*.25}rem`),a.mx&&(l.marginLeft=l.marginRight=`${a.mx*.25}rem`),a.my&&(l.marginTop=l.marginBottom=`${a.my*.25}rem`),a.m&&(l.margin=`${a.m*.25}rem`),a.bottom&&(l.bottom=a.bottom),a.right&&(l.right=a.right),a.left&&(l.left=a.left),a.top&&(l.top=a.top),a.position&&(l.position=a.position),a.zIndex&&(l.zIndex=a.zIndex);const d={small:"w-10 h-10 text-sm",medium:"w-14 h-14 text-base",large:"w-16 h-16 text-lg"}[e],f={circular:"rounded-full aspect-square",extended:"rounded-full px-4"}[s],h={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-purple-600 hover:bg-purple-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",error:"bg-red-600 hover:bg-red-700 text-white",info:"bg-sky-600 hover:bg-sky-700 text-white",warning:"bg-amber-600 hover:bg-amber-700 text-white"}[r];return c.jsx("button",{ref:o,className:`
        flex items-center justify-center
        shadow-lg
        transition-colors
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-${r}-500
        disabled:opacity-50 disabled:pointer-events-none
        ${d}
        ${f}
        ${h}
        ${n}
      `,style:l,...i,children:t})});ds.displayName="Fab";function Rt(t,r){const e=ie.memo(t);return r?e.displayName=`Memo(${r})`:t.displayName?e.displayName=`Memo(${t.displayName})`:t.name&&(e.displayName=`Memo(${t.name})`),e}const us=({onAssetImport:t,isFullPage:r=!1,dialogOpen:e=!1,onClose:s})=>{const n=C.useRef(null),a=C.useRef(null),i=C.useRef(null),o=C.useRef(null),{isDragging:l,isProcessing:d,result:f,hasStoredAssets:h,handleDragOver:v,handleDragLeave:m,handleDrop:g,processZipFile:b,clearResult:y,clearAllAssets:x,createSampleData:w,exportData:_,addAsset:E}=Wr(),S=`
Your zip file should contain:

1. /audio folder - with mp3, wav, or ogg files
2. /images folder - with jpg, png, gif, or pdf files
3. /data folder - with JSON files:
   - locations.json: Array of location objects with id, name, description
   - characters.json: Array of character objects

Example locations.json:
[
  {
    "id": "tavern",
    "name": "The Rusty Tankard",
    "description": "A cozy tavern with a fireplace.",
    "backgroundMusic": "tavern_ambience.mp3"
  }
]
  `,F=C.useCallback(async B=>{const U=B.target.files;if(!U||U.length===0)return;const z=U[0];await b(z),n.current&&(n.current.value=""),t&&t()},[b,t]),R=C.useCallback(async()=>{(await w()).success&&t&&t()},[w,t]),Z=C.useCallback(async()=>{await _()},[_]),L=C.useCallback(async()=>{(await x()).success&&t&&t()},[x,t]),O=C.useCallback(()=>{var B;(B=n.current)==null||B.click()},[]),N=C.useCallback(async(B,U)=>{const z=B.target.files;!z||z.length===0||(await Promise.all(Array.from(z).map(P=>E(U,P))),B.target&&(B.target.value=""),t&&t())},[E,t]),k=C.useCallback(B=>{N(B,"audio")},[N]),A=C.useCallback(B=>{N(B,"images")},[N]),u=C.useCallback(B=>{N(B,"data")},[N]),D=C.useCallback(()=>{var B;(B=a.current)==null||B.click()},[]),H=C.useCallback(()=>{var B;(B=i.current)==null||B.click()},[]),W=C.useCallback(()=>{var B;(B=o.current)==null||B.click()},[]),ee=c.jsx("div",{className:`asset-drop-zone ${l?"dragging":""} ${r?"h-full":""}`,onDragOver:v,onDragLeave:m,onDrop:g,children:c.jsxs("div",{className:"p-4 bg-gray-800 dark:bg-gray-800 rounded-lg shadow-md relative w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Asset Manager"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{title:S,className:"text-gray-400 hover:text-gray-300 p-1 ml-2",children:c.jsx(Xn,{})}),e&&s&&c.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-300 p-1 ml-2",children:c.jsx(ar,{})})]})]}),c.jsxs("div",{className:"mb-4 bg-gray-700 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center p-3",children:[c.jsx("h3",{className:"text-base font-medium text-white",children:"Import ZIP File"}),c.jsx(jr,{className:"text-gray-400"})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:`
                border-2 border-dashed rounded-lg p-6 
                flex flex-col items-center justify-center 
                cursor-pointer transition-colors duration-200
                ${l?"border-blue-500 bg-blue-900 bg-opacity-10":"border-gray-500"} 
              `,onDragOver:v,onDragLeave:m,onDrop:g,onClick:O,children:[d?c.jsx(dt,{className:"my-4"}):c.jsxs(c.Fragment,{children:[c.jsx(ta,{className:"text-gray-400 h-10 w-10 mb-2"}),c.jsx(we,{variant:"body1",className:"text-white mb-1",children:"Drag & Drop a ZIP file here, or click to select"}),c.jsx(we,{variant:"body2",className:"text-gray-400",children:"Your ZIP should contain audio/, images/, and data/ folders"})]}),c.jsx("input",{type:"file",ref:n,onChange:F,className:"hidden",accept:".zip"})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(pt,{}),onPress:O,isDisabled:d,children:"Select ZIP"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(Yn,{}),onPress:Z,isDisabled:d||!h,children:"Export Data"}),c.jsx(ke,{variant:"outlined",color:"primary",onPress:R,isDisabled:d,children:"Create Sample Data"}),c.jsx(ke,{variant:"outlined",color:"error",startIcon:c.jsx(Fr,{}),onPress:L,isDisabled:d||!h,children:"Clear Assets"})]})]})]}),c.jsxs("div",{className:"mb-4 bg-gray-700 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center p-3",children:[c.jsx("h3",{className:"text-base font-medium text-white",children:"Upload Individual Files"}),c.jsx(jr,{className:"text-gray-400"})]}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(we,{variant:"body1",className:"text-white mb-2",children:"Audio Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(pt,{}),onPress:D,isDisabled:d,className:"w-full",children:"Select Audio"}),c.jsx(we,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: MP3, WAV, OGG"}),c.jsx("input",{type:"file",ref:a,onChange:k,className:"hidden",accept:"audio/*",multiple:!0})]}),c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(we,{variant:"body1",className:"text-white mb-2",children:"Image Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(pt,{}),onPress:H,isDisabled:d,className:"w-full",children:"Select Images"}),c.jsx(we,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: JPG, PNG, GIF, SVG"}),c.jsx("input",{type:"file",ref:i,onChange:A,className:"hidden",accept:"image/*",multiple:!0})]}),c.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[c.jsx(we,{variant:"body1",className:"text-white mb-2",children:"Data Files"}),c.jsx(ke,{variant:"outlined",color:"primary",startIcon:c.jsx(pt,{}),onPress:W,isDisabled:d,className:"w-full",children:"Select Data"}),c.jsx(we,{variant:"body2",className:"text-gray-400 mt-2",children:"Supported: JSON, TXT, PDF"}),c.jsx("input",{type:"file",ref:o,onChange:u,className:"hidden",accept:".json,.txt,.pdf",multiple:!0})]})]}),d&&c.jsxs("div",{className:"flex justify-center items-center mt-4",children:[c.jsx(dt,{}),c.jsx(we,{variant:"body2",className:"text-white ml-2",children:"Processing files..."})]})]})]}),f&&c.jsx(sr,{severity:f.success?"success":"error",onClose:y,className:"mt-4",children:f.message})]})});return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"w-full max-w-3xl",children:ee})}):ee},fs=Rt(us,"AssetDropZone"),hs=({type:t,title:r})=>{const e=C.useRef(null),{audioAssets:s,imageAssets:n,dataAssets:a,isLoadingAssets:i,addAsset:o,deleteAsset:l}=Wr(),{loadJsonContent:d}=ir(),f=t==="audio"?s:t==="images"?n:a,h=C.useCallback(async y=>{const x=y.target.files;if(!x||x.length===0)return;const w=x[0];await o(t,w),e.current&&(e.current.value="")},[o,t]),v=C.useCallback(()=>{var y;(y=e.current)==null||y.click()},[]),m=C.useCallback(async y=>{window.confirm(`Are you sure you want to delete ${y}?`)&&await l(t,y)},[l,t]),g=C.useCallback(async y=>{await d(y)},[d]);if(i)return c.jsxs(Pe,{className:"p-4 bg-gray-800 rounded-lg mb-4",children:[c.jsx(we,{variant:"h6",className:"mb-2",children:r}),c.jsx(Pe,{className:"flex justify-center p-4",children:c.jsx(dt,{})})]});const b=C.useCallback(y=>{const x=t==="images"&&y.toLowerCase().endsWith(".pdf"),w=t==="data"&&y.toLowerCase().endsWith(".json");return c.jsxs(Lt,{className:"flex justify-between items-center py-2",children:[c.jsxs("div",{children:[c.jsx(we,{variant:"body2",className:"font-medium text-gray-200",children:y}),c.jsx(we,{variant:"caption",className:"text-gray-400",children:t==="data"?"JSON Data":x?"PDF Document":`${r} File`})]}),c.jsxs("div",{className:"flex space-x-1",children:[w&&c.jsx(Nt,{size:"small",onClick:()=>g(y),className:"text-blue-400 hover:text-blue-300",children:c.jsx(Gn,{})}),c.jsx(Nt,{size:"small",onClick:()=>m(y),className:"text-red-400 hover:text-red-300",children:c.jsx(Fr,{})})]})]},y)},[t,r,m,g]);return c.jsxs(Pe,{className:"p-4 bg-gray-800 rounded-lg mb-4",children:[c.jsxs(Pe,{className:"flex justify-between items-center mb-2",children:[c.jsx(we,{variant:"h6",children:r}),c.jsxs(ke,{variant:"outlined",color:"primary",size:"small",startIcon:c.jsx(nr,{}),onPress:v,children:["Add ",r]}),c.jsx("input",{type:"file",ref:e,className:"hidden",onChange:h,accept:t==="audio"?".mp3,.wav,.ogg":t==="images"?".jpg,.jpeg,.png,.gif,.pdf":".json"})]}),f.length>0?c.jsx(or,{className:"divide-y divide-gray-700",children:f.map(b)}):c.jsxs(Pe,{className:"p-4 text-center text-gray-400",children:["No ",r.toLowerCase(),' assets found. Add some using the "Add ',r,'" button.']})]})},qs=Rt(hs,"AssetList"),ms=()=>{const{isJsonEditorOpen:t,jsonFileToEdit:r,jsonContent:e,isLoading:s,error:n,setIsJsonEditorOpen:a,setJsonContent:i,saveJsonContent:o}=ir(),l=C.useCallback(async()=>{await o()},[o]),d=C.useCallback(()=>{s||e!==""&&!window.confirm("Are you sure you want to close without saving?")||a(!1)},[s,e,a]),f=C.useCallback(h=>{i(h.target.value)},[i]);return c.jsxs(br,{open:t,onClose:d,maxWidth:"md",fullWidth:!0,children:[c.jsxs(zt,{className:"flex justify-between items-center",children:[c.jsx("span",{children:r?`Editing: ${r}`:"JSON Editor"}),c.jsx(ke,{variant:"text",onPress:d,isDisabled:s,startIcon:c.jsx(ar,{}),children:"Close"})]}),c.jsx(vr,{children:s?c.jsx(Pe,{className:"flex justify-center items-center p-4",children:c.jsx(dt,{})}):c.jsxs(c.Fragment,{children:[n&&c.jsx(sr,{severity:"error",className:"mb-4",children:n}),c.jsx(Pe,{className:"mb-2",children:c.jsx(we,{variant:"caption",className:"block mb-1 text-gray-400",children:"Edit the JSON data below. Make sure to keep valid JSON syntax."})}),c.jsx("textarea",{className:"w-full h-80 p-3 font-mono bg-gray-900 text-gray-200 border border-gray-700 rounded",value:e,onChange:f})]})}),c.jsx(yn,{children:c.jsx(ke,{variant:"contained",color:"primary",startIcon:c.jsx(qn,{}),onPress:l,isDisabled:s||!e,children:"Save"})})]})},Ys=Rt(ms,"JsonEditor"),ps=()=>{const{isCreateJsonOpen:t,newJsonFileName:r,isLoading:e,error:s,setIsCreateJsonOpen:n,setNewJsonFileName:a,createNewJsonFile:i}=ir(),o=C.useCallback(async()=>{r&&await i()},[r,i]),l=C.useCallback(()=>{e||n(!1)},[e,n]),d=C.useCallback(f=>{a(f)},[]);return c.jsxs(br,{open:t,onClose:l,maxWidth:"sm",fullWidth:!0,children:[c.jsx(zt,{children:"Create New JSON File"}),c.jsx(vr,{children:e?c.jsx("div",{className:"flex justify-center items-center p-4",children:c.jsx(dt,{})}):c.jsxs(c.Fragment,{children:[s&&c.jsx(sr,{severity:"error",className:"mb-4",children:s}),c.jsx(we,{variant:"body2",className:"mb-4",children:"Enter a name for the new JSON file. The file will be created with empty JSON structure."}),c.jsx(kn,{label:"File Name",placeholder:"example.json",value:r,onChange:d,fullWidth:!0,helperText:"File name will have .json extension added if not provided"})]})}),c.jsxs(yn,{children:[c.jsx(ke,{onPress:l,isDisabled:e,children:"Cancel"}),c.jsx(ke,{variant:"contained",color:"primary",startIcon:c.jsx(nr,{}),onPress:o,isDisabled:e||!r,children:"Create"})]})]})},Xs=Rt(ps,"NewJsonDialog"),gs=()=>{const{locations:t,characters:r,combats:e}=Qe(),[s,n]=C.useState(!1),[a,i]=C.useState(0);C.useEffect(()=>{(async()=>{const h=await de.getAssets("audio");i(h.length)})()},[]);const o=[{label:"Total Locations",value:t.length,icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),color:"from-indigo-500/20 to-indigo-700/20"},{label:"Total Characters",value:r.length,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),color:"from-amber-500/20 to-amber-700/20"},{label:"Available Music",value:a,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),color:"from-emerald-500/20 to-emerald-700/20"},{label:"Combat Encounters",value:e.length,icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),color:"from-red-500/20 to-red-700/20"}],l=()=>{n(!1)},d=async()=>{const f=await de.getAssets("audio");i(f.length)};return c.jsxs("div",{className:"p-6 max-w-[var(--content-width-xl)] mx-auto",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold font-[var(--font-display)] text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 to-indigo-500",children:"Campaign Dashboard"}),c.jsx(ke,{variant:"glass",color:"primary",startIcon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),onPress:()=>n(!0),children:"Manage Assets"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(f=>c.jsx(wt,{className:"hover-lift overflow-visible",variant:"glass",children:c.jsxs(yt,{className:"p-5 relative z-10",children:[c.jsx("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-gradient-to-br rounded-[var(--radius-lg)] opacity-20 z-0 pointer-events-none ${stat.color}"}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-medium text-slate-200 mb-1",children:f.label}),c.jsx("p",{className:"text-4xl font-bold text-white",children:f.value})]}),c.jsx("div",{className:"bg-white/10 p-2 rounded-lg text-indigo-300",children:f.icon})]})]})},f.label))}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[c.jsxs(wt,{variant:"glass",className:"hover-lift",children:[c.jsx(rr,{title:c.jsx("span",{className:"text-xl font-semibold text-white",children:"Recent Locations"}),action:c.jsx(ke,{variant:"text",color:"default",size:"small",href:"/campaignorganizer/locations/",children:"View All"})}),c.jsx(yt,{className:"px-5 pb-4 pt-0",children:c.jsxs("div",{className:"space-y-1",children:[t.slice(0,5).map(f=>c.jsxs("div",{className:"p-2 hover:bg-white/5 rounded-[var(--radius-md)] transition-all flex items-center",children:[c.jsx("span",{className:"text-indigo-300 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),f.name]},f.id)),t.length===0&&c.jsxs("div",{className:"text-slate-400 italic p-2 flex items-center",children:[c.jsx("span",{className:"text-slate-500 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"No locations added yet"]})]})})]}),c.jsxs(wt,{variant:"glass",className:"hover-lift",children:[c.jsx(rr,{title:c.jsx("span",{className:"text-xl font-semibold text-white",children:"Recent Characters"}),action:c.jsx(ke,{variant:"text",color:"default",size:"small",href:"/campaignorganizer/characters/",children:"View All"})}),c.jsx(yt,{className:"px-5 pb-4 pt-0",children:c.jsxs("div",{className:"space-y-1",children:[r.slice(0,5).map(f=>c.jsxs("div",{className:"p-2 hover:bg-white/5 rounded-[var(--radius-md)] transition-all flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-amber-300 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),f.name]}),c.jsx("span",{className:"text-slate-400 text-sm bg-white/5 px-2 py-0.5 rounded",children:f.type})]},f.id)),r.length===0&&c.jsxs("div",{className:"text-slate-400 italic p-2 flex items-center",children:[c.jsx("span",{className:"text-slate-500 mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"No characters added yet"]})]})})]})]}),s&&c.jsxs(br,{open:s,onClose:l,maxWidth:"md",fullWidth:!0,children:[c.jsx(zt,{children:"Asset Manager"}),c.jsx(vr,{children:c.jsx(fs,{onAssetImport:d,onClose:l})})]})]})},et=(t,r)=>C.lazy(()=>t().then(e=>e[r]?{default:e[r]}:(console.error(`Component ${r} not found in the module`),{default:()=>c.jsxs("div",{className:"glass-effect p-6 text-center max-w-md mx-auto mt-10",children:[c.jsx("h5",{className:"text-xl font-display font-bold text-error-DEFAULT mb-4",children:"Failed to load component"}),c.jsx("button",{className:"px-5 py-2.5 bg-primary-DEFAULT text-text-primary rounded-lg hover:bg-primary-light transition-all duration-300 shadow-lg btn-glow",onClick:()=>window.location.reload(),children:"Reload Page"})]})})).catch(e=>(console.error(`Error loading component ${r}:`,e),{default:()=>c.jsxs("div",{className:"glass-effect p-8 text-center max-w-md mx-auto mt-10",children:[c.jsx("h5",{className:"text-xl font-display font-bold text-error-DEFAULT mb-4",children:"Failed to load component"}),c.jsxs("p",{className:"mb-6 text-text-secondary",children:["Error: ",e.message]}),c.jsx("button",{className:"px-5 py-2.5 bg-primary-DEFAULT text-text-primary rounded-lg hover:bg-primary-light transition-all duration-300 shadow-lg btn-glow",onClick:()=>window.location.reload(),children:"Reload Page"})]})}))),bs=et(()=>Te(()=>import("./MapView-C6LTSgIR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"MapView"),vs=et(()=>Te(()=>import("./LocationsView-BkPVLmdg.js"),__vite__mapDeps([8,1,4,6,7])),"LocationsView"),xs=et(()=>Te(()=>import("./CharactersView-CsjbovlP.js"),__vite__mapDeps([9,1,10,3,4,11,5,6,7])),"CharactersView"),ws=et(()=>Te(()=>import("./CombatsView-1ilFBMND.js"),__vite__mapDeps([12,1,10,3,4,6,7])),"CombatsView"),ys=et(()=>Te(()=>import("./CombatSessionView-IK8C3Nls.js"),__vite__mapDeps([13,1,2,3,4,11,5,6,7])),"CombatSessionView"),ks=et(()=>Te(()=>import("./AssetsView-Cy2p1CzF.js"),__vite__mapDeps([14,1,6,7])),"AssetsView"),$s=()=>c.jsx("div",{className:"flex justify-center items-center h-full p-10",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-DEFAULT opacity-20 blur-xl animate-pulse-slow"}),c.jsx("div",{className:"relative z-10",children:c.jsx(aa,{size:"lg",text:"Loading content..."})})]})});window.ReactMarkdownLoaded=!0;const _s=()=>null;function js(){Qe(e=>e.hasAssets);const[t,r]=C.useState({x:0,y:0});return C.useEffect(()=>{const e=s=>{r({x:s.clientX/window.innerWidth,y:s.clientY/window.innerHeight})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),c.jsxs("div",{className:"min-h-screen overflow-hidden bg-background",children:[c.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden bg-gradient-to-b from-background to-background-elevated",children:[c.jsx("div",{className:"absolute inset-0 bg-radial-gradient"}),c.jsx("div",{className:"absolute w-[800px] h-[800px] rounded-full blur-3xl bg-gradient-to-br from-primary-dark/10 via-primary/5 to-transparent opacity-30",style:{top:`calc(20% - ${t.y*40}px)`,left:`calc(15% - ${t.x*40}px)`,transition:"transform 0.8s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute w-[600px] h-[600px] rounded-full blur-[100px] bg-gradient-to-tr from-secondary-dark/10 via-secondary/10 to-transparent opacity-30",style:{bottom:`calc(30% - ${t.y*30}px)`,right:`calc(20% - ${t.x*30}px)`,transition:"transform 1s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute w-[500px] h-[500px] rounded-full blur-[80px] bg-gradient-to-r from-accent/5 via-accent-dark/10 to-transparent opacity-20",style:{top:`calc(60% - ${t.y*20}px)`,right:`calc(35% - ${t.x*20}px)`,transition:"transform 1.2s cubic-bezier(0.2, 0, 0.2, 1)"}}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-border-DEFAULT/10 to-transparent"}),c.jsx("div",{className:"absolute inset-0 bg-grid-pattern"})]}),c.jsxs(Tn,{basename:"/campaignorganizer/",children:[c.jsxs("div",{className:"flex flex-col min-h-screen relative z-10",children:[c.jsx(ia,{}),c.jsx(Jn,{}),c.jsx("div",{className:"flex-1 relative pt-16",children:c.jsx("div",{className:"animate-fade-in h-full overflow-auto scrollbar-thin",children:c.jsx(C.Suspense,{fallback:c.jsx($s,{}),children:c.jsxs(Ln,{children:[c.jsx(Me,{path:"/",element:c.jsx(gs,{})}),c.jsx(Me,{path:"/map",element:c.jsx(bs,{})}),c.jsx(Me,{path:"/locations",element:c.jsx(vs,{})}),c.jsx(Me,{path:"/characters",element:c.jsx(xs,{})}),c.jsx(Me,{path:"/combats",element:c.jsx(ws,{})}),c.jsx(Me,{path:"/combat-session",element:c.jsx(ys,{})}),c.jsx(Me,{path:"/assets",element:c.jsx(ks,{})}),c.jsx(Me,{path:"*",element:c.jsxs("div",{className:"p-4",children:[c.jsx("script",{dangerouslySetInnerHTML:{__html:`
                          // Check if current path is likely a PDF or asset
                          const path = window.location.pathname;
                          const isPdf = path.toLowerCase().endsWith('.pdf');
                          const containsFragment = window.location.hash.includes('toolbar=') || 
                                                  window.location.hash.includes('navpanes=');
                          
                          if (isPdf || containsFragment) {
                            // Extract base path without fragments
                            const cleanPath = path.split('#')[0];
                            // Redirect back to main app, we'll handle PDFs in components
                            window.location.replace('/campaignorganizer/');
                            
                            // Store the PDF path to potentially use later
                            sessionStorage.setItem('lastAttemptedPdfPath', cleanPath);
                          }
                        `}}),c.jsx("h1",{className:"text-xl font-bold mb-4",children:"Page Not Found"}),c.jsx("p",{children:"The page you're looking for doesn't exist or you don't have permission to view it."}),c.jsx("button",{onClick:()=>window.location.href="/campaignorganizer/",className:"mt-4 px-4 py-2 bg-primary-DEFAULT text-white rounded hover:bg-primary-dark",children:"Return to Dashboard"})]})})]})})})}),c.jsx(na,{})]}),c.jsx(_s,{})]})]})}function Es(){Te(()=>import("./MapView-C6LTSgIR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),Te(()=>import("./LocationsView-BkPVLmdg.js"),__vite__mapDeps([8,1,4,6,7])),Te(()=>import("./CharactersView-CsjbovlP.js"),__vite__mapDeps([9,1,10,3,4,11,5,6,7])),Te(()=>import("./CombatsView-1ilFBMND.js"),__vite__mapDeps([12,1,10,3,4,6,7])),Te(()=>import("./CombatSessionView-IK8C3Nls.js"),__vite__mapDeps([13,1,2,3,4,11,5,6,7])),console.log("Preloading critical components...")}setTimeout(()=>{Es()},2e3);Ut.createRoot(document.getElementById("root")).render(c.jsx(ie.StrictMode,{children:c.jsx(Fi,{children:c.jsx(js,{})})}));export{Hs as $,de as A,Pe as B,dt as C,br as D,Ms as E,Zs as F,Xi as G,Xn as H,Nt as I,zs as J,Ds as K,Lt as L,Rs as M,Fs as N,nr as O,Ls as P,Os as Q,Qi as R,qn as S,we as T,or as U,Gi as V,qi as W,ts as X,Vt as Y,Yi as Z,Ki as _,Us as a,Ps as a0,ve as a1,ye as a2,Ye as a3,qr as a4,_t as a5,ue as a6,qe as a7,Ce as a8,ba as a9,rs as aA,Yn as aB,Gs as aC,li as aD,je as aE,Wr as aF,ir as aG,fs as aH,qs as aI,Ys as aJ,Xs as aK,_e as aa,fi as ab,Pa as ac,kt as ad,Ks as ae,Ra as af,Et as ag,fn as ah,Be as ai,Xe as aj,It as ak,Ai as al,Ht as am,Hr as an,ai as ao,Js as ap,Ii as aq,ii as ar,Qr as as,xn as at,tn as au,vn as av,mi as aw,zi as ax,bi as ay,lr as az,jr as b,Gn as c,Ws as d,ta as e,zt as f,Vs as g,vr as h,es as i,c as j,kn as k,Ji as l,yn as m,ke as n,Bs as o,Qn as p,As as q,Ts as r,Is as s,Qe as t,Br as u,ar as v,wt as w,yt as x,Zi as y,Fr as z};
//# sourceMappingURL=index-BpNjiOl-.js.map
